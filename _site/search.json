[
  {
    "objectID": "Hands-on_Ex/Hands-on_Ex03/Hands-on_Ex03.html",
    "href": "Hands-on_Ex/Hands-on_Ex03/Hands-on_Ex03.html",
    "title": "Hands-on Exercise 3",
    "section": "",
    "text": "pacman::p_load(maptools, sf, raster, spatstat, tmap)"
  },
  {
    "objectID": "Hands-on_Ex/Hands-on_Ex03/Hands-on_Ex03.html#importing-the-spatial-data",
    "href": "Hands-on_Ex/Hands-on_Ex03/Hands-on_Ex03.html#importing-the-spatial-data",
    "title": "Hands-on Exercise 3",
    "section": "4.4.1 Importing the spatial data",
    "text": "4.4.1 Importing the spatial data\n\nchildcare_sf <- st_read(\"data/child-care-services-geojson.geojson\") %>% st_transform(crs = 3414)\n\nReading layer `child-care-services-geojson' from data source \n  `/Users/keredpoh/Desktop/keredpoh/IS415-GAA/Hands-on_Ex/Hands-on_Ex03/data/child-care-services-geojson.geojson' \n  using driver `GeoJSON'\nSimple feature collection with 1545 features and 2 fields\nGeometry type: POINT\nDimension:     XYZ\nBounding box:  xmin: 103.6824 ymin: 1.248403 xmax: 103.9897 ymax: 1.462134\nz_range:       zmin: 0 zmax: 0\nGeodetic CRS:  WGS 84\n\n\n\nsg_sf <- st_read(dsn = \"data\", layer=\"CostalOutline\")\n\nReading layer `CostalOutline' from data source \n  `/Users/keredpoh/Desktop/keredpoh/IS415-GAA/Hands-on_Ex/Hands-on_Ex03/data' \n  using driver `ESRI Shapefile'\nSimple feature collection with 60 features and 4 fields\nGeometry type: POLYGON\nDimension:     XY\nBounding box:  xmin: 2663.926 ymin: 16357.98 xmax: 56047.79 ymax: 50244.03\nProjected CRS: SVY21\n\n\n\nmpsz_sf <- st_read(dsn = \"data\", \n                layer = \"MP14_SUBZONE_WEB_PL\")\n\nReading layer `MP14_SUBZONE_WEB_PL' from data source \n  `/Users/keredpoh/Desktop/keredpoh/IS415-GAA/Hands-on_Ex/Hands-on_Ex03/data' \n  using driver `ESRI Shapefile'\nSimple feature collection with 323 features and 15 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 2667.538 ymin: 15748.72 xmax: 56396.44 ymax: 50256.33\nProjected CRS: SVY21"
  },
  {
    "objectID": "Hands-on_Ex/Hands-on_Ex03/Hands-on_Ex03.html#mapping-the-geospatial-data-sets",
    "href": "Hands-on_Ex/Hands-on_Ex03/Hands-on_Ex03.html#mapping-the-geospatial-data-sets",
    "title": "Hands-on Exercise 3",
    "section": "4.4.2 Mapping the geospatial data sets",
    "text": "4.4.2 Mapping the geospatial data sets\n\ntmap_mode('view')\n\ntmap mode set to interactive viewing\n\ntm_shape(childcare_sf)+\n  tm_dots()\n\n\n\n\n\n\n\ntmap_mode('plot')\n\ntmap mode set to plotting"
  },
  {
    "objectID": "Hands-on_Ex/Hands-on_Ex03/Hands-on_Ex03.html#converting-sf-data-frames-to-sps-spatial-class",
    "href": "Hands-on_Ex/Hands-on_Ex03/Hands-on_Ex03.html#converting-sf-data-frames-to-sps-spatial-class",
    "title": "Hands-on Exercise 3",
    "section": "4.5.1 Converting sf data frames to sp’s Spatial class",
    "text": "4.5.1 Converting sf data frames to sp’s Spatial class\n\nchildcare <- as_Spatial(childcare_sf)\nmpsz <- as_Spatial(mpsz_sf)\nsg <- as_Spatial(sg_sf)\n\n\nchildcare\n\nclass       : SpatialPointsDataFrame \nfeatures    : 1545 \nextent      : 11203.01, 45404.24, 25667.6, 49300.88  (xmin, xmax, ymin, ymax)\ncrs         : +proj=tmerc +lat_0=1.36666666666667 +lon_0=103.833333333333 +k=1 +x_0=28001.642 +y_0=38744.572 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \nvariables   : 2\nnames       :    Name,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           Description \nmin values  :   kml_1, <center><table><tr><th colspan='2' align='center'><em>Attributes</em></th></tr><tr bgcolor=\"#E3E3F3\"> <th>ADDRESSBLOCKHOUSENUMBER</th> <td></td> </tr><tr bgcolor=\"\"> <th>ADDRESSBUILDINGNAME</th> <td></td> </tr><tr bgcolor=\"#E3E3F3\"> <th>ADDRESSPOSTALCODE</th> <td>018989</td> </tr><tr bgcolor=\"\"> <th>ADDRESSSTREETNAME</th> <td>1, MARINA BOULEVARD, #B1 - 01, ONE MARINA BOULEVARD, SINGAPORE 018989</td> </tr><tr bgcolor=\"#E3E3F3\"> <th>ADDRESSTYPE</th> <td></td> </tr><tr bgcolor=\"\"> <th>DESCRIPTION</th> <td></td> </tr><tr bgcolor=\"#E3E3F3\"> <th>HYPERLINK</th> <td></td> </tr><tr bgcolor=\"\"> <th>LANDXADDRESSPOINT</th> <td>0</td> </tr><tr bgcolor=\"#E3E3F3\"> <th>LANDYADDRESSPOINT</th> <td>0</td> </tr><tr bgcolor=\"\"> <th>NAME</th> <td>THE LITTLE SKOOL-HOUSE INTERNATIONAL PTE. LTD.</td> </tr><tr bgcolor=\"#E3E3F3\"> <th>PHOTOURL</th> <td></td> </tr><tr bgcolor=\"\"> <th>ADDRESSFLOORNUMBER</th> <td></td> </tr><tr bgcolor=\"#E3E3F3\"> <th>INC_CRC</th> <td>08F73931F4A691F4</td> </tr><tr bgcolor=\"\"> <th>FMEL_UPD_D</th> <td>20200826094036</td> </tr><tr bgcolor=\"#E3E3F3\"> <th>ADDRESSUNITNUMBER</th> <td></td> </tr></table></center> \nmax values  : kml_999,                  <center><table><tr><th colspan='2' align='center'><em>Attributes</em></th></tr><tr bgcolor=\"#E3E3F3\"> <th>ADDRESSBLOCKHOUSENUMBER</th> <td></td> </tr><tr bgcolor=\"\"> <th>ADDRESSBUILDINGNAME</th> <td></td> </tr><tr bgcolor=\"#E3E3F3\"> <th>ADDRESSPOSTALCODE</th> <td>829646</td> </tr><tr bgcolor=\"\"> <th>ADDRESSSTREETNAME</th> <td>200, PONGGOL SEVENTEENTH AVENUE, SINGAPORE 829646</td> </tr><tr bgcolor=\"#E3E3F3\"> <th>ADDRESSTYPE</th> <td></td> </tr><tr bgcolor=\"\"> <th>DESCRIPTION</th> <td>Child Care Services</td> </tr><tr bgcolor=\"#E3E3F3\"> <th>HYPERLINK</th> <td></td> </tr><tr bgcolor=\"\"> <th>LANDXADDRESSPOINT</th> <td>0</td> </tr><tr bgcolor=\"#E3E3F3\"> <th>LANDYADDRESSPOINT</th> <td>0</td> </tr><tr bgcolor=\"\"> <th>NAME</th> <td>RAFFLES KIDZ @ PUNGGOL PTE LTD</td> </tr><tr bgcolor=\"#E3E3F3\"> <th>PHOTOURL</th> <td></td> </tr><tr bgcolor=\"\"> <th>ADDRESSFLOORNUMBER</th> <td></td> </tr><tr bgcolor=\"#E3E3F3\"> <th>INC_CRC</th> <td>379D017BF244B0FA</td> </tr><tr bgcolor=\"\"> <th>FMEL_UPD_D</th> <td>20200826094036</td> </tr><tr bgcolor=\"#E3E3F3\"> <th>ADDRESSUNITNUMBER</th> <td></td> </tr></table></center> \n\n\n\nmpsz\n\nclass       : SpatialPolygonsDataFrame \nfeatures    : 323 \nextent      : 2667.538, 56396.44, 15748.72, 50256.33  (xmin, xmax, ymin, ymax)\ncrs         : +proj=tmerc +lat_0=1.36666666666667 +lon_0=103.833333333333 +k=1 +x_0=28001.642 +y_0=38744.572 +datum=WGS84 +units=m +no_defs \nvariables   : 15\nnames       : OBJECTID, SUBZONE_NO, SUBZONE_N, SUBZONE_C, CA_IND, PLN_AREA_N, PLN_AREA_C,       REGION_N, REGION_C,          INC_CRC, FMEL_UPD_D,     X_ADDR,     Y_ADDR,    SHAPE_Leng,    SHAPE_Area \nmin values  :        1,          1, ADMIRALTY,    AMSZ01,      N, ANG MO KIO,         AM, CENTRAL REGION,       CR, 00F5E30B5C9B7AD8,      16409,  5092.8949,  19579.069, 871.554887798, 39437.9352703 \nmax values  :      323,         17,    YUNNAN,    YSSZ09,      Y,     YISHUN,         YS,    WEST REGION,       WR, FFCCF172717C2EAF,      16409, 50424.7923, 49552.7904, 68083.9364708,  69748298.792 \n\n\n\nsg\n\nclass       : SpatialPolygonsDataFrame \nfeatures    : 60 \nextent      : 2663.926, 56047.79, 16357.98, 50244.03  (xmin, xmax, ymin, ymax)\ncrs         : +proj=tmerc +lat_0=1.36666666666667 +lon_0=103.833333333333 +k=1 +x_0=28001.642 +y_0=38744.572 +datum=WGS84 +units=m +no_defs \nvariables   : 4\nnames       : GDO_GID, MSLINK, MAPID,              COSTAL_NAM \nmin values  :       1,      1,     0,             ISLAND LINK \nmax values  :      60,     67,     0, SINGAPORE - MAIN ISLAND"
  },
  {
    "objectID": "Hands-on_Ex/Hands-on_Ex03/Hands-on_Ex03.html#converting-the-spatial-class-into-generic-sp-format",
    "href": "Hands-on_Ex/Hands-on_Ex03/Hands-on_Ex03.html#converting-the-spatial-class-into-generic-sp-format",
    "title": "Hands-on Exercise 3",
    "section": "4.5.2 Converting the Spatial class into generic sp format",
    "text": "4.5.2 Converting the Spatial class into generic sp format\n\nchildcare_sp <- as(childcare, \"SpatialPoints\")\nsg_sp <- as(sg, \"SpatialPolygons\")\n\n\nchildcare_sp\n\nclass       : SpatialPoints \nfeatures    : 1545 \nextent      : 11203.01, 45404.24, 25667.6, 49300.88  (xmin, xmax, ymin, ymax)\ncrs         : +proj=tmerc +lat_0=1.36666666666667 +lon_0=103.833333333333 +k=1 +x_0=28001.642 +y_0=38744.572 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \n\n\n\nsg_sp\n\nclass       : SpatialPolygons \nfeatures    : 60 \nextent      : 2663.926, 56047.79, 16357.98, 50244.03  (xmin, xmax, ymin, ymax)\ncrs         : +proj=tmerc +lat_0=1.36666666666667 +lon_0=103.833333333333 +k=1 +x_0=28001.642 +y_0=38744.572 +datum=WGS84 +units=m +no_defs"
  },
  {
    "objectID": "Hands-on_Ex/Hands-on_Ex03/Hands-on_Ex03.html#converting-the-generic-sp-format-into-spatstats-ppp-format",
    "href": "Hands-on_Ex/Hands-on_Ex03/Hands-on_Ex03.html#converting-the-generic-sp-format-into-spatstats-ppp-format",
    "title": "Hands-on Exercise 3",
    "section": "4.5.3 Converting the generic sp format into spatstat’s ppp format",
    "text": "4.5.3 Converting the generic sp format into spatstat’s ppp format\n\nchildcare_ppp <- as(childcare_sp, \"ppp\")\nchildcare_ppp\n\nPlanar point pattern: 1545 points\nwindow: rectangle = [11203.01, 45404.24] x [25667.6, 49300.88] units\n\n\n\nplot(childcare_ppp)\n\n\n\n\n\nsummary(childcare_ppp)\n\nPlanar point pattern:  1545 points\nAverage intensity 1.91145e-06 points per square unit\n\n*Pattern contains duplicated points*\n\nCoordinates are given to 3 decimal places\ni.e. rounded to the nearest multiple of 0.001 units\n\nWindow: rectangle = [11203.01, 45404.24] x [25667.6, 49300.88] units\n                    (34200 x 23630 units)\nWindow area = 808287000 square units"
  },
  {
    "objectID": "Hands-on_Ex/Hands-on_Ex03/Hands-on_Ex03.html#handling-duplicated-points",
    "href": "Hands-on_Ex/Hands-on_Ex03/Hands-on_Ex03.html#handling-duplicated-points",
    "title": "Hands-on Exercise 3",
    "section": "4.5.4 Handling duplicated points",
    "text": "4.5.4 Handling duplicated points\n\nany(duplicated(childcare_ppp))\n\n[1] TRUE\n\n\n\nmultiplicity(childcare_ppp)\n\n   1    2    3    4    5    6    7    8    9   10   11   12   13   14   15   16 \n   1    1    1    3    1    1    1    1    2    1    1    1    1    1    1    1 \n  17   18   19   20   21   22   23   24   25   26   27   28   29   30   31   32 \n   1    1    1    1    1    1    1    1    1    1    9    1    1    1    1    1 \n  33   34   35   36   37   38   39   40   41   42   43   44   45   46   47   48 \n   1    1    1    1    1    1    1    1    1    1    1    1    1    1    1    1 \n  49   50   51   52   53   54   55   56   57   58   59   60   61   62   63   64 \n   1    1    1    1    1    1    2    1    1    3    1    1    1    1    1    1 \n  65   66   67   68   69   70   71   72   73   74   75   76   77   78   79   80 \n   1    1    1    1    1    2    1    1    1    1    1    2    1    1    1    1 \n  81   82   83   84   85   86   87   88   89   90   91   92   93   94   95   96 \n   1    1    1    3    1    1    1    1    1    1    1    1    1    1    1    1 \n  97   98   99  100  101  102  103  104  105  106  107  108  109  110  111  112 \n   1    1    1    1    1    1    1    1    2    1    1    1    1    1    1    1 \n 113  114  115  116  117  118  119  120  121  122  123  124  125  126  127  128 \n   1    1    1    1    1    1    2    1    1    1    3    1    1    1    2    1 \n 129  130  131  132  133  134  135  136  137  138  139  140  141  142  143  144 \n   1    1    1    1    1    2    1    1    1    1    1    1    1    1    3    2 \n 145  146  147  148  149  150  151  152  153  154  155  156  157  158  159  160 \n   1    2    1    1    1    2    2    3    1    5    1    5    1    1    1    2 \n 161  162  163  164  165  166  167  168  169  170  171  172  173  174  175  176 \n   1    1    1    1    2    1    1    1    1    1    1    2    1    1    1    1 \n 177  178  179  180  181  182  183  184  185  186  187  188  189  190  191  192 \n   1    4    1    1    1    1    1    1    1    1    1    1    1    1    1    1 \n 193  194  195  196  197  198  199  200  201  202  203  204  205  206  207  208 \n   1    1    1    1    1    2    2    1    1    1    1    2    1    4    1    1 \n 209  210  211  212  213  214  215  216  217  218  219  220  221  222  223  224 \n   2    1    1    1    1    1    1    1    1    1    1    1    2    1    1    1 \n 225  226  227  228  229  230  231  232  233  234  235  236  237  238  239  240 \n   1    1    1    1    1    1    1    1    1    1    1    1    1    1    1    1 \n 241  242  243  244  245  246  247  248  249  250  251  252  253  254  255  256 \n   1    1    1    1    2    1    1    1    1    1    1    1    1    1    1    1 \n 257  258  259  260  261  262  263  264  265  266  267  268  269  270  271  272 \n   1    1    1    1    1    1    1    1    1    1    2    1    1    1    1    3 \n 273  274  275  276  277  278  279  280  281  282  283  284  285  286  287  288 \n   1    1    1    1    1    1    3    1    1    1    1    1    1    1    1    1 \n 289  290  291  292  293  294  295  296  297  298  299  300  301  302  303  304 \n   1    1    1    1    1    1    1    9    1    1    2    1    1    1    1    1 \n 305  306  307  308  309  310  311  312  313  314  315  316  317  318  319  320 \n   1    1    1    1    1    1    1    1    1    1    1    1    1    1    1    1 \n 321  322  323  324  325  326  327  328  329  330  331  332  333  334  335  336 \n   1    1    1    5    1    1    1    1    1    2    1    1    2    2    1    1 \n 337  338  339  340  341  342  343  344  345  346  347  348  349  350  351  352 \n   1    1    1    1    1    1    1    1    1    1    1    1    1    2    2    1 \n 353  354  355  356  357  358  359  360  361  362  363  364  365  366  367  368 \n   1    1    1    1    9    1    1    1    1    1    1    1    1    1    1    1 \n 369  370  371  372  373  374  375  376  377  378  379  380  381  382  383  384 \n   1    3    1    1    1    1    1    1    1    1    1    1    1    1    1    1 \n 385  386  387  388  389  390  391  392  393  394  395  396  397  398  399  400 \n   1    1    1    1    1    1    1    1    1    1    1    1    1    1    1    1 \n 401  402  403  404  405  406  407  408  409  410  411  412  413  414  415  416 \n   1    1    2    1    1    1    1    1    1    1    2    1    1    1    1    1 \n 417  418  419  420  421  422  423  424  425  426  427  428  429  430  431  432 \n   1    1    1    1    1    1    1    2    1    1    2    1    1    1    1    1 \n 433  434  435  436  437  438  439  440  441  442  443  444  445  446  447  448 \n   1    1    1    1    2    1    1    1    1    1    1    1    1    1    1    1 \n 449  450  451  452  453  454  455  456  457  458  459  460  461  462  463  464 \n   1    1    9    9    1    1    1    1    1    1    1    1    1    1    2    1 \n 465  466  467  468  469  470  471  472  473  474  475  476  477  478  479  480 \n   2    1    1    1    1    1    1    1    1    1    1    1    2    2    1    1 \n 481  482  483  484  485  486  487  488  489  490  491  492  493  494  495  496 \n   1    1    1    1    1    1    1    1    1    1    1    1    1    1    1    1 \n 497  498  499  500  501  502  503  504  505  506  507  508  509  510  511  512 \n   1    1    1    1    1    1    2    1    1    1    1    1    1    1    1    2 \n 513  514  515  516  517  518  519  520  521  522  523  524  525  526  527  528 \n   1    1    1    1    1    1    1    1    1    1    1    2    1    1    3    1 \n 529  530  531  532  533  534  535  536  537  538  539  540  541  542  543  544 \n   1    1    1    1    1    1    1    1    1    1    1    1    1    1    1    1 \n 545  546  547  548  549  550  551  552  553  554  555  556  557  558  559  560 \n   1    1    1    1    1    1    1    1    1    3    1    1    1    1    1    1 \n 561  562  563  564  565  566  567  568  569  570  571  572  573  574  575  576 \n   2    2    2    1    1    1    1    2    1    1    2    1    1    1    2    1 \n 577  578  579  580  581  582  583  584  585  586  587  588  589  590  591  592 \n   1    2    1    1    1    1    1    9    1    4    1    2    1    1    1    1 \n 593  594  595  596  597  598  599  600  601  602  603  604  605  606  607  608 \n   2    1    1    1    1    1    1    1    2    1    2    1    1    1    1    1 \n 609  610  611  612  613  614  615  616  617  618  619  620  621  622  623  624 \n   1    1    1    1    1    1    1    1    1    2    1    2    1    1    1    1 \n 625  626  627  628  629  630  631  632  633  634  635  636  637  638  639  640 \n   1    1    1    1    1    1    1    1    1    1    1    1    1    1    1    1 \n 641  642  643  644  645  646  647  648  649  650  651  652  653  654  655  656 \n   1    1    1    1    1    1    1    1    1    1    1    1    1    1    1    4 \n 657  658  659  660  661  662  663  664  665  666  667  668  669  670  671  672 \n   1    1    1    1    1    1    1    3    1    1    1    1    1    1    1    1 \n 673  674  675  676  677  678  679  680  681  682  683  684  685  686  687  688 \n   1    1    1    1    1    4    1    1    1    1    1    4    1    1    1    1 \n 689  690  691  692  693  694  695  696  697  698  699  700  701  702  703  704 \n   1    1    1    1    1    1    1    1    1    1    1    1    1    1    1    1 \n 705  706  707  708  709  710  711  712  713  714  715  716  717  718  719  720 \n   1    1    2    1    1    1    1    1    1    1    1    1    1    1    1    1 \n 721  722  723  724  725  726  727  728  729  730  731  732  733  734  735  736 \n   1    1    1    1    1    1    1    1    1    1    1    1    1    1    1    1 \n 737  738  739  740  741  742  743  744  745  746  747  748  749  750  751  752 \n   1    2    1    1    1    1    1    1    1    1    1    1    1    1    1    1 \n 753  754  755  756  757  758  759  760  761  762  763  764  765  766  767  768 \n   1    1    1    1    1    2    1    1    1    1    1    1    1    1    1    1 \n 769  770  771  772  773  774  775  776  777  778  779  780  781  782  783  784 \n   1    1    1    1    1    1    1    1    1    4    1    1    1    1    1    1 \n 785  786  787  788  789  790  791  792  793  794  795  796  797  798  799  800 \n   1    1    1    1    1    1    1    1    1    1    1    1    1    1    1    1 \n 801  802  803  804  805  806  807  808  809  810  811  812  813  814  815  816 \n   1    1    1    1    1    1    1    1    1    1    1    1    1    1    1    1 \n 817  818  819  820  821  822  823  824  825  826  827  828  829  830  831  832 \n   1    1    1    1    1    1    1    1    1    1    1    1    1    1    1    1 \n 833  834  835  836  837  838  839  840  841  842  843  844  845  846  847  848 \n   1    1    1    1    1    1    1    2    1    1    1    1    1    1    1    1 \n 849  850  851  852  853  854  855  856  857  858  859  860  861  862  863  864 \n   1    1    1    1    1    1    1    1    1    1    1    1    1    1    1    1 \n 865  866  867  868  869  870  871  872  873  874  875  876  877  878  879  880 \n   1    1    1    1    1    1    1    1    1    1    1    1    1    1    1    2 \n 881  882  883  884  885  886  887  888  889  890  891  892  893  894  895  896 \n   3    1    1    1    2    1    1    1    3    1    1    3    1    1    1    1 \n 897  898  899  900  901  902  903  904  905  906  907  908  909  910  911  912 \n   1    1    1    1    1    1    1    1    1    1    1    1    1    1    1    1 \n 913  914  915  916  917  918  919  920  921  922  923  924  925  926  927  928 \n   1    1    1    1    1    1    1    1    1    1    1    1    1    1    1    1 \n 929  930  931  932  933  934  935  936  937  938  939  940  941  942  943  944 \n   1    1    1    1    1    1    1    1    1    1    1    1    1    1    1    1 \n 945  946  947  948  949  950  951  952  953  954  955  956  957  958  959  960 \n   1    1    1    1    1    1    1    1    1    1    1    1    1    1    1    2 \n 961  962  963  964  965  966  967  968  969  970  971  972  973  974  975  976 \n   1    1    1    1    1    1    1    1    1    1    1    1    1    1    1    1 \n 977  978  979  980  981  982  983  984  985  986  987  988  989  990  991  992 \n   1    1    1    1    1    1    1    1    1    1    1    1    1    1    1    1 \n 993  994  995  996  997  998  999 1000 1001 1002 1003 1004 1005 1006 1007 1008 \n   1    1    1    1    1    1    1    1    1    1    1    1    1    1    1    1 \n1009 1010 1011 1012 1013 1014 1015 1016 1017 1018 1019 1020 1021 1022 1023 1024 \n   1    1    1    1    1    1    1    1    1    1    1    1    1    1    1    1 \n1025 1026 1027 1028 1029 1030 1031 1032 1033 1034 1035 1036 1037 1038 1039 1040 \n   1    1    1    1    1    1    1    1    1    1    1    1    1    1    1    1 \n1041 1042 1043 1044 1045 1046 1047 1048 1049 1050 1051 1052 1053 1054 1055 1056 \n   1    1    1    1    1    1    1    1    1    2    2    1    1    1    1    1 \n1057 1058 1059 1060 1061 1062 1063 1064 1065 1066 1067 1068 1069 1070 1071 1072 \n   1    1    1    1    1    1    1    1    1    1    1    1    1    1    1    1 \n1073 1074 1075 1076 1077 1078 1079 1080 1081 1082 1083 1084 1085 1086 1087 1088 \n   1    1    1    1    1    1    1    1    1    1    1    1    1    1    1    1 \n1089 1090 1091 1092 1093 1094 1095 1096 1097 1098 1099 1100 1101 1102 1103 1104 \n   1    1    1    1    1    1    1    1    1    1    1    1    1    1    1    1 \n1105 1106 1107 1108 1109 1110 1111 1112 1113 1114 1115 1116 1117 1118 1119 1120 \n   1    1    1    1    1    2    1    1    1    1    1    1    1    1    1    1 \n1121 1122 1123 1124 1125 1126 1127 1128 1129 1130 1131 1132 1133 1134 1135 1136 \n   1    1    1    1    1    1    1    1    2    2    1    1    1    5    1    1 \n1137 1138 1139 1140 1141 1142 1143 1144 1145 1146 1147 1148 1149 1150 1151 1152 \n   1    1    1    1    1    1    1    1    1    2    1    1    1    1    1    1 \n1153 1154 1155 1156 1157 1158 1159 1160 1161 1162 1163 1164 1165 1166 1167 1168 \n   1    1    1    1    1    1    1    1    1    1    2    1    1    1    1    1 \n1169 1170 1171 1172 1173 1174 1175 1176 1177 1178 1179 1180 1181 1182 1183 1184 \n   1    9    1    2    2    1    1    1    2    1    1    1    1    1    1    1 \n1185 1186 1187 1188 1189 1190 1191 1192 1193 1194 1195 1196 1197 1198 1199 1200 \n   1    1    1    1    2    1    1    1    3    1    1    1    1    1    1    1 \n1201 1202 1203 1204 1205 1206 1207 1208 1209 1210 1211 1212 1213 1214 1215 1216 \n   9    1    1    1    1    1    1    1    1    1    1    1    1    1    1    1 \n1217 1218 1219 1220 1221 1222 1223 1224 1225 1226 1227 1228 1229 1230 1231 1232 \n   1    1    1    2    1    1    1    1    1    1    1    1    1    1    1    1 \n1233 1234 1235 1236 1237 1238 1239 1240 1241 1242 1243 1244 1245 1246 1247 1248 \n   1    1    1    1    1    1    1    1    1    1    1    1    1    1    1    1 \n1249 1250 1251 1252 1253 1254 1255 1256 1257 1258 1259 1260 1261 1262 1263 1264 \n   1    1    1    1    1    1    1    1    1    1    1    1    1    1    1    1 \n1265 1266 1267 1268 1269 1270 1271 1272 1273 1274 1275 1276 1277 1278 1279 1280 \n   1    1    1    1    1    1    1    1    1    1    1    1    1    1    1    1 \n1281 1282 1283 1284 1285 1286 1287 1288 1289 1290 1291 1292 1293 1294 1295 1296 \n   1    1    1    1    1    1    1    1    1    1    1    1    1    1    1    2 \n1297 1298 1299 1300 1301 1302 1303 1304 1305 1306 1307 1308 1309 1310 1311 1312 \n   1    1    1    2    1    2    1    1    1    2    2    2    1    1    1    1 \n1313 1314 1315 1316 1317 1318 1319 1320 1321 1322 1323 1324 1325 1326 1327 1328 \n   1    1    2    1    1    1    1    1    1    1    1    1    2    1    1    1 \n1329 1330 1331 1332 1333 1334 1335 1336 1337 1338 1339 1340 1341 1342 1343 1344 \n   1    1    1    1    3    1    1    1    1    1    1    1    1    1    1    1 \n1345 1346 1347 1348 1349 1350 1351 1352 1353 1354 1355 1356 1357 1358 1359 1360 \n   1    1    1    1    1    1    1    1    4    1    1    1    1    1    2    1 \n1361 1362 1363 1364 1365 1366 1367 1368 1369 1370 1371 1372 1373 1374 1375 1376 \n   1    1    1    1    1    1    1    1    1    1    1    1    1    1    1    1 \n1377 1378 1379 1380 1381 1382 1383 1384 1385 1386 1387 1388 1389 1390 1391 1392 \n   1    1    1    1    1    1    1    1    1    9    1    1    1    1    1    1 \n1393 1394 1395 1396 1397 1398 1399 1400 1401 1402 1403 1404 1405 1406 1407 1408 \n   1    1    1    1    1    1    1    1    1    1    1    1    1    1    1    1 \n1409 1410 1411 1412 1413 1414 1415 1416 1417 1418 1419 1420 1421 1422 1423 1424 \n   1    1    1    1    1    1    1    1    1    1    1    1    1    1    1    1 \n1425 1426 1427 1428 1429 1430 1431 1432 1433 1434 1435 1436 1437 1438 1439 1440 \n   1    1    1    1    1    1    1    1    1    1    1    1    1    1    2    1 \n1441 1442 1443 1444 1445 1446 1447 1448 1449 1450 1451 1452 1453 1454 1455 1456 \n   1    2    1    1    1    1    1    1    1    1    1    1    1    1    1    1 \n1457 1458 1459 1460 1461 1462 1463 1464 1465 1466 1467 1468 1469 1470 1471 1472 \n   1    1    1    1    1    1    1    1    1    1    2    1    1    1    1    1 \n1473 1474 1475 1476 1477 1478 1479 1480 1481 1482 1483 1484 1485 1486 1487 1488 \n   1    1    1    1    1    1    2    1    1    1    1    1    1    1    1    1 \n1489 1490 1491 1492 1493 1494 1495 1496 1497 1498 1499 1500 1501 1502 1503 1504 \n   1    1    1    1    1    1    1    1    1    1    5    1    1    1    1    1 \n1505 1506 1507 1508 1509 1510 1511 1512 1513 1514 1515 1516 1517 1518 1519 1520 \n   1    1    1    1    1    1    1    1    1    1    1    1    1    1    1    1 \n1521 1522 1523 1524 1525 1526 1527 1528 1529 1530 1531 1532 1533 1534 1535 1536 \n   1    1    1    1    1    2    1    1    1    1    2    1    1    1    1    3 \n1537 1538 1539 1540 1541 1542 1543 1544 1545 \n   1    1    1    1    1    1    2    1    1 \n\n\n\nsum(multiplicity(childcare_ppp) > 1)\n\n[1] 128\n\n\n\ntmap_mode('view')\n\ntmap mode set to interactive viewing\n\ntm_shape(childcare) +\n  tm_dots(alpha=0.4, \n          size=0.05)\n\n\n\n\n\n\n\ntmap_mode('plot')\n\ntmap mode set to plotting\n\n\n\nchildcare_ppp_jit <- rjitter(childcare_ppp, \n                             retry=TRUE, \n                             nsim=1, \n                             drop=TRUE)\n\n\nany(duplicated(childcare_ppp_jit))\n\n[1] FALSE"
  },
  {
    "objectID": "Hands-on_Ex/Hands-on_Ex03/Hands-on_Ex03.html#creating-owin-object",
    "href": "Hands-on_Ex/Hands-on_Ex03/Hands-on_Ex03.html#creating-owin-object",
    "title": "Hands-on Exercise 3",
    "section": "4.5.5 Creating owin object",
    "text": "4.5.5 Creating owin object\n\nsg_owin <- as(sg_sp, \"owin\")\n\n\nplot(sg_owin)\n\n\n\n\n\nsummary(sg_owin)\n\nWindow: polygonal boundary\n60 separate polygons (no holes)\n            vertices        area relative.area\npolygon 1         38 1.56140e+04      2.09e-05\npolygon 2        735 4.69093e+06      6.27e-03\npolygon 3         49 1.66986e+04      2.23e-05\npolygon 4         76 3.12332e+05      4.17e-04\npolygon 5       5141 6.36179e+08      8.50e-01\npolygon 6         42 5.58317e+04      7.46e-05\npolygon 7         67 1.31354e+06      1.75e-03\npolygon 8         15 4.46420e+03      5.96e-06\npolygon 9         14 5.46674e+03      7.30e-06\npolygon 10        37 5.26194e+03      7.03e-06\npolygon 11        53 3.44003e+04      4.59e-05\npolygon 12        74 5.82234e+04      7.78e-05\npolygon 13        69 5.63134e+04      7.52e-05\npolygon 14       143 1.45139e+05      1.94e-04\npolygon 15       165 3.38736e+05      4.52e-04\npolygon 16       130 9.40465e+04      1.26e-04\npolygon 17        19 1.80977e+03      2.42e-06\npolygon 18        16 2.01046e+03      2.69e-06\npolygon 19        93 4.30642e+05      5.75e-04\npolygon 20        90 4.15092e+05      5.54e-04\npolygon 21       721 1.92795e+06      2.57e-03\npolygon 22       330 1.11896e+06      1.49e-03\npolygon 23       115 9.28394e+05      1.24e-03\npolygon 24        37 1.01705e+04      1.36e-05\npolygon 25        25 1.66227e+04      2.22e-05\npolygon 26        10 2.14507e+03      2.86e-06\npolygon 27       190 2.02489e+05      2.70e-04\npolygon 28       175 9.25904e+05      1.24e-03\npolygon 29      1993 9.99217e+06      1.33e-02\npolygon 30        38 2.42492e+04      3.24e-05\npolygon 31        24 6.35239e+03      8.48e-06\npolygon 32        53 6.35791e+05      8.49e-04\npolygon 33        41 1.60161e+04      2.14e-05\npolygon 34        22 2.54368e+03      3.40e-06\npolygon 35        30 1.08382e+04      1.45e-05\npolygon 36       327 2.16921e+06      2.90e-03\npolygon 37       111 6.62927e+05      8.85e-04\npolygon 38        90 1.15991e+05      1.55e-04\npolygon 39        98 6.26829e+04      8.37e-05\npolygon 40       415 3.25384e+06      4.35e-03\npolygon 41       222 1.51142e+06      2.02e-03\npolygon 42       107 6.33039e+05      8.45e-04\npolygon 43         7 2.48299e+03      3.32e-06\npolygon 44        17 3.28303e+04      4.38e-05\npolygon 45        26 8.34758e+03      1.11e-05\npolygon 46       177 4.67446e+05      6.24e-04\npolygon 47        16 3.19460e+03      4.27e-06\npolygon 48        15 4.87296e+03      6.51e-06\npolygon 49        66 1.61841e+04      2.16e-05\npolygon 50       149 5.63430e+06      7.53e-03\npolygon 51       609 2.62570e+07      3.51e-02\npolygon 52         8 7.82256e+03      1.04e-05\npolygon 53       976 2.33447e+07      3.12e-02\npolygon 54        55 8.25379e+04      1.10e-04\npolygon 55       976 2.33447e+07      3.12e-02\npolygon 56        61 3.33449e+05      4.45e-04\npolygon 57         6 1.68410e+04      2.25e-05\npolygon 58         4 9.45963e+03      1.26e-05\npolygon 59        46 6.99702e+05      9.35e-04\npolygon 60        13 7.00873e+04      9.36e-05\nenclosing rectangle: [2663.93, 56047.79] x [16357.98, 50244.03] units\n                     (53380 x 33890 units)\nWindow area = 748741000 square units\nFraction of frame area: 0.414"
  },
  {
    "objectID": "Hands-on_Ex/Hands-on_Ex03/Hands-on_Ex03.html#combining-point-events-object-and-owin-object",
    "href": "Hands-on_Ex/Hands-on_Ex03/Hands-on_Ex03.html#combining-point-events-object-and-owin-object",
    "title": "Hands-on Exercise 3",
    "section": "4.5.6 Combining point events object and owin object",
    "text": "4.5.6 Combining point events object and owin object\n\nchildcareSG_ppp = childcare_ppp[sg_owin]\n\n\nsummary(childcareSG_ppp)\n\nPlanar point pattern:  1545 points\nAverage intensity 2.063463e-06 points per square unit\n\n*Pattern contains duplicated points*\n\nCoordinates are given to 3 decimal places\ni.e. rounded to the nearest multiple of 0.001 units\n\nWindow: polygonal boundary\n60 separate polygons (no holes)\n            vertices        area relative.area\npolygon 1         38 1.56140e+04      2.09e-05\npolygon 2        735 4.69093e+06      6.27e-03\npolygon 3         49 1.66986e+04      2.23e-05\npolygon 4         76 3.12332e+05      4.17e-04\npolygon 5       5141 6.36179e+08      8.50e-01\npolygon 6         42 5.58317e+04      7.46e-05\npolygon 7         67 1.31354e+06      1.75e-03\npolygon 8         15 4.46420e+03      5.96e-06\npolygon 9         14 5.46674e+03      7.30e-06\npolygon 10        37 5.26194e+03      7.03e-06\npolygon 11        53 3.44003e+04      4.59e-05\npolygon 12        74 5.82234e+04      7.78e-05\npolygon 13        69 5.63134e+04      7.52e-05\npolygon 14       143 1.45139e+05      1.94e-04\npolygon 15       165 3.38736e+05      4.52e-04\npolygon 16       130 9.40465e+04      1.26e-04\npolygon 17        19 1.80977e+03      2.42e-06\npolygon 18        16 2.01046e+03      2.69e-06\npolygon 19        93 4.30642e+05      5.75e-04\npolygon 20        90 4.15092e+05      5.54e-04\npolygon 21       721 1.92795e+06      2.57e-03\npolygon 22       330 1.11896e+06      1.49e-03\npolygon 23       115 9.28394e+05      1.24e-03\npolygon 24        37 1.01705e+04      1.36e-05\npolygon 25        25 1.66227e+04      2.22e-05\npolygon 26        10 2.14507e+03      2.86e-06\npolygon 27       190 2.02489e+05      2.70e-04\npolygon 28       175 9.25904e+05      1.24e-03\npolygon 29      1993 9.99217e+06      1.33e-02\npolygon 30        38 2.42492e+04      3.24e-05\npolygon 31        24 6.35239e+03      8.48e-06\npolygon 32        53 6.35791e+05      8.49e-04\npolygon 33        41 1.60161e+04      2.14e-05\npolygon 34        22 2.54368e+03      3.40e-06\npolygon 35        30 1.08382e+04      1.45e-05\npolygon 36       327 2.16921e+06      2.90e-03\npolygon 37       111 6.62927e+05      8.85e-04\npolygon 38        90 1.15991e+05      1.55e-04\npolygon 39        98 6.26829e+04      8.37e-05\npolygon 40       415 3.25384e+06      4.35e-03\npolygon 41       222 1.51142e+06      2.02e-03\npolygon 42       107 6.33039e+05      8.45e-04\npolygon 43         7 2.48299e+03      3.32e-06\npolygon 44        17 3.28303e+04      4.38e-05\npolygon 45        26 8.34758e+03      1.11e-05\npolygon 46       177 4.67446e+05      6.24e-04\npolygon 47        16 3.19460e+03      4.27e-06\npolygon 48        15 4.87296e+03      6.51e-06\npolygon 49        66 1.61841e+04      2.16e-05\npolygon 50       149 5.63430e+06      7.53e-03\npolygon 51       609 2.62570e+07      3.51e-02\npolygon 52         8 7.82256e+03      1.04e-05\npolygon 53       976 2.33447e+07      3.12e-02\npolygon 54        55 8.25379e+04      1.10e-04\npolygon 55       976 2.33447e+07      3.12e-02\npolygon 56        61 3.33449e+05      4.45e-04\npolygon 57         6 1.68410e+04      2.25e-05\npolygon 58         4 9.45963e+03      1.26e-05\npolygon 59        46 6.99702e+05      9.35e-04\npolygon 60        13 7.00873e+04      9.36e-05\nenclosing rectangle: [2663.93, 56047.79] x [16357.98, 50244.03] units\n                     (53380 x 33890 units)\nWindow area = 748741000 square units\nFraction of frame area: 0.414"
  },
  {
    "objectID": "Hands-on_Ex/Hands-on_Ex03/Hands-on_Ex03.html#kernel-density-estimation",
    "href": "Hands-on_Ex/Hands-on_Ex03/Hands-on_Ex03.html#kernel-density-estimation",
    "title": "Hands-on Exercise 3",
    "section": "4.6.1 Kernel Density Estimation",
    "text": "4.6.1 Kernel Density Estimation"
  },
  {
    "objectID": "Hands-on_Ex/Hands-on_Ex03/Hands-on_Ex03.html#computing-kernel-density-estimation-using-automatic-bandwidth-selection-method",
    "href": "Hands-on_Ex/Hands-on_Ex03/Hands-on_Ex03.html#computing-kernel-density-estimation-using-automatic-bandwidth-selection-method",
    "title": "Hands-on Exercise 3",
    "section": "4.6.1.1 Computing kernel density estimation using automatic bandwidth selection method",
    "text": "4.6.1.1 Computing kernel density estimation using automatic bandwidth selection method\n\nkde_childcareSG_bw <- density(childcareSG_ppp,\n                              sigma=bw.diggle,\n                              edge=TRUE,\n                            kernel=\"gaussian\") \n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\n\n\nplot(kde_childcareSG_bw)\n\n\n\n\n\nbw <- bw.diggle(childcareSG_ppp)\nbw\n\n   sigma \n298.4095"
  },
  {
    "objectID": "Hands-on_Ex/Hands-on_Ex03/Hands-on_Ex03.html#rescalling-kde-values",
    "href": "Hands-on_Ex/Hands-on_Ex03/Hands-on_Ex03.html#rescalling-kde-values",
    "title": "Hands-on Exercise 3",
    "section": "4.6.1.2 Rescalling KDE values",
    "text": "4.6.1.2 Rescalling KDE values\n\nchildcareSG_ppp.km <- rescale(childcareSG_ppp, 1000, \"km\")\n\n\nkde_childcareSG.bw <- density(childcareSG_ppp.km, sigma=bw.diggle, edge=TRUE, kernel=\"gaussian\")\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nplot(kde_childcareSG.bw)"
  },
  {
    "objectID": "Hands-on_Ex/Hands-on_Ex03/Hands-on_Ex03.html#working-with-different-automatic-badwidth-methods",
    "href": "Hands-on_Ex/Hands-on_Ex03/Hands-on_Ex03.html#working-with-different-automatic-badwidth-methods",
    "title": "Hands-on Exercise 3",
    "section": "4.6.2 Working with different automatic badwidth methods",
    "text": "4.6.2 Working with different automatic badwidth methods\n\n bw.CvL(childcareSG_ppp.km)\n\n   sigma \n4.543278 \n\n\n\nbw.scott(childcareSG_ppp.km)\n\n sigma.x  sigma.y \n2.224898 1.450966 \n\n\n\nbw.ppl(childcareSG_ppp.km)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\n\n    sigma \n0.3897114 \n\n\n\nbw.diggle(childcareSG_ppp.km)\n\n    sigma \n0.2984095 \n\n\n\nkde_childcareSG.ppl <- density(childcareSG_ppp.km, \n                               sigma=bw.ppl, \n                               edge=TRUE,\n                               kernel=\"gaussian\")\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\npar(mfrow=c(1,2))\nplot(kde_childcareSG.bw, main = \"bw.diggle\")\nplot(kde_childcareSG.ppl, main = \"bw.ppl\")"
  },
  {
    "objectID": "Hands-on_Ex/Hands-on_Ex03/Hands-on_Ex03.html#working-with-different-kernel-methods",
    "href": "Hands-on_Ex/Hands-on_Ex03/Hands-on_Ex03.html#working-with-different-kernel-methods",
    "title": "Hands-on Exercise 3",
    "section": "4.6.3 Working with different kernel methods",
    "text": "4.6.3 Working with different kernel methods\n\npar(mfrow=c(2,2))\nplot(density(childcareSG_ppp.km, \n             sigma=bw.ppl, \n             edge=TRUE, \n             kernel=\"gaussian\"), \n     main=\"Gaussian\")\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nplot(density(childcareSG_ppp.km, \n             sigma=bw.ppl, \n             edge=TRUE, \n             kernel=\"epanechnikov\"), \n     main=\"Epanechnikov\")\n\nWarning in density.ppp(childcareSG_ppp.km, sigma = bw.ppl, edge = TRUE, :\nBandwidth selection will be based on Gaussian kernel\n\nWarning in density.ppp(childcareSG_ppp.km, sigma = bw.ppl, edge = TRUE, : point-\nin-polygon test had difficulty with 215 points (total score not 0 or 1)\n\nWarning in density.ppp(childcareSG_ppp.km, sigma = bw.ppl, edge = TRUE, : point-\nin-polygon test had difficulty with 215 points (total score not 0 or 1)\n\nWarning in density.ppp(childcareSG_ppp.km, sigma = bw.ppl, edge = TRUE, : point-\nin-polygon test had difficulty with 215 points (total score not 0 or 1)\n\nWarning in density.ppp(childcareSG_ppp.km, sigma = bw.ppl, edge = TRUE, : point-\nin-polygon test had difficulty with 215 points (total score not 0 or 1)\n\nWarning in density.ppp(childcareSG_ppp.km, sigma = bw.ppl, edge = TRUE, : point-\nin-polygon test had difficulty with 215 points (total score not 0 or 1)\n\nWarning in density.ppp(childcareSG_ppp.km, sigma = bw.ppl, edge = TRUE, : point-\nin-polygon test had difficulty with 215 points (total score not 0 or 1)\n\nWarning in density.ppp(childcareSG_ppp.km, sigma = bw.ppl, edge = TRUE, : point-\nin-polygon test had difficulty with 215 points (total score not 0 or 1)\n\nWarning in density.ppp(childcareSG_ppp.km, sigma = bw.ppl, edge = TRUE, : point-\nin-polygon test had difficulty with 215 points (total score not 0 or 1)\n\nWarning in density.ppp(childcareSG_ppp.km, sigma = bw.ppl, edge = TRUE, : point-\nin-polygon test had difficulty with 215 points (total score not 0 or 1)\n\nWarning in density.ppp(childcareSG_ppp.km, sigma = bw.ppl, edge = TRUE, : point-\nin-polygon test had difficulty with 215 points (total score not 0 or 1)\n\nWarning in density.ppp(childcareSG_ppp.km, sigma = bw.ppl, edge = TRUE, : point-\nin-polygon test had difficulty with 215 points (total score not 0 or 1)\n\nWarning in density.ppp(childcareSG_ppp.km, sigma = bw.ppl, edge = TRUE, : point-\nin-polygon test had difficulty with 215 points (total score not 0 or 1)\n\nWarning in density.ppp(childcareSG_ppp.km, sigma = bw.ppl, edge = TRUE, : point-\nin-polygon test had difficulty with 215 points (total score not 0 or 1)\n\nWarning in density.ppp(childcareSG_ppp.km, sigma = bw.ppl, edge = TRUE, : point-\nin-polygon test had difficulty with 215 points (total score not 0 or 1)\n\nWarning in density.ppp(childcareSG_ppp.km, sigma = bw.ppl, edge = TRUE, : point-\nin-polygon test had difficulty with 215 points (total score not 0 or 1)\n\nWarning in density.ppp(childcareSG_ppp.km, sigma = bw.ppl, edge = TRUE, : point-\nin-polygon test had difficulty with 215 points (total score not 0 or 1)\n\nWarning in density.ppp(childcareSG_ppp.km, sigma = bw.ppl, edge = TRUE, : point-\nin-polygon test had difficulty with 215 points (total score not 0 or 1)\n\nplot(density(childcareSG_ppp.km, \n             sigma=bw.ppl, \n             edge=TRUE, \n             kernel=\"quartic\"), \n     main=\"Quartic\")\n\nWarning in density.ppp(childcareSG_ppp.km, sigma = bw.ppl, edge = TRUE, :\nBandwidth selection will be based on Gaussian kernel\n\nWarning in density.ppp(childcareSG_ppp.km, sigma = bw.ppl, edge = TRUE, : point-\nin-polygon test had difficulty with 215 points (total score not 0 or 1)\n\nWarning in density.ppp(childcareSG_ppp.km, sigma = bw.ppl, edge = TRUE, : point-\nin-polygon test had difficulty with 215 points (total score not 0 or 1)\n\nWarning in density.ppp(childcareSG_ppp.km, sigma = bw.ppl, edge = TRUE, : point-\nin-polygon test had difficulty with 215 points (total score not 0 or 1)\n\nWarning in density.ppp(childcareSG_ppp.km, sigma = bw.ppl, edge = TRUE, : point-\nin-polygon test had difficulty with 215 points (total score not 0 or 1)\n\nWarning in density.ppp(childcareSG_ppp.km, sigma = bw.ppl, edge = TRUE, : point-\nin-polygon test had difficulty with 215 points (total score not 0 or 1)\n\nWarning in density.ppp(childcareSG_ppp.km, sigma = bw.ppl, edge = TRUE, : point-\nin-polygon test had difficulty with 215 points (total score not 0 or 1)\n\nWarning in density.ppp(childcareSG_ppp.km, sigma = bw.ppl, edge = TRUE, : point-\nin-polygon test had difficulty with 215 points (total score not 0 or 1)\n\nWarning in density.ppp(childcareSG_ppp.km, sigma = bw.ppl, edge = TRUE, : point-\nin-polygon test had difficulty with 215 points (total score not 0 or 1)\n\nWarning in density.ppp(childcareSG_ppp.km, sigma = bw.ppl, edge = TRUE, : point-\nin-polygon test had difficulty with 215 points (total score not 0 or 1)\n\nWarning in density.ppp(childcareSG_ppp.km, sigma = bw.ppl, edge = TRUE, : point-\nin-polygon test had difficulty with 215 points (total score not 0 or 1)\n\nWarning in density.ppp(childcareSG_ppp.km, sigma = bw.ppl, edge = TRUE, : point-\nin-polygon test had difficulty with 215 points (total score not 0 or 1)\n\nWarning in density.ppp(childcareSG_ppp.km, sigma = bw.ppl, edge = TRUE, : point-\nin-polygon test had difficulty with 215 points (total score not 0 or 1)\n\nWarning in density.ppp(childcareSG_ppp.km, sigma = bw.ppl, edge = TRUE, : point-\nin-polygon test had difficulty with 215 points (total score not 0 or 1)\n\nWarning in density.ppp(childcareSG_ppp.km, sigma = bw.ppl, edge = TRUE, : point-\nin-polygon test had difficulty with 215 points (total score not 0 or 1)\n\nWarning in density.ppp(childcareSG_ppp.km, sigma = bw.ppl, edge = TRUE, : point-\nin-polygon test had difficulty with 215 points (total score not 0 or 1)\n\nWarning in density.ppp(childcareSG_ppp.km, sigma = bw.ppl, edge = TRUE, : point-\nin-polygon test had difficulty with 215 points (total score not 0 or 1)\n\nWarning in density.ppp(childcareSG_ppp.km, sigma = bw.ppl, edge = TRUE, : point-\nin-polygon test had difficulty with 215 points (total score not 0 or 1)\n\nplot(density(childcareSG_ppp.km, \n             sigma=bw.ppl, \n             edge=TRUE, \n             kernel=\"disc\"), \n     main=\"Disc\")\n\nWarning in density.ppp(childcareSG_ppp.km, sigma = bw.ppl, edge = TRUE, :\nBandwidth selection will be based on Gaussian kernel\n\nWarning in density.ppp(childcareSG_ppp.km, sigma = bw.ppl, edge = TRUE, : point-\nin-polygon test had difficulty with 215 points (total score not 0 or 1)\n\nWarning in density.ppp(childcareSG_ppp.km, sigma = bw.ppl, edge = TRUE, : point-\nin-polygon test had difficulty with 215 points (total score not 0 or 1)\n\nWarning in density.ppp(childcareSG_ppp.km, sigma = bw.ppl, edge = TRUE, : point-\nin-polygon test had difficulty with 215 points (total score not 0 or 1)\n\nWarning in density.ppp(childcareSG_ppp.km, sigma = bw.ppl, edge = TRUE, : point-\nin-polygon test had difficulty with 215 points (total score not 0 or 1)\n\nWarning in density.ppp(childcareSG_ppp.km, sigma = bw.ppl, edge = TRUE, : point-\nin-polygon test had difficulty with 215 points (total score not 0 or 1)\n\nWarning in density.ppp(childcareSG_ppp.km, sigma = bw.ppl, edge = TRUE, : point-\nin-polygon test had difficulty with 215 points (total score not 0 or 1)\n\nWarning in density.ppp(childcareSG_ppp.km, sigma = bw.ppl, edge = TRUE, : point-\nin-polygon test had difficulty with 215 points (total score not 0 or 1)\n\nWarning in density.ppp(childcareSG_ppp.km, sigma = bw.ppl, edge = TRUE, : point-\nin-polygon test had difficulty with 215 points (total score not 0 or 1)\n\nWarning in density.ppp(childcareSG_ppp.km, sigma = bw.ppl, edge = TRUE, : point-\nin-polygon test had difficulty with 215 points (total score not 0 or 1)\n\nWarning in density.ppp(childcareSG_ppp.km, sigma = bw.ppl, edge = TRUE, : point-\nin-polygon test had difficulty with 215 points (total score not 0 or 1)\n\nWarning in density.ppp(childcareSG_ppp.km, sigma = bw.ppl, edge = TRUE, : point-\nin-polygon test had difficulty with 215 points (total score not 0 or 1)\n\nWarning in density.ppp(childcareSG_ppp.km, sigma = bw.ppl, edge = TRUE, : point-\nin-polygon test had difficulty with 215 points (total score not 0 or 1)\n\nWarning in density.ppp(childcareSG_ppp.km, sigma = bw.ppl, edge = TRUE, : point-\nin-polygon test had difficulty with 215 points (total score not 0 or 1)\n\nWarning in density.ppp(childcareSG_ppp.km, sigma = bw.ppl, edge = TRUE, : point-\nin-polygon test had difficulty with 215 points (total score not 0 or 1)\n\nWarning in density.ppp(childcareSG_ppp.km, sigma = bw.ppl, edge = TRUE, : point-\nin-polygon test had difficulty with 215 points (total score not 0 or 1)\n\nWarning in density.ppp(childcareSG_ppp.km, sigma = bw.ppl, edge = TRUE, : point-\nin-polygon test had difficulty with 215 points (total score not 0 or 1)\n\nWarning in density.ppp(childcareSG_ppp.km, sigma = bw.ppl, edge = TRUE, : point-\nin-polygon test had difficulty with 215 points (total score not 0 or 1)"
  },
  {
    "objectID": "Hands-on_Ex/Hands-on_Ex03/Hands-on_Ex03.html#computing-kde-by-using-fixed-bandwidth",
    "href": "Hands-on_Ex/Hands-on_Ex03/Hands-on_Ex03.html#computing-kde-by-using-fixed-bandwidth",
    "title": "Hands-on Exercise 3",
    "section": "4.7.1 Computing KDE by using fixed bandwidth",
    "text": "4.7.1 Computing KDE by using fixed bandwidth\n\nkde_childcareSG_600 <- density(childcareSG_ppp.km, sigma=0.6, edge=TRUE, kernel=\"gaussian\")\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nplot(kde_childcareSG_600)"
  },
  {
    "objectID": "Hands-on_Ex/Hands-on_Ex03/Hands-on_Ex03.html#computing-kde-by-using-adaptive-bandwidth",
    "href": "Hands-on_Ex/Hands-on_Ex03/Hands-on_Ex03.html#computing-kde-by-using-adaptive-bandwidth",
    "title": "Hands-on Exercise 3",
    "section": "4.7.2 Computing KDE by using adaptive bandwidth",
    "text": "4.7.2 Computing KDE by using adaptive bandwidth\n\nkde_childcareSG_adaptive <- adaptive.density(childcareSG_ppp.km, method=\"kernel\")\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 215 points (total score not 0\nor 1)\n\nplot(kde_childcareSG_adaptive)\n\n\n\n\n\npar(mfrow=c(1,2))\nplot(kde_childcareSG.bw, main = \"Fixed bandwidth\")\nplot(kde_childcareSG_adaptive, main = \"Adaptive bandwidth\")"
  },
  {
    "objectID": "Hands-on_Ex/Hands-on_Ex03/Hands-on_Ex03.html#converting-kde-output-into-grid-object.",
    "href": "Hands-on_Ex/Hands-on_Ex03/Hands-on_Ex03.html#converting-kde-output-into-grid-object.",
    "title": "Hands-on Exercise 3",
    "section": "4.7.3 Converting KDE output into grid object.",
    "text": "4.7.3 Converting KDE output into grid object.\n\ngridded_kde_childcareSG_bw <- as.SpatialGridDataFrame.im(kde_childcareSG.bw)\nspplot(gridded_kde_childcareSG_bw)"
  },
  {
    "objectID": "Hands-on_Ex/Hands-on_Ex03/Hands-on_Ex03.html#converting-gridded-output-into-raster",
    "href": "Hands-on_Ex/Hands-on_Ex03/Hands-on_Ex03.html#converting-gridded-output-into-raster",
    "title": "Hands-on Exercise 3",
    "section": "4.7.3.1 Converting gridded output into raster",
    "text": "4.7.3.1 Converting gridded output into raster\n\nkde_childcareSG_bw_raster <- raster(gridded_kde_childcareSG_bw)\n\n\nkde_childcareSG_bw_raster\n\nclass      : RasterLayer \ndimensions : 128, 128, 16384  (nrow, ncol, ncell)\nresolution : 0.4170614, 0.2647348  (x, y)\nextent     : 2.663926, 56.04779, 16.35798, 50.24403  (xmin, xmax, ymin, ymax)\ncrs        : NA \nsource     : memory\nnames      : v \nvalues     : -1.005814e-14, 28.51831  (min, max)"
  },
  {
    "objectID": "Hands-on_Ex/Hands-on_Ex03/Hands-on_Ex03.html#assigning-projection-systems",
    "href": "Hands-on_Ex/Hands-on_Ex03/Hands-on_Ex03.html#assigning-projection-systems",
    "title": "Hands-on Exercise 3",
    "section": "4.7.3.2 Assigning projection systems",
    "text": "4.7.3.2 Assigning projection systems\n\nprojection(kde_childcareSG_bw_raster) <- CRS(\"+init=EPSG:3414\")\nkde_childcareSG_bw_raster\n\nclass      : RasterLayer \ndimensions : 128, 128, 16384  (nrow, ncol, ncell)\nresolution : 0.4170614, 0.2647348  (x, y)\nextent     : 2.663926, 56.04779, 16.35798, 50.24403  (xmin, xmax, ymin, ymax)\ncrs        : +proj=tmerc +lat_0=1.36666666666667 +lon_0=103.833333333333 +k=1 +x_0=28001.642 +y_0=38744.572 +ellps=WGS84 +units=m +no_defs \nsource     : memory\nnames      : v \nvalues     : -1.005814e-14, 28.51831  (min, max)"
  },
  {
    "objectID": "Hands-on_Ex/Hands-on_Ex03/Hands-on_Ex03.html#visualising-the-output-in-tmap",
    "href": "Hands-on_Ex/Hands-on_Ex03/Hands-on_Ex03.html#visualising-the-output-in-tmap",
    "title": "Hands-on Exercise 3",
    "section": "4.7.4 Visualising the output in tmap",
    "text": "4.7.4 Visualising the output in tmap\n\ntm_shape(kde_childcareSG_bw_raster) + \n  tm_raster(\"v\") +\n  tm_layout(legend.position = c(\"right\", \"bottom\"), frame = FALSE)\n\nVariable(s) \"v\" contains positive and negative values, so midpoint is set to 0. Set midpoint = NA to show the full spectrum of the color palette."
  },
  {
    "objectID": "Hands-on_Ex/Hands-on_Ex03/Hands-on_Ex03.html#comparing-spatial-point-patterns-using-kde",
    "href": "Hands-on_Ex/Hands-on_Ex03/Hands-on_Ex03.html#comparing-spatial-point-patterns-using-kde",
    "title": "Hands-on Exercise 3",
    "section": "4.7.5 Comparing Spatial Point Patterns using KDE",
    "text": "4.7.5 Comparing Spatial Point Patterns using KDE"
  },
  {
    "objectID": "Hands-on_Ex/Hands-on_Ex03/Hands-on_Ex03.html#extracting-study-area",
    "href": "Hands-on_Ex/Hands-on_Ex03/Hands-on_Ex03.html#extracting-study-area",
    "title": "Hands-on Exercise 3",
    "section": "4.7.5.1 Extracting study area",
    "text": "4.7.5.1 Extracting study area\n\npg = mpsz[mpsz@data$PLN_AREA_N == \"PUNGGOL\",]\ntm = mpsz[mpsz@data$PLN_AREA_N == \"TAMPINES\",]\nck = mpsz[mpsz@data$PLN_AREA_N == \"CHOA CHU KANG\",]\njw = mpsz[mpsz@data$PLN_AREA_N == \"JURONG WEST\",]\n\n\npar(mfrow=c(2,2))\nplot(pg, main = \"Ponggol\")\nplot(tm, main = \"Tampines\")\nplot(ck, main = \"Choa Chu Kang\")\nplot(jw, main = \"Jurong West\")"
  },
  {
    "objectID": "Hands-on_Ex/Hands-on_Ex03/Hands-on_Ex03.html#converting-the-spatial-point-data-frame-into-generic-sp-format",
    "href": "Hands-on_Ex/Hands-on_Ex03/Hands-on_Ex03.html#converting-the-spatial-point-data-frame-into-generic-sp-format",
    "title": "Hands-on Exercise 3",
    "section": "4.7.5.2 Converting the spatial point data frame into generic sp format",
    "text": "4.7.5.2 Converting the spatial point data frame into generic sp format\n\npg_sp = as(pg, \"SpatialPolygons\")\ntm_sp = as(tm, \"SpatialPolygons\")\nck_sp = as(ck, \"SpatialPolygons\")\njw_sp = as(jw, \"SpatialPolygons\")"
  },
  {
    "objectID": "Hands-on_Ex/Hands-on_Ex03/Hands-on_Ex03.html#creating-owin-object-1",
    "href": "Hands-on_Ex/Hands-on_Ex03/Hands-on_Ex03.html#creating-owin-object-1",
    "title": "Hands-on Exercise 3",
    "section": "4.7.5.3 Creating owin object",
    "text": "4.7.5.3 Creating owin object\n\npg_owin = as(pg_sp, \"owin\")\ntm_owin = as(tm_sp, \"owin\")\nck_owin = as(ck_sp, \"owin\")\njw_owin = as(jw_sp, \"owin\")"
  },
  {
    "objectID": "Hands-on_Ex/Hands-on_Ex03/Hands-on_Ex03.html#combining-childcare-points-and-the-study-area",
    "href": "Hands-on_Ex/Hands-on_Ex03/Hands-on_Ex03.html#combining-childcare-points-and-the-study-area",
    "title": "Hands-on Exercise 3",
    "section": "4.7.5.4 Combining childcare points and the study area",
    "text": "4.7.5.4 Combining childcare points and the study area\n\nchildcare_pg_ppp = childcare_ppp_jit[pg_owin]\nchildcare_tm_ppp = childcare_ppp_jit[tm_owin]\nchildcare_ck_ppp = childcare_ppp_jit[ck_owin]\nchildcare_jw_ppp = childcare_ppp_jit[jw_owin]\n\n\nchildcare_pg_ppp.km = rescale(childcare_pg_ppp, 1000, \"km\")\nchildcare_tm_ppp.km = rescale(childcare_tm_ppp, 1000, \"km\")\nchildcare_ck_ppp.km = rescale(childcare_ck_ppp, 1000, \"km\")\nchildcare_jw_ppp.km = rescale(childcare_jw_ppp, 1000, \"km\")\n\n\npar(mfrow=c(2,2))\nplot(childcare_pg_ppp.km, main=\"Punggol\")\nplot(childcare_tm_ppp.km, main=\"Tampines\")\nplot(childcare_ck_ppp.km, main=\"Choa Chu Kang\")\nplot(childcare_jw_ppp.km, main=\"Jurong West\")"
  },
  {
    "objectID": "Hands-on_Ex/Hands-on_Ex03/Hands-on_Ex03.html#computing-kde",
    "href": "Hands-on_Ex/Hands-on_Ex03/Hands-on_Ex03.html#computing-kde",
    "title": "Hands-on Exercise 3",
    "section": "4.7.5.5 Computing KDE",
    "text": "4.7.5.5 Computing KDE\n\npar(mfrow=c(2,2))\nplot(density(childcare_pg_ppp.km, \n             sigma=bw.diggle, \n             edge=TRUE, \n             kernel=\"gaussian\"),\n     main=\"Punggol\")\n\nWarning: Berman-Diggle Cross-Validation criterion was minimised at right-hand\nend of interval [0, 0.245]; use argument 'hmax' to specify a wider interval for\nbandwidth 'sigma'\n\nplot(density(childcare_tm_ppp.km, \n             sigma=bw.diggle, \n             edge=TRUE, \n             kernel=\"gaussian\"),\n     main=\"Tempines\")\nplot(density(childcare_ck_ppp.km, \n             sigma=bw.diggle, \n             edge=TRUE, \n             kernel=\"gaussian\"),\n     main=\"Choa Chu Kang\")\nplot(density(childcare_jw_ppp.km, \n             sigma=bw.diggle, \n             edge=TRUE, \n             kernel=\"gaussian\"),\n     main=\"JUrong West\")"
  },
  {
    "objectID": "Hands-on_Ex/Hands-on_Ex03/Hands-on_Ex03.html#computing-fixed-bandwidth-kde",
    "href": "Hands-on_Ex/Hands-on_Ex03/Hands-on_Ex03.html#computing-fixed-bandwidth-kde",
    "title": "Hands-on Exercise 3",
    "section": "4.7.5.6 Computing fixed bandwidth KDE",
    "text": "4.7.5.6 Computing fixed bandwidth KDE\n\npar(mfrow=c(2,2))\nplot(density(childcare_ck_ppp.km, \n             sigma=0.25, \n             edge=TRUE, \n             kernel=\"gaussian\"),\n     main=\"Chou Chu Kang\")\nplot(density(childcare_jw_ppp.km, \n             sigma=0.25, \n             edge=TRUE, \n             kernel=\"gaussian\"),\n     main=\"JUrong West\")\nplot(density(childcare_pg_ppp.km, \n             sigma=0.25, \n             edge=TRUE, \n             kernel=\"gaussian\"),\n     main=\"Punggol\")\nplot(density(childcare_tm_ppp.km, \n             sigma=0.25, \n             edge=TRUE, \n             kernel=\"gaussian\"),\n     main=\"Tampines\")"
  },
  {
    "objectID": "Hands-on_Ex/Hands-on_Ex03/Hands-on_Ex03.html#testing-spatial-point-patterns-using-clark-and-evans-test",
    "href": "Hands-on_Ex/Hands-on_Ex03/Hands-on_Ex03.html#testing-spatial-point-patterns-using-clark-and-evans-test",
    "title": "Hands-on Exercise 3",
    "section": "4.8.1 Testing spatial point patterns using Clark and Evans Test",
    "text": "4.8.1 Testing spatial point patterns using Clark and Evans Test\n\nclarkevans.test(childcareSG_ppp,\n                correction=\"none\",\n                clipregion=\"sg_owin\",\n                alternative=c(\"clustered\"),\n                nsim=99)\n\nWarning: point-in-polygon test had difficulty with 19 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 25 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 25 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 16 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 14 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 22 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 25 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 22 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 22 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 24 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 12 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 25 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 20 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 21 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 11 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 18 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 33 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 19 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 26 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 27 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 20 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 17 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 12 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 25 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 18 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 23 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 23 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 23 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 16 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 22 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 20 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 21 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 19 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 13 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 24 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 22 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 12 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 22 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 13 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 13 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 19 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 14 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 21 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 17 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 17 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 24 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 25 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 16 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 20 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 21 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 22 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 7 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 29 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 20 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 16 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 16 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 19 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 19 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 19 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 21 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 20 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 22 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 16 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 25 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 17 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 22 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 22 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 22 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 19 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 25 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 15 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 17 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 28 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 23 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 16 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 17 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 18 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 21 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 27 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 17 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 26 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 23 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 18 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 26 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 14 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 34 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 20 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 15 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 22 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 20 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 21 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 12 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 17 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 19 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 27 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 15 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 18 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 18 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 20 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 29 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 17 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 22 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 25 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 25 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 20 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 15 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 16 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 19 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 19 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 29 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 16 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 23 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 18 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 22 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 21 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 13 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 20 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 28 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 25 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 22 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 19 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 21 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 24 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 25 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 27 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 24 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 20 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 23 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 15 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 22 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 12 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 29 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 16 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 20 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 18 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 21 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 17 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 20 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 17 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 16 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 23 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 17 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 17 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 13 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 23 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 13 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 33 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 23 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 18 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 16 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 23 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 21 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 30 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 20 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 20 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 27 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 14 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 16 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 16 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 15 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 21 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 28 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 26 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 23 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 19 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 21 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 20 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 18 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 14 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 22 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 16 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 22 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 16 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 16 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 18 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 17 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 19 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 16 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 22 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 24 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 12 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 18 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 31 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 20 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 20 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 17 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 16 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 23 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 26 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 26 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 12 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 20 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 17 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 23 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 22 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 16 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 19 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 17 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 19 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 15 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 15 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 22 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 17 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 22 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 12 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 21 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 23 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 25 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 21 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 21 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 25 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 24 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 12 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 20 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 20 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 20 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 14 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 21 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 18 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 23 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 19 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 17 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 22 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 16 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 22 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 27 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 14 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 19 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 17 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 15 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 16 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 24 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 25 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 25 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 21 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 20 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 25 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 20 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 27 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 20 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 17 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 20 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 19 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 22 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 13 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 22 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 16 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 23 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 23 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 22 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 23 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 20 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 20 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 23 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 19 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 14 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 17 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 23 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 23 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 26 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 19 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 23 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 21 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 17 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 28 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 23 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 21 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 18 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 18 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 17 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 18 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 22 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 22 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 20 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 24 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 17 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 22 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 19 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 23 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 25 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 21 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 19 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 15 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 22 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 21 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 21 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 23 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 15 points (total score not 0\nor 1)\n\nWarning: point-in-polygon test had difficulty with 15 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 21 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 16 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 18 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 19 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 17 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 26 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 27 points (total score not 0\nor 1)\n\n\nWarning: point-in-polygon test had difficulty with 15 points (total score not 0\nor 1)\n\n\n\n    Clark-Evans test\n    No edge correction\n    Monte Carlo test based on 99 simulations of CSR with fixed n\n\ndata:  childcareSG_ppp\nR = 0.54756, p-value = 0.01\nalternative hypothesis: clustered (R < 1)"
  },
  {
    "objectID": "Hands-on_Ex/Hands-on_Ex03/Hands-on_Ex03.html#clark-and-evans-test-choa-chu-kang-planning-area",
    "href": "Hands-on_Ex/Hands-on_Ex03/Hands-on_Ex03.html#clark-and-evans-test-choa-chu-kang-planning-area",
    "title": "Hands-on Exercise 3",
    "section": "4.8.2 Clark and Evans Test: Choa Chu Kang planning area",
    "text": "4.8.2 Clark and Evans Test: Choa Chu Kang planning area\n\nclarkevans.test(childcare_ck_ppp,\n                correction=\"none\",\n                clipregion=NULL,\n                alternative=c(\"two.sided\"),\n                nsim=999)\n\n\n    Clark-Evans test\n    No edge correction\n    Monte Carlo test based on 999 simulations of CSR with fixed n\n\ndata:  childcare_ck_ppp\nR = 0.89048, p-value = 0.028\nalternative hypothesis: two-sided"
  },
  {
    "objectID": "Hands-on_Ex/Hands-on_Ex03/Hands-on_Ex03.html#clark-and-evans-test-tampines-planning-area",
    "href": "Hands-on_Ex/Hands-on_Ex03/Hands-on_Ex03.html#clark-and-evans-test-tampines-planning-area",
    "title": "Hands-on Exercise 3",
    "section": "4.8.3 Clark and Evans Test: Tampines planning area",
    "text": "4.8.3 Clark and Evans Test: Tampines planning area\n\nclarkevans.test(childcare_tm_ppp,\n                correction=\"none\",\n                clipregion=NULL,\n                alternative=c(\"two.sided\"),\n                nsim=999)\n\n\n    Clark-Evans test\n    No edge correction\n    Monte Carlo test based on 999 simulations of CSR with fixed n\n\ndata:  childcare_tm_ppp\nR = 0.77954, p-value = 0.002\nalternative hypothesis: two-sided"
  },
  {
    "objectID": "Hands-on_Ex/Hands-on_Ex02/Hands-on_Ex02.html",
    "href": "Hands-on_Ex/Hands-on_Ex02/Hands-on_Ex02.html",
    "title": "Hands-on_Ex02",
    "section": "",
    "text": "Getting Started\nLoad packages\n\npacman::p_load(tmap, tidyverse, sf)\n\n\n\nImporting Geospatial Data into R\n\nmpsz <- st_read(dsn = \"data/geospatial\", layer = \"MP14_SUBZONE_WEB_PL\")\n\nReading layer `MP14_SUBZONE_WEB_PL' from data source \n  `/Users/keredpoh/Desktop/keredpoh/IS415-GAA/Hands-on_Ex/Hands-on_Ex02/data/geospatial' \n  using driver `ESRI Shapefile'\nSimple feature collection with 323 features and 15 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 2667.538 ymin: 15748.72 xmax: 56396.44 ymax: 50256.33\nProjected CRS: SVY21\n\nmpsz\n\nSimple feature collection with 323 features and 15 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 2667.538 ymin: 15748.72 xmax: 56396.44 ymax: 50256.33\nProjected CRS: SVY21\nFirst 10 features:\n   OBJECTID SUBZONE_NO       SUBZONE_N SUBZONE_C CA_IND      PLN_AREA_N\n1         1          1    MARINA SOUTH    MSSZ01      Y    MARINA SOUTH\n2         2          1    PEARL'S HILL    OTSZ01      Y          OUTRAM\n3         3          3       BOAT QUAY    SRSZ03      Y SINGAPORE RIVER\n4         4          8  HENDERSON HILL    BMSZ08      N     BUKIT MERAH\n5         5          3         REDHILL    BMSZ03      N     BUKIT MERAH\n6         6          7  ALEXANDRA HILL    BMSZ07      N     BUKIT MERAH\n7         7          9   BUKIT HO SWEE    BMSZ09      N     BUKIT MERAH\n8         8          2     CLARKE QUAY    SRSZ02      Y SINGAPORE RIVER\n9         9         13 PASIR PANJANG 1    QTSZ13      N      QUEENSTOWN\n10       10          7       QUEENSWAY    QTSZ07      N      QUEENSTOWN\n   PLN_AREA_C       REGION_N REGION_C          INC_CRC FMEL_UPD_D   X_ADDR\n1          MS CENTRAL REGION       CR 5ED7EB253F99252E 2014-12-05 31595.84\n2          OT CENTRAL REGION       CR 8C7149B9EB32EEFC 2014-12-05 28679.06\n3          SR CENTRAL REGION       CR C35FEFF02B13E0E5 2014-12-05 29654.96\n4          BM CENTRAL REGION       CR 3775D82C5DDBEFBD 2014-12-05 26782.83\n5          BM CENTRAL REGION       CR 85D9ABEF0A40678F 2014-12-05 26201.96\n6          BM CENTRAL REGION       CR 9D286521EF5E3B59 2014-12-05 25358.82\n7          BM CENTRAL REGION       CR 7839A8577144EFE2 2014-12-05 27680.06\n8          SR CENTRAL REGION       CR 48661DC0FBA09F7A 2014-12-05 29253.21\n9          QT CENTRAL REGION       CR 1F721290C421BFAB 2014-12-05 22077.34\n10         QT CENTRAL REGION       CR 3580D2AFFBEE914C 2014-12-05 24168.31\n     Y_ADDR SHAPE_Leng SHAPE_Area                       geometry\n1  29220.19   5267.381  1630379.3 MULTIPOLYGON (((31495.56 30...\n2  29782.05   3506.107   559816.2 MULTIPOLYGON (((29092.28 30...\n3  29974.66   1740.926   160807.5 MULTIPOLYGON (((29932.33 29...\n4  29933.77   3313.625   595428.9 MULTIPOLYGON (((27131.28 30...\n5  30005.70   2825.594   387429.4 MULTIPOLYGON (((26451.03 30...\n6  29991.38   4428.913  1030378.8 MULTIPOLYGON (((25899.7 297...\n7  30230.86   3275.312   551732.0 MULTIPOLYGON (((27746.95 30...\n8  30222.86   2208.619   290184.7 MULTIPOLYGON (((29351.26 29...\n9  29893.78   6571.323  1084792.3 MULTIPOLYGON (((20996.49 30...\n10 30104.18   3454.239   631644.3 MULTIPOLYGON (((24472.11 29...\n\n\n\n\nImporting Attribute Data into R\n\npopdata <- read_csv(\"data/aspatial/respopagesexfa2011to2020.csv\")\n\nRows: 738492 Columns: 7\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (5): PA, SZ, AG, Sex, FA\ndbl (2): Pop, Time\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\n\n\n\nData Preparation\nContext: Before a thematic map can be prepared, you are required to prepare a data table with year 2020 values. The data table should include the variables PA, SZ, YOUNG, ECONOMY ACTIVE, AGED, TOTAL, DEPENDENCY.\nYOUNG: age group 0 to 4 until age groyup 20 to 24, ECONOMY ACTIVE: age group 25-29 until age group 60-64, AGED: age group 65 and above, TOTAL: all age group, and DEPENDENCY: the ratio between young and aged against economy active group\n\npopdata2020 <- popdata %>%\n  filter(Time == 2020) %>%\n  group_by(PA, SZ, AG) %>%\n  summarise(`POP` = sum(`Pop`)) %>%\n  ungroup() %>%\n  pivot_wider(names_from=AG, \n              values_from=POP) %>%\n  mutate(YOUNG = rowSums(.[3:6])\n         +rowSums(.[12]), \n         ECONOMY_ACTIVE = rowSums(.[7:11]) +\n           rowSums(.[13:15]), \n         AGED = rowSums(.[16:21]),\n  #Column 3 to 6 and column 12 are under 24 yrs old\n  #Column 7 to 11 and 13 - 15 are between 25 - 64\n  #Column 16 to 21 are 65 and above\n         TOTAL = rowSums(.[3:21]),\n         DEPENDENCY = (YOUNG + AGED)\n         /ECONOMY_ACTIVE) %>%\n  select(PA, SZ, \n         YOUNG, ECONOMY_ACTIVE, AGED,\n         TOTAL, DEPENDENCY)\n\n`summarise()` has grouped output by 'PA', 'SZ'. You can override using the\n`.groups` argument.\n\n#rowSums() tallies the sum of values in the columns specified\n\nQuestion : |> causes an error at rowSums(.[3:6]) while %>% has no issues\nJoining the attribute data and geospatial data\n\npopdata2020 <- popdata2020 %>%\n  mutate_at(.vars = vars(PA,SZ),\n            .funs = funs(toupper)) |>\n  filter(ECONOMY_ACTIVE > 0)\n\nWarning: `funs()` was deprecated in dplyr 0.8.0.\nℹ Please use a list of either functions or lambdas:\n\n# Simple named list: list(mean = mean, median = median)\n\n# Auto named with `tibble::lst()`: tibble::lst(mean, median)\n\n# Using lambdas list(~ mean(., trim = .2), ~ median(., na.rm = TRUE))\n\npopdata2020\n\n# A tibble: 234 × 7\n   PA         SZ                     YOUNG ECONOMY_ACTIVE  AGED TOTAL DEPENDENCY\n   <chr>      <chr>                  <dbl>          <dbl> <dbl> <dbl>      <dbl>\n 1 ANG MO KIO ANG MO KIO TOWN CENTRE  1300           2780   770  4850      0.745\n 2 ANG MO KIO CHENG SAN               5640          16400  6080 28120      0.715\n 3 ANG MO KIO CHONG BOON              5080          15040  6450 26570      0.767\n 4 ANG MO KIO KEBUN BAHRU             4590          12950  5080 22620      0.747\n 5 ANG MO KIO SEMBAWANG HILLS         1900           3620  1270  6790      0.876\n 6 ANG MO KIO SHANGRI-LA              3320           9080  3540 15940      0.756\n 7 ANG MO KIO TAGORE                  1920           4460  1520  7900      0.771\n 8 ANG MO KIO TOWNSVILLE              4220          11930  5050 21200      0.777\n 9 ANG MO KIO YIO CHU KANG EAST       1070           2350   740  4160      0.770\n10 ANG MO KIO YIO CHU KANG WEST       5710          13710  4680 24100      0.758\n# … with 224 more rows\n\n# mutate_at(.vars = , .funs =) : vars() selects columns. funs() applies a function on all records\n#toupper converts from lower case to uppercase as a default\n\nUse left_join() to combine geospatial data and attribute table by mpsz.SUBZONE_N and popdata2020.SZ as common identifier\n\nmpsz_pop2020 <- left_join(mpsz, popdata2020, by = c(\"SUBZONE_N\" = \"SZ\"))\n\n\nwrite_rds(mpsz_pop2020, \"data/rds/mpszpop2020\")\n\n\n\nChoropleth Mapping Geospatial Data Using tmap\nPlotting a choropleth map quickly using qtm()\n\ntmap_mode(\"plot\")\n\ntmap mode set to plotting\n\nqtm(mpsz_pop2020,\n    fill = \"DEPENDENCY\")\n\n\n\n\nNotes:\n\ntmap_mode() with “plot” produces a static map whereas “view” produces an interactive mode\nfill maps the variable attribute\n\nCreating a choropleth map by using tmaps element: Similar to ggplot2, use “+” as its adding on layers to the plot\n\ntm_shape(mpsz_pop2020) +\n  tm_fill(\"DEPENDENCY\",\n        style = \"quantile\",\n        palette = \"Blues\",\n        title = \"Dependency ratio\") +\n  tm_layout(main.title = \"Distribution of Dependency Ratio by planning subzone\",\n            main.title.position = \"center\",\n            main.title.size = 1.2,\n            legend.height = 0.45, \n            legend.width = 0.35,\n            frame = TRUE) +\n  tm_borders(alpha = 0.5) +\n  tm_compass(type=\"8star\", size = 2) +\n  tm_scale_bar() +\n  tm_grid(alpha =0.2) +\n  tm_credits(\"Source: Planning Sub-zone boundary from Urban Redevelopment Authorithy (URA)\\n and Population data from Department of Statistics DOS\", \n             position = c(\"left\", \"bottom\"))"
  },
  {
    "objectID": "Hands-on_Ex/Hands-on_Ex01/Hands-on_Ex01.html",
    "href": "Hands-on_Ex/Hands-on_Ex01/Hands-on_Ex01.html",
    "title": "Hands-on Exercise 1: Geospatial Data Wrangling",
    "section": "",
    "text": "1.3 Getting Started\nInstalling and loading R packages\n\npacman::p_load(sf, tidyverse)\n\n1.4.1 Importing Geospatial Data\n\nmpsz <- st_read(dsn = \"data/geospatial\", layer = \"MP14_SUBZONE_WEB_PL\")\n\nReading layer `MP14_SUBZONE_WEB_PL' from data source \n  `/Users/keredpoh/Desktop/keredpoh/IS415-GAA/Hands-on_Ex/Hands-on_Ex01/data/geospatial' \n  using driver `ESRI Shapefile'\nSimple feature collection with 323 features and 15 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 2667.538 ymin: 15748.72 xmax: 56396.44 ymax: 50256.33\nProjected CRS: SVY21\n\n\n1.4.2 Importing polyline feature data in shapefile\n\ncyclingpath = st_read(dsn = \"data/geospatial\", layer = \"CyclingPathGazette\")\n\nReading layer `CyclingPathGazette' from data source \n  `/Users/keredpoh/Desktop/keredpoh/IS415-GAA/Hands-on_Ex/Hands-on_Ex01/data/geospatial' \n  using driver `ESRI Shapefile'\nSimple feature collection with 2248 features and 2 fields\nGeometry type: MULTILINESTRING\nDimension:     XY\nBounding box:  xmin: 11854.32 ymin: 28347.98 xmax: 42626.09 ymax: 48948.15\nProjected CRS: SVY21\n\n\n1.4.3 Importing GIS data in kml format\n\npreschool = st_read(\"data/geospatial/preschools-location.kml\")\n\nReading layer `PRESCHOOLS_LOCATION' from data source \n  `/Users/keredpoh/Desktop/keredpoh/IS415-GAA/Hands-on_Ex/Hands-on_Ex01/data/geospatial/preschools-location.kml' \n  using driver `KML'\nSimple feature collection with 1925 features and 2 fields\nGeometry type: POINT\nDimension:     XYZ\nBounding box:  xmin: 103.6824 ymin: 1.247759 xmax: 103.9897 ymax: 1.462134\nz_range:       zmin: 0 zmax: 0\nGeodetic CRS:  WGS 84\n\n\n1.5 Checking the content of a simple feature dataframe\n1.5.1 Working with st_geometry() The function will give you basic information of the feature class.\n\nst_geometry(mpsz)\n\nGeometry set for 323 features \nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 2667.538 ymin: 15748.72 xmax: 56396.44 ymax: 50256.33\nProjected CRS: SVY21\nFirst 5 geometries:\n\n\n1.5.2 Working with glimpse() glimpse showcases the rows and column and their respective data types and values\n\nglimpse(mpsz)\n\nRows: 323\nColumns: 16\n$ OBJECTID   <int> 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, …\n$ SUBZONE_NO <int> 1, 1, 3, 8, 3, 7, 9, 2, 13, 7, 12, 6, 1, 5, 1, 1, 3, 2, 2, …\n$ SUBZONE_N  <chr> \"MARINA SOUTH\", \"PEARL'S HILL\", \"BOAT QUAY\", \"HENDERSON HIL…\n$ SUBZONE_C  <chr> \"MSSZ01\", \"OTSZ01\", \"SRSZ03\", \"BMSZ08\", \"BMSZ03\", \"BMSZ07\",…\n$ CA_IND     <chr> \"Y\", \"Y\", \"Y\", \"N\", \"N\", \"N\", \"N\", \"Y\", \"N\", \"N\", \"N\", \"N\",…\n$ PLN_AREA_N <chr> \"MARINA SOUTH\", \"OUTRAM\", \"SINGAPORE RIVER\", \"BUKIT MERAH\",…\n$ PLN_AREA_C <chr> \"MS\", \"OT\", \"SR\", \"BM\", \"BM\", \"BM\", \"BM\", \"SR\", \"QT\", \"QT\",…\n$ REGION_N   <chr> \"CENTRAL REGION\", \"CENTRAL REGION\", \"CENTRAL REGION\", \"CENT…\n$ REGION_C   <chr> \"CR\", \"CR\", \"CR\", \"CR\", \"CR\", \"CR\", \"CR\", \"CR\", \"CR\", \"CR\",…\n$ INC_CRC    <chr> \"5ED7EB253F99252E\", \"8C7149B9EB32EEFC\", \"C35FEFF02B13E0E5\",…\n$ FMEL_UPD_D <date> 2014-12-05, 2014-12-05, 2014-12-05, 2014-12-05, 2014-12-05…\n$ X_ADDR     <dbl> 31595.84, 28679.06, 29654.96, 26782.83, 26201.96, 25358.82,…\n$ Y_ADDR     <dbl> 29220.19, 29782.05, 29974.66, 29933.77, 30005.70, 29991.38,…\n$ SHAPE_Leng <dbl> 5267.381, 3506.107, 1740.926, 3313.625, 2825.594, 4428.913,…\n$ SHAPE_Area <dbl> 1630379.27, 559816.25, 160807.50, 595428.89, 387429.44, 103…\n$ geometry   <MULTIPOLYGON [m]> MULTIPOLYGON (((31495.56 30..., MULTIPOLYGON (…\n\n\n1.5.3 Working with head() Function shows the first n values\n\nhead(mpsz, n = 5)\n\nSimple feature collection with 5 features and 15 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 25867.68 ymin: 28369.47 xmax: 32362.39 ymax: 30435.54\nProjected CRS: SVY21\n  OBJECTID SUBZONE_NO      SUBZONE_N SUBZONE_C CA_IND      PLN_AREA_N\n1        1          1   MARINA SOUTH    MSSZ01      Y    MARINA SOUTH\n2        2          1   PEARL'S HILL    OTSZ01      Y          OUTRAM\n3        3          3      BOAT QUAY    SRSZ03      Y SINGAPORE RIVER\n4        4          8 HENDERSON HILL    BMSZ08      N     BUKIT MERAH\n5        5          3        REDHILL    BMSZ03      N     BUKIT MERAH\n  PLN_AREA_C       REGION_N REGION_C          INC_CRC FMEL_UPD_D   X_ADDR\n1         MS CENTRAL REGION       CR 5ED7EB253F99252E 2014-12-05 31595.84\n2         OT CENTRAL REGION       CR 8C7149B9EB32EEFC 2014-12-05 28679.06\n3         SR CENTRAL REGION       CR C35FEFF02B13E0E5 2014-12-05 29654.96\n4         BM CENTRAL REGION       CR 3775D82C5DDBEFBD 2014-12-05 26782.83\n5         BM CENTRAL REGION       CR 85D9ABEF0A40678F 2014-12-05 26201.96\n    Y_ADDR SHAPE_Leng SHAPE_Area                       geometry\n1 29220.19   5267.381  1630379.3 MULTIPOLYGON (((31495.56 30...\n2 29782.05   3506.107   559816.2 MULTIPOLYGON (((29092.28 30...\n3 29974.66   1740.926   160807.5 MULTIPOLYGON (((29932.33 29...\n4 29933.77   3313.625   595428.9 MULTIPOLYGON (((27131.28 30...\n5 30005.70   2825.594   387429.4 MULTIPOLYGON (((26451.03 30...\n\n\n1.6 Plotting Geospatial Data\n\nplot(mpsz)\n\n\n\n\nChoose to plot only the geometry\n\nplot(st_geometry(mpsz))\n\n\n\n\nChoose to plot a specific attribute\n\nplot(mpsz[\"PLN_AREA_N\"])\n\n\n\n\n1.7 Working with Projection\n1.7.1 Assigning EPSG code to a simple feature data frame\n\nst_crs(mpsz)\n\nCoordinate Reference System:\n  User input: SVY21 \n  wkt:\nPROJCRS[\"SVY21\",\n    BASEGEOGCRS[\"SVY21[WGS84]\",\n        DATUM[\"World Geodetic System 1984\",\n            ELLIPSOID[\"WGS 84\",6378137,298.257223563,\n                LENGTHUNIT[\"metre\",1]],\n            ID[\"EPSG\",6326]],\n        PRIMEM[\"Greenwich\",0,\n            ANGLEUNIT[\"Degree\",0.0174532925199433]]],\n    CONVERSION[\"unnamed\",\n        METHOD[\"Transverse Mercator\",\n            ID[\"EPSG\",9807]],\n        PARAMETER[\"Latitude of natural origin\",1.36666666666667,\n            ANGLEUNIT[\"Degree\",0.0174532925199433],\n            ID[\"EPSG\",8801]],\n        PARAMETER[\"Longitude of natural origin\",103.833333333333,\n            ANGLEUNIT[\"Degree\",0.0174532925199433],\n            ID[\"EPSG\",8802]],\n        PARAMETER[\"Scale factor at natural origin\",1,\n            SCALEUNIT[\"unity\",1],\n            ID[\"EPSG\",8805]],\n        PARAMETER[\"False easting\",28001.642,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8806]],\n        PARAMETER[\"False northing\",38744.572,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8807]]],\n    CS[Cartesian,2],\n        AXIS[\"(E)\",east,\n            ORDER[1],\n            LENGTHUNIT[\"metre\",1,\n                ID[\"EPSG\",9001]]],\n        AXIS[\"(N)\",north,\n            ORDER[2],\n            LENGTHUNIT[\"metre\",1,\n                ID[\"EPSG\",9001]]]]\n\n\nEPSG is 9001 which is wrong as it should be 3414. Therefore we need to set EPSG to 3414\n\nmpsz3414 <- st_set_crs(mpsz, 3414)\n\nCheck CSR again\n\nst_crs(mpsz3414)\n\nCoordinate Reference System:\n  User input: EPSG:3414 \n  wkt:\nPROJCRS[\"SVY21 / Singapore TM\",\n    BASEGEOGCRS[\"SVY21\",\n        DATUM[\"SVY21\",\n            ELLIPSOID[\"WGS 84\",6378137,298.257223563,\n                LENGTHUNIT[\"metre\",1]]],\n        PRIMEM[\"Greenwich\",0,\n            ANGLEUNIT[\"degree\",0.0174532925199433]],\n        ID[\"EPSG\",4757]],\n    CONVERSION[\"Singapore Transverse Mercator\",\n        METHOD[\"Transverse Mercator\",\n            ID[\"EPSG\",9807]],\n        PARAMETER[\"Latitude of natural origin\",1.36666666666667,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8801]],\n        PARAMETER[\"Longitude of natural origin\",103.833333333333,\n            ANGLEUNIT[\"degree\",0.0174532925199433],\n            ID[\"EPSG\",8802]],\n        PARAMETER[\"Scale factor at natural origin\",1,\n            SCALEUNIT[\"unity\",1],\n            ID[\"EPSG\",8805]],\n        PARAMETER[\"False easting\",28001.642,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8806]],\n        PARAMETER[\"False northing\",38744.572,\n            LENGTHUNIT[\"metre\",1],\n            ID[\"EPSG\",8807]]],\n    CS[Cartesian,2],\n        AXIS[\"northing (N)\",north,\n            ORDER[1],\n            LENGTHUNIT[\"metre\",1]],\n        AXIS[\"easting (E)\",east,\n            ORDER[2],\n            LENGTHUNIT[\"metre\",1]],\n    USAGE[\n        SCOPE[\"Cadastre, engineering survey, topographic mapping.\"],\n        AREA[\"Singapore - onshore and offshore.\"],\n        BBOX[1.13,103.59,1.47,104.07]],\n    ID[\"EPSG\",3414]]\n\n\n1.7.2 Transforming the projection of preschool from wgs84 to svy21\n\nst_geometry(preschool)\n\nGeometry set for 1925 features \nGeometry type: POINT\nDimension:     XYZ\nBounding box:  xmin: 103.6824 ymin: 1.247759 xmax: 103.9897 ymax: 1.462134\nz_range:       zmin: 0 zmax: 0\nGeodetic CRS:  WGS 84\nFirst 5 geometries:\n\n\nChangge Geodetic CRS: WGS 84 to svy21_EPSG 3414\n\npreschool3414 <- st_transform(preschool, crs = 3414)\npreschool3414\n\nSimple feature collection with 1925 features and 2 fields\nGeometry type: POINT\nDimension:     XYZ\nBounding box:  xmin: 11203.01 ymin: 25596.33 xmax: 45404.24 ymax: 49300.88\nz_range:       zmin: 0 zmax: 0\nProjected CRS: SVY21 / Singapore TM\nFirst 10 features:\n     Name\n1   kml_1\n2   kml_2\n3   kml_3\n4   kml_4\n5   kml_5\n6   kml_6\n7   kml_7\n8   kml_8\n9   kml_9\n10 kml_10\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        Description\n1             <center><table><tr><th colspan='2' align='center'><em>Attributes</em></th></tr><tr bgcolor=\"#E3E3F3\"> <th>CENTRE_NAME</th> <td>BRILLIANT TOTS PTE. LTD.</td> </tr><tr bgcolor=\"\"> <th>CENTRE_CODE</th> <td>PT9334</td> </tr><tr bgcolor=\"#E3E3F3\"> <th>ADDRESS</th> <td>610, JURONG WEST STREET 65, #01 - 534, S 640610</td> </tr><tr bgcolor=\"\"> <th>POSTAL_CODE</th> <td>640610</td> </tr><tr bgcolor=\"#E3E3F3\"> <th>INC_CRC</th> <td>0523C7904478A63D</td> </tr><tr bgcolor=\"\"> <th>FMEL_UPD_D</th> <td>20200812235534</td> </tr></table></center>\n2             <center><table><tr><th colspan='2' align='center'><em>Attributes</em></th></tr><tr bgcolor=\"#E3E3F3\"> <th>CENTRE_NAME</th> <td>BUBBLESLAND PLAYHOUSE PTE LTD</td> </tr><tr bgcolor=\"\"> <th>CENTRE_CODE</th> <td>PT7680</td> </tr><tr bgcolor=\"#E3E3F3\"> <th>ADDRESS</th> <td>238, COMPASSVALE WALK, #01 - 542, S 540238</td> </tr><tr bgcolor=\"\"> <th>POSTAL_CODE</th> <td>540238</td> </tr><tr bgcolor=\"#E3E3F3\"> <th>INC_CRC</th> <td>18BED05A501AA168</td> </tr><tr bgcolor=\"\"> <th>FMEL_UPD_D</th> <td>20200812235534</td> </tr></table></center>\n3       <center><table><tr><th colspan='2' align='center'><em>Attributes</em></th></tr><tr bgcolor=\"#E3E3F3\"> <th>CENTRE_NAME</th> <td>BUCKET HOUSE PRESCHOOL</td> </tr><tr bgcolor=\"\"> <th>CENTRE_CODE</th> <td>PT9527</td> </tr><tr bgcolor=\"#E3E3F3\"> <th>ADDRESS</th> <td>39, WOODLANDS CLOSE, #01 - 62, MEGA@WOODLANDS, S 737856</td> </tr><tr bgcolor=\"\"> <th>POSTAL_CODE</th> <td>737856</td> </tr><tr bgcolor=\"#E3E3F3\"> <th>INC_CRC</th> <td>C88B9AC31EE71BF6</td> </tr><tr bgcolor=\"\"> <th>FMEL_UPD_D</th> <td>20200812235534</td> </tr></table></center>\n4            <center><table><tr><th colspan='2' align='center'><em>Attributes</em></th></tr><tr bgcolor=\"#E3E3F3\"> <th>CENTRE_NAME</th> <td>BUMBLE BEE CHILD CARE CENTRE</td> </tr><tr bgcolor=\"\"> <th>CENTRE_CODE</th> <td>PT3150</td> </tr><tr bgcolor=\"#E3E3F3\"> <th>ADDRESS</th> <td>369, WOODLANDS AVENUE 1, #01 - 853, S 730369</td> </tr><tr bgcolor=\"\"> <th>POSTAL_CODE</th> <td>730369</td> </tr><tr bgcolor=\"#E3E3F3\"> <th>INC_CRC</th> <td>64AB8FACA8F60129</td> </tr><tr bgcolor=\"\"> <th>FMEL_UPD_D</th> <td>20200812235534</td> </tr></table></center>\n5               <center><table><tr><th colspan='2' align='center'><em>Attributes</em></th></tr><tr bgcolor=\"#E3E3F3\"> <th>CENTRE_NAME</th> <td>BUSY BEES SINGAPORE PTE LTD</td> </tr><tr bgcolor=\"\"> <th>CENTRE_CODE</th> <td>PT9117</td> </tr><tr bgcolor=\"#E3E3F3\"> <th>ADDRESS</th> <td>327B, ANCHORVALE ROAD, #01 - 322, S 542327</td> </tr><tr bgcolor=\"\"> <th>POSTAL_CODE</th> <td>542327</td> </tr><tr bgcolor=\"#E3E3F3\"> <th>INC_CRC</th> <td>E1B55AC65B9059E8</td> </tr><tr bgcolor=\"\"> <th>FMEL_UPD_D</th> <td>20200812235534</td> </tr></table></center>\n6                  <center><table><tr><th colspan='2' align='center'><em>Attributes</em></th></tr><tr bgcolor=\"#E3E3F3\"> <th>CENTRE_NAME</th> <td>BUSY BEES SINGAPORE PTE LTD</td> </tr><tr bgcolor=\"\"> <th>CENTRE_CODE</th> <td>PT9066</td> </tr><tr bgcolor=\"#E3E3F3\"> <th>ADDRESS</th> <td>211A, PUNGGOL WALK, #01 - 623, S 821211</td> </tr><tr bgcolor=\"\"> <th>POSTAL_CODE</th> <td>821211</td> </tr><tr bgcolor=\"#E3E3F3\"> <th>INC_CRC</th> <td>3B5A4AF2696592AA</td> </tr><tr bgcolor=\"\"> <th>FMEL_UPD_D</th> <td>20200812235534</td> </tr></table></center>\n7       <center><table><tr><th colspan='2' align='center'><em>Attributes</em></th></tr><tr bgcolor=\"#E3E3F3\"> <th>CENTRE_NAME</th> <td>BUSY BEES SINGAPORE PTE LTD</td> </tr><tr bgcolor=\"\"> <th>CENTRE_CODE</th> <td>PT9479</td> </tr><tr bgcolor=\"#E3E3F3\"> <th>ADDRESS</th> <td>2, GAMBAS CRESCENT,  - 01-03, NORDCOM II, S 757044</td> </tr><tr bgcolor=\"\"> <th>POSTAL_CODE</th> <td>757044</td> </tr><tr bgcolor=\"#E3E3F3\"> <th>INC_CRC</th> <td>5F5452B568838620</td> </tr><tr bgcolor=\"\"> <th>FMEL_UPD_D</th> <td>20200812235534</td> </tr></table></center>\n8          <center><table><tr><th colspan='2' align='center'><em>Attributes</em></th></tr><tr bgcolor=\"#E3E3F3\"> <th>CENTRE_NAME</th> <td>BUSY BEES SINGAPORE PTE.LTD</td> </tr><tr bgcolor=\"\"> <th>CENTRE_CODE</th> <td>PT9127</td> </tr><tr bgcolor=\"#E3E3F3\"> <th>ADDRESS</th> <td>6, SERANGOON NORTH AVENUE 5, #02 - 01, S 554910</td> </tr><tr bgcolor=\"\"> <th>POSTAL_CODE</th> <td>554910</td> </tr><tr bgcolor=\"#E3E3F3\"> <th>INC_CRC</th> <td>3AD4173BBB057D89</td> </tr><tr bgcolor=\"\"> <th>FMEL_UPD_D</th> <td>20200812235534</td> </tr></table></center>\n9             <center><table><tr><th colspan='2' align='center'><em>Attributes</em></th></tr><tr bgcolor=\"#E3E3F3\"> <th>CENTRE_NAME</th> <td>BUSY BEES SINGAPORE PTE.LTD.</td> </tr><tr bgcolor=\"\"> <th>CENTRE_CODE</th> <td>PT9067</td> </tr><tr bgcolor=\"#E3E3F3\"> <th>ADDRESS</th> <td>348A, YISHUN AVENUE 11, #01 - 557, S 761348</td> </tr><tr bgcolor=\"\"> <th>POSTAL_CODE</th> <td>761348</td> </tr><tr bgcolor=\"#E3E3F3\"> <th>INC_CRC</th> <td>F4D7A4BDA3CBB15F</td> </tr><tr bgcolor=\"\"> <th>FMEL_UPD_D</th> <td>20200812235534</td> </tr></table></center>\n10 <center><table><tr><th colspan='2' align='center'><em>Attributes</em></th></tr><tr bgcolor=\"#E3E3F3\"> <th>CENTRE_NAME</th> <td>CAELUM JUNIOR @ BENDEMEER PTE. LTD.</td> </tr><tr bgcolor=\"\"> <th>CENTRE_CODE</th> <td>PT9053</td> </tr><tr bgcolor=\"#E3E3F3\"> <th>ADDRESS</th> <td>70, BENDEMEER ROAD, #02 - 01, LUZERNE, S 339940</td> </tr><tr bgcolor=\"\"> <th>POSTAL_CODE</th> <td>339940</td> </tr><tr bgcolor=\"#E3E3F3\"> <th>INC_CRC</th> <td>D55FC7583E8CCBA7</td> </tr><tr bgcolor=\"\"> <th>FMEL_UPD_D</th> <td>20200812235534</td> </tr></table></center>\n                        geometry\n1  POINT Z (13258.34 35611.04 0)\n2  POINT Z (35272.09 41373.42 0)\n3  POINT Z (25050.54 46634.14 0)\n4  POINT Z (22892.48 46127.66 0)\n5  POINT Z (34155.79 41949.13 0)\n6   POINT Z (35414.54 42625.1 0)\n7  POINT Z (26046.98 47205.62 0)\n8  POINT Z (31980.09 39607.05 0)\n9  POINT Z (28879.22 45454.97 0)\n10 POINT Z (31250.89 33171.55 0)\n\n\n1.8 Importing and Converting an Aspatial data\n\nlistings <- read_csv(\"data/aspatial/listings.csv\")\n\n#Imports into a tibble data frame\nlist(listings)\n\n[[1]]\n# A tibble: 3,037 × 75\n       id listing_url    scrap…¹ last_scr…² source name  descr…³ neigh…⁴ pictu…⁵\n    <dbl> <chr>            <dbl> <date>     <chr>  <chr> <chr>   <chr>   <chr>  \n 1  71609 https://www.a… 2.02e13 2022-12-29 city … Ensu… For 3 … <NA>    https:…\n 2  71896 https://www.a… 2.02e13 2022-12-29 city … B&B … <b>The… <NA>    https:…\n 3  71903 https://www.a… 2.02e13 2022-12-29 city … Room… Like y… Quiet … https:…\n 4 275343 https://www.a… 2.02e13 2022-12-29 city … Amaz… Awesom… <NA>    https:…\n 5 275344 https://www.a… 2.02e13 2022-12-29 city … 15 m… Lovely… Bus st… https:…\n 6 289234 https://www.a… 2.02e13 2022-12-29 city … Book… This w… A quie… https:…\n 7 294281 https://www.a… 2.02e13 2022-12-29 city … 5 mi… I have… <NA>    https:…\n 8 324945 https://www.a… 2.02e13 2022-12-29 city … Cozy… Cozy, … <NA>    https:…\n 9 330089 https://www.a… 2.02e13 2022-12-29 city … Cozy… A unit… <NA>    https:…\n10 330095 https://www.a… 2.02e13 2022-12-29 city … 10 m… Cosy, … Near I… https:…\n# … with 3,027 more rows, 66 more variables: host_id <dbl>, host_url <chr>,\n#   host_name <chr>, host_since <date>, host_location <chr>, host_about <chr>,\n#   host_response_time <chr>, host_response_rate <chr>,\n#   host_acceptance_rate <chr>, host_is_superhost <lgl>,\n#   host_thumbnail_url <chr>, host_picture_url <chr>, host_neighbourhood <chr>,\n#   host_listings_count <dbl>, host_total_listings_count <dbl>,\n#   host_verifications <chr>, host_has_profile_pic <lgl>, …\n\n\n1.8.2 Creating a simple feature data frame from an aspatial data frame\n\nlistings_sf <- st_as_sf(listings, coords = c(\"longitude\", \"latitude\"), crs = 4326) |>\n  st_transform(crs = 3414)\n\nglimpse(listings_sf)\n\nRows: 3,037\nColumns: 74\n$ id                                           <dbl> 71609, 71896, 71903, 2753…\n$ listing_url                                  <chr> \"https://www.airbnb.com/r…\n$ scrape_id                                    <dbl> 2.022123e+13, 2.022123e+1…\n$ last_scraped                                 <date> 2022-12-29, 2022-12-29, …\n$ source                                       <chr> \"city scrape\", \"city scra…\n$ name                                         <chr> \"Ensuite Room (Room 1 & 2…\n$ description                                  <chr> \"For 3 rooms.Book room 1&…\n$ neighborhood_overview                        <chr> NA, NA, \"Quiet and view o…\n$ picture_url                                  <chr> \"https://a0.muscache.com/…\n$ host_id                                      <dbl> 367042, 367042, 367042, 1…\n$ host_url                                     <chr> \"https://www.airbnb.com/u…\n$ host_name                                    <chr> \"Belinda\", \"Belinda\", \"Be…\n$ host_since                                   <date> 2011-01-29, 2011-01-29, …\n$ host_location                                <chr> \"Singapore\", \"Singapore\",…\n$ host_about                                   <chr> \"Hi My name is Belinda -H…\n$ host_response_time                           <chr> \"within a few hours\", \"wi…\n$ host_response_rate                           <chr> \"90%\", \"90%\", \"90%\", \"100…\n$ host_acceptance_rate                         <chr> \"100%\", \"100%\", \"100%\", \"…\n$ host_is_superhost                            <lgl> FALSE, FALSE, FALSE, FALS…\n$ host_thumbnail_url                           <chr> \"https://a0.muscache.com/…\n$ host_picture_url                             <chr> \"https://a0.muscache.com/…\n$ host_neighbourhood                           <chr> \"Tampines\", \"Tampines\", \"…\n$ host_listings_count                          <dbl> 6, 6, 6, 46, 46, 6, 7, 46…\n$ host_total_listings_count                    <dbl> 15, 15, 15, 59, 59, 15, 8…\n$ host_verifications                           <chr> \"['email', 'phone']\", \"['…\n$ host_has_profile_pic                         <lgl> TRUE, TRUE, TRUE, TRUE, T…\n$ host_identity_verified                       <lgl> TRUE, TRUE, TRUE, TRUE, T…\n$ neighbourhood                                <chr> NA, NA, \"Singapore, Singa…\n$ neighbourhood_cleansed                       <chr> \"Tampines\", \"Tampines\", \"…\n$ neighbourhood_group_cleansed                 <chr> \"East Region\", \"East Regi…\n$ property_type                                <chr> \"Private room in villa\", …\n$ room_type                                    <chr> \"Private room\", \"Private …\n$ accommodates                                 <dbl> 6, 1, 2, 1, 1, 4, 2, 1, 1…\n$ bathrooms                                    <lgl> NA, NA, NA, NA, NA, NA, N…\n$ bathrooms_text                               <chr> \"1 private bath\", \"Shared…\n$ bedrooms                                     <dbl> 2, 1, 1, 1, 1, 3, 1, 1, N…\n$ beds                                         <dbl> 3, 1, 2, 1, 1, 5, 1, 1, 1…\n$ amenities                                    <chr> \"[\\\"Cooking basics\\\", \\\"R…\n$ price                                        <chr> \"$46,437.00\", \"$81.00\", \"…\n$ minimum_nights                               <dbl> 92, 92, 92, 60, 60, 92, 9…\n$ maximum_nights                               <dbl> 1125, 1125, 1125, 999, 99…\n$ minimum_minimum_nights                       <dbl> 92, 92, 92, 60, 60, 92, 9…\n$ maximum_minimum_nights                       <dbl> 92, 92, 92, 60, 60, 92, 9…\n$ minimum_maximum_nights                       <dbl> 1125, 1125, 1125, 999, 99…\n$ maximum_maximum_nights                       <dbl> 1125, 1125, 1125, 999, 99…\n$ minimum_nights_avg_ntm                       <dbl> 92, 92, 92, 60, 60, 92, 9…\n$ maximum_nights_avg_ntm                       <dbl> 1125, 1125, 1125, 999, 99…\n$ calendar_updated                             <lgl> NA, NA, NA, NA, NA, NA, N…\n$ has_availability                             <lgl> TRUE, TRUE, TRUE, TRUE, T…\n$ availability_30                              <dbl> 0, 0, 30, 0, 0, 0, 30, 0,…\n$ availability_60                              <dbl> 0, 0, 33, 0, 0, 0, 60, 0,…\n$ availability_90                              <dbl> 0, 0, 33, 0, 6, 0, 90, 0,…\n$ availability_365                             <dbl> 242, 242, 305, 273, 281, …\n$ calendar_last_scraped                        <date> 2022-12-29, 2022-12-29, …\n$ number_of_reviews                            <dbl> 20, 24, 47, 22, 14, 12, 1…\n$ number_of_reviews_ltm                        <dbl> 0, 0, 0, 2, 1, 0, 0, 3, 2…\n$ number_of_reviews_l30d                       <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0…\n$ first_review                                 <date> 2011-12-19, 2011-07-30, …\n$ last_review                                  <date> 2020-01-17, 2019-10-13, …\n$ review_scores_rating                         <dbl> 4.44, 4.16, 4.41, 4.40, 4…\n$ review_scores_accuracy                       <dbl> 4.37, 4.22, 4.39, 4.16, 4…\n$ review_scores_cleanliness                    <dbl> 4.00, 4.09, 4.52, 4.26, 4…\n$ review_scores_checkin                        <dbl> 4.63, 4.43, 4.63, 4.47, 4…\n$ review_scores_communication                  <dbl> 4.78, 4.43, 4.64, 4.42, 4…\n$ review_scores_location                       <dbl> 4.26, 4.17, 4.50, 4.53, 4…\n$ review_scores_value                          <dbl> 4.32, 4.04, 4.36, 4.63, 4…\n$ license                                      <chr> NA, NA, NA, \"S0399\", \"S03…\n$ instant_bookable                             <lgl> FALSE, TRUE, FALSE, FALSE…\n$ calculated_host_listings_count               <dbl> 6, 6, 6, 46, 46, 6, 7, 46…\n$ calculated_host_listings_count_entire_homes  <dbl> 0, 0, 0, 2, 2, 0, 1, 2, 2…\n$ calculated_host_listings_count_private_rooms <dbl> 6, 6, 6, 44, 44, 6, 6, 44…\n$ calculated_host_listings_count_shared_rooms  <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0…\n$ reviews_per_month                            <dbl> 0.15, 0.17, 0.33, 0.19, 0…\n$ geometry                                     <POINT [m]> POINT (41972.5 3639…\n\n\n1.9 Geoprocessing with sf package\n1.9.1 Buffering Scenario: The authority is planning to upgrade the exiting cycling path. To do so, they need to acquire 5 metres of reserved land on the both sides of the current cycling path. You are tasked to determine the extend of the land need to be acquired and their total area.\nSolution:\nFirstly, st_buffer() is used to compute the 5 meter buffers around cycling paths\n\nbuffer_cycling <- st_buffer(cyclingpath, dist = 5, nQuadSegs = 30) \n\nThen calculate the area of buffers\n\nbuffer_cycling$AREA <- st_area(buffer_cycling)\n\nLastly sum() is used to rerive total land involved\n\nsum(buffer_cycling$AREA)\n\n1556978 [m^2]\n\n\n1.9.2 Point-in-polygon count Scenario: A pre-school service group want to find out the numbers of pre-schools in each Planning Subzone.\nSolution: Firstly, identify pre-schools located inside each Planning Subzone by using st_intersects(). Next, length() of Base R is used to calculate numbers of pre-schools that fall inside each planning subzone.\n\nmpsz3414$`PreSch Count` <- lengths(st_intersects(mpsz3414, preschool3414)) \n\nShow the summary statistics\n\nsummary(mpsz3414$`PreSch Count`)\n\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n   0.00    0.00    3.00    5.96    9.00   58.00 \n\n\nShow the planning subzone with the most number of school\n\ntop_n(mpsz3414, 1, `PreSch Count`)\n\nSimple feature collection with 1 feature and 16 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 39655.33 ymin: 35966 xmax: 42940.57 ymax: 38622.37\nProjected CRS: SVY21 / Singapore TM\n  OBJECTID SUBZONE_NO     SUBZONE_N SUBZONE_C CA_IND PLN_AREA_N PLN_AREA_C\n1      189          2 TAMPINES EAST    TMSZ02      N   TAMPINES         TM\n     REGION_N REGION_C          INC_CRC FMEL_UPD_D   X_ADDR   Y_ADDR SHAPE_Leng\n1 EAST REGION       ER 21658EAAF84F4D8D 2014-12-05 41122.55 37392.39   10180.62\n  SHAPE_Area                       geometry PreSch Count\n1    4339824 MULTIPOLYGON (((42196.76 38...           58\n\n\nFind the density\n\nmpsz3414$Area <- mpsz3414 |>\n  st_area()\n\nmpsz3414 <- mpsz3414 |>\n  mutate(`PreSch Density` = `PreSch Count`/Area *1000000)\n\nmpsz3414\n\nSimple feature collection with 323 features and 18 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 2667.538 ymin: 15748.72 xmax: 56396.44 ymax: 50256.33\nProjected CRS: SVY21 / Singapore TM\nFirst 10 features:\n   OBJECTID SUBZONE_NO       SUBZONE_N SUBZONE_C CA_IND      PLN_AREA_N\n1         1          1    MARINA SOUTH    MSSZ01      Y    MARINA SOUTH\n2         2          1    PEARL'S HILL    OTSZ01      Y          OUTRAM\n3         3          3       BOAT QUAY    SRSZ03      Y SINGAPORE RIVER\n4         4          8  HENDERSON HILL    BMSZ08      N     BUKIT MERAH\n5         5          3         REDHILL    BMSZ03      N     BUKIT MERAH\n6         6          7  ALEXANDRA HILL    BMSZ07      N     BUKIT MERAH\n7         7          9   BUKIT HO SWEE    BMSZ09      N     BUKIT MERAH\n8         8          2     CLARKE QUAY    SRSZ02      Y SINGAPORE RIVER\n9         9         13 PASIR PANJANG 1    QTSZ13      N      QUEENSTOWN\n10       10          7       QUEENSWAY    QTSZ07      N      QUEENSTOWN\n   PLN_AREA_C       REGION_N REGION_C          INC_CRC FMEL_UPD_D   X_ADDR\n1          MS CENTRAL REGION       CR 5ED7EB253F99252E 2014-12-05 31595.84\n2          OT CENTRAL REGION       CR 8C7149B9EB32EEFC 2014-12-05 28679.06\n3          SR CENTRAL REGION       CR C35FEFF02B13E0E5 2014-12-05 29654.96\n4          BM CENTRAL REGION       CR 3775D82C5DDBEFBD 2014-12-05 26782.83\n5          BM CENTRAL REGION       CR 85D9ABEF0A40678F 2014-12-05 26201.96\n6          BM CENTRAL REGION       CR 9D286521EF5E3B59 2014-12-05 25358.82\n7          BM CENTRAL REGION       CR 7839A8577144EFE2 2014-12-05 27680.06\n8          SR CENTRAL REGION       CR 48661DC0FBA09F7A 2014-12-05 29253.21\n9          QT CENTRAL REGION       CR 1F721290C421BFAB 2014-12-05 22077.34\n10         QT CENTRAL REGION       CR 3580D2AFFBEE914C 2014-12-05 24168.31\n     Y_ADDR SHAPE_Leng SHAPE_Area                       geometry PreSch Count\n1  29220.19   5267.381  1630379.3 MULTIPOLYGON (((31495.56 30...            0\n2  29782.05   3506.107   559816.2 MULTIPOLYGON (((29092.28 30...            5\n3  29974.66   1740.926   160807.5 MULTIPOLYGON (((29932.33 29...            0\n4  29933.77   3313.625   595428.9 MULTIPOLYGON (((27131.28 30...            4\n5  30005.70   2825.594   387429.4 MULTIPOLYGON (((26451.03 30...            2\n6  29991.38   4428.913  1030378.8 MULTIPOLYGON (((25899.7 297...           10\n7  30230.86   3275.312   551732.0 MULTIPOLYGON (((27746.95 30...            4\n8  30222.86   2208.619   290184.7 MULTIPOLYGON (((29351.26 29...            2\n9  29893.78   6571.323  1084792.3 MULTIPOLYGON (((20996.49 30...            6\n10 30104.18   3454.239   631644.3 MULTIPOLYGON (((24472.11 29...            1\n              Area   PreSch Density\n1  1630379.3 [m^2] 0.000000 [1/m^2]\n2   559816.2 [m^2] 8.931502 [1/m^2]\n3   160807.5 [m^2] 0.000000 [1/m^2]\n4   595428.9 [m^2] 6.717847 [1/m^2]\n5   387429.4 [m^2] 5.162230 [1/m^2]\n6  1030378.8 [m^2] 9.705169 [1/m^2]\n7   551732.0 [m^2] 7.249896 [1/m^2]\n8   290184.7 [m^2] 6.892163 [1/m^2]\n9  1084792.3 [m^2] 5.531013 [1/m^2]\n10  631644.3 [m^2] 1.583170 [1/m^2]\n\n\n1.10 Exploratory Data Analysis\nCreate a histogram\n\nhist(mpsz3414$`PreSch Density`)\n\n\n\n\nUsing ggplot2\n\nmpsz3414 |>\n  ggplot(aes(x = as.numeric(`PreSch Density`))) + \n  geom_histogram(bins=20,color=\"black\",fill = \"light blue\") +\n  labs(title = \"Are pre-school even distributed in Singapore\",\n       subtitle = \"There are many planning sub-zones with a single pre-school, on the other hand, \\nthere are two planning sub-zones with at least 20 pre-schools\", \n       x = \"Pre-school density (per km sq)\",\n       y = \"Frequency\")\n\n\n\n\nUsing ggplot for scatterplot\n\nmpsz3414 |>\n  ggplot(aes(x = as.numeric(`PreSch Density`), y = `PreSch Count`)) + \n  geom_point(color=\"black\",fill = \"light blue\") +\n  xlim(0,40) +\n  ylim(0,40) +\n  labs(title = \"\",\n       x = \"Pre-school density (per km sq)\",\n       y = \"Frequency\")"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "IS415-GAA",
    "section": "",
    "text": "IS415-GAA\nWelcome to IS415 Geospatial Analytics and Applications.\nThis is the course website of IS415 I study this term. You will find my course work on this website."
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "About this site\n\n1 + 1\n\n[1] 2"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex01.html",
    "href": "Take-home_Ex/Take-home_Ex01.html",
    "title": "Take-home Exercise 1",
    "section": "",
    "text": "Locally, we are all blessed with clean and accessible water. However, this is not the case for less developed countries, especially in the rural regions of Africa. In this Take Home Assignment, we will be putting spatial data into good use, by looking at the number of functional and non functional water points to better understand the needs and the situation of Osun, which is a rural state in Nigeria.\n\n\nThese will be the packages that will be used in this assignment.\n\npacman::p_load(sf, funModeling,maptools,raster, spatstat, tmap , tidyverse, sfdep) \n\n\n\n\nWe will be using data from the state boundary GIS data, that can be found on geoBoundaries\n\ngeoNGA <- st_read(\"data/geospatial/\",\n               layer = \"nga_admbnda_adm2_osgof_20190417\")\n\nReading layer `nga_admbnda_adm2_osgof_20190417' from data source \n  `/Users/keredpoh/Desktop/keredpoh/IS415-GAA/Take-home_Ex/data/geospatial' \n  using driver `ESRI Shapefile'\nSimple feature collection with 774 features and 16 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 2.668534 ymin: 4.273007 xmax: 14.67882 ymax: 13.89442\nGeodetic CRS:  WGS 84\n\n\n\n\n\nWe will be using data from the WPdx Global Data Repositories, while we narrow down to the state of Osun using the filter function.\n\nwp_nga <- read_csv(\"data/aspatial/WPdx.csv\") %>%\n  filter(`#clean_adm1`==\"Osun\")"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex01.html#geospatial-data",
    "href": "Take-home_Ex/Take-home_Ex01.html#geospatial-data",
    "title": "Take-home Exercise 1",
    "section": "2.1 Geospatial Data",
    "text": "2.1 Geospatial Data\n\n2.1.1 Checking for Duplicates\nBefore continuing, we will check for duplicates and replace them if necessary. From running this code, we found out that there are a few duplicates.\n\ngeoNGA$ADM2_EN[duplicated(geoNGA$ADM2_EN) == TRUE]\n\n[1] \"Bassa\"    \"Ifelodun\" \"Irepodun\" \"Nasarawa\" \"Obi\"      \"Surulere\"\n\n\nWe will now be replacing the duplicates.\n\ngeoNGA$ADM2_EN[94] <- \"Bassa, Kogi\"\ngeoNGA$ADM2_EN[95] <- \"Bassa, Plateau\"\ngeoNGA$ADM2_EN[304] <- \"Ifelodun, Kwara\"\ngeoNGA$ADM2_EN[305] <- \"Ifelodun, Osun\"\ngeoNGA$ADM2_EN[355] <- \"Irepodun, Kwara\"\ngeoNGA$ADM2_EN[356] <- \"Irepodun, Osun\"\ngeoNGA$ADM2_EN[519] <- \"Nasarawa, Kano\"\ngeoNGA$ADM2_EN[520] <- \"Nasarawa, Nasarawa\"\ngeoNGA$ADM2_EN[546] <- \"Obi, Benue\"\ngeoNGA$ADM2_EN[547] <- \"Obi, Nasarawa\"\ngeoNGA$ADM2_EN[693] <- \"Surulere, Lagos\"\ngeoNGA$ADM2_EN[694] <- \"Surulere, Oyo\"\n\nWe will now run the same code again to check for duplicates. Since character(0), we are good to go.\n\ngeoNGA$ADM2_EN[duplicated(geoNGA$ADM2_EN) == TRUE]\n\ncharacter(0)\n\n\n\n\n2.1.2 Grouping Different Osun States Together\nAs there are different governed states in Osun, we will then group them into osun_state. This will be useful for our visualisation.\n\nosun_state <- c(\"Aiyedade\",\"Aiyedire\",\"Atakumosa East\",   \"Atakumosa West\", \"Ede North\",  \"Ede South\", \"Egbedore\", \"Ejigbo\", \"Ife Central\", \"Ife East\", \"Ife North\", \"Ife South\", \"Ifedayo\",  \"Ila\", \"Ifelodun, Osun\",\"Irepodun, Osun\",\"Ilesha East\",  \"Ilesha West\", \"Irewole\", \"Isokan\",   \"Iwo\", \"Obokun\", \"Odo-Otin\", \"Ola-oluwa\", \"Olorunda\", \"Oriade\", \"Orolu\",    \"Osogbo\", \"Boripe\", \"Boluwaduro\")\n\nosun <- geoNGA %>%\n  filter(ADM2_EN %in% osun_state)\n\n\n\n2.1.3 Transforming Projection for Osun\nAs EPSG:4326 is the global projection, we would want to transform it into the state of Nigeria. We are able to find that 26392 is projected at Nigeria through epsg.io.\n\nst_crs(osun)\n\nCoordinate Reference System:\n  User input: WGS 84 \n  wkt:\nGEOGCRS[\"WGS 84\",\n    DATUM[\"World Geodetic System 1984\",\n        ELLIPSOID[\"WGS 84\",6378137,298.257223563,\n            LENGTHUNIT[\"metre\",1]]],\n    PRIMEM[\"Greenwich\",0,\n        ANGLEUNIT[\"degree\",0.0174532925199433]],\n    CS[ellipsoidal,2],\n        AXIS[\"latitude\",north,\n            ORDER[1],\n            ANGLEUNIT[\"degree\",0.0174532925199433]],\n        AXIS[\"longitude\",east,\n            ORDER[2],\n            ANGLEUNIT[\"degree\",0.0174532925199433]],\n    ID[\"EPSG\",4326]]\n\nosun <- osun %>% st_transform(crs = 26392)\n\n\n\n2.1.4 Plotting Osun\nThis will help us visualise the shape of Osun.\n\nplot(osun)"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex01.html#aspatial-data",
    "href": "Take-home_Ex/Take-home_Ex01.html#aspatial-data",
    "title": "Take-home Exercise 1",
    "section": "2.2 Aspatial Data",
    "text": "2.2 Aspatial Data\n\n2.2.1 Converting Data of Water Points into SF Point Features\nAs mentioned in class, we will need to match the CRS to the EPSG. Before that, we will converting the WKT (well known text) data.\n\nwp_nga$Geometry = st_as_sfc(wp_nga$`New Georeferenced Column`)\nwp_nga\n\n# A tibble: 5,557 × 71\n   row_id `#source`      #lat_…¹ #lon_…² #repo…³ #stat…⁴ #wate…⁵ #wate…⁶ #wate…⁷\n    <dbl> <chr>            <dbl>   <dbl> <chr>   <chr>   <chr>   <chr>   <chr>  \n 1 429123 GRID3             8.02    5.06 08/29/… Unknown <NA>    <NA>    Tapsta…\n 2  70566 Federal Minis…    7.32    4.79 05/11/… No      Protec… Well    Mechan…\n 3  70578 Federal Minis…    7.76    4.56 05/11/… No      Boreho… Well    Mechan…\n 4  66401 Federal Minis…    8.03    4.64 04/30/… No      Boreho… Well    Mechan…\n 5 422190 GRID3             7.87    4.88 08/29/… Unknown <NA>    <NA>    Tapsta…\n 6 422064 GRID3             7.7     4.89 08/29/… Unknown <NA>    <NA>    Tapsta…\n 7  65607 Federal Minis…    7.89    4.71 05/12/… No      Boreho… Well    Mechan…\n 8  68989 Federal Minis…    7.51    4.27 05/07/… No      Boreho… Well    <NA>   \n 9  67708 Federal Minis…    7.48    4.35 04/29/… Yes     Boreho… Well    Mechan…\n10  66419 Federal Minis…    7.63    4.50 05/08/… Yes     Boreho… Well    Hand P…\n# … with 5,547 more rows, 62 more variables: `#water_tech_category` <chr>,\n#   `#facility_type` <chr>, `#clean_country_name` <chr>, `#clean_adm1` <chr>,\n#   `#clean_adm2` <chr>, `#clean_adm3` <chr>, `#clean_adm4` <chr>,\n#   `#install_year` <dbl>, `#installer` <chr>, `#rehab_year` <lgl>,\n#   `#rehabilitator` <lgl>, `#management_clean` <chr>, `#status_clean` <chr>,\n#   `#pay` <chr>, `#fecal_coliform_presence` <chr>,\n#   `#fecal_coliform_value` <dbl>, `#subjective_quality` <chr>, …\n\nwp_sf <- st_sf(wp_nga, crs = 4326)\nwp_sf\n\nSimple feature collection with 5557 features and 70 fields\nGeometry type: POINT\nDimension:     XY\nBounding box:  xmin: 4.032004 ymin: 7.060309 xmax: 5.06 ymax: 8.061898\nGeodetic CRS:  WGS 84\n# A tibble: 5,557 × 71\n   row_id `#source`      #lat_…¹ #lon_…² #repo…³ #stat…⁴ #wate…⁵ #wate…⁶ #wate…⁷\n *  <dbl> <chr>            <dbl>   <dbl> <chr>   <chr>   <chr>   <chr>   <chr>  \n 1 429123 GRID3             8.02    5.06 08/29/… Unknown <NA>    <NA>    Tapsta…\n 2  70566 Federal Minis…    7.32    4.79 05/11/… No      Protec… Well    Mechan…\n 3  70578 Federal Minis…    7.76    4.56 05/11/… No      Boreho… Well    Mechan…\n 4  66401 Federal Minis…    8.03    4.64 04/30/… No      Boreho… Well    Mechan…\n 5 422190 GRID3             7.87    4.88 08/29/… Unknown <NA>    <NA>    Tapsta…\n 6 422064 GRID3             7.7     4.89 08/29/… Unknown <NA>    <NA>    Tapsta…\n 7  65607 Federal Minis…    7.89    4.71 05/12/… No      Boreho… Well    Mechan…\n 8  68989 Federal Minis…    7.51    4.27 05/07/… No      Boreho… Well    <NA>   \n 9  67708 Federal Minis…    7.48    4.35 04/29/… Yes     Boreho… Well    Mechan…\n10  66419 Federal Minis…    7.63    4.50 05/08/… Yes     Boreho… Well    Hand P…\n# … with 5,547 more rows, 62 more variables: `#water_tech_category` <chr>,\n#   `#facility_type` <chr>, `#clean_country_name` <chr>, `#clean_adm1` <chr>,\n#   `#clean_adm2` <chr>, `#clean_adm3` <chr>, `#clean_adm4` <chr>,\n#   `#install_year` <dbl>, `#installer` <chr>, `#rehab_year` <lgl>,\n#   `#rehabilitator` <lgl>, `#management_clean` <chr>, `#status_clean` <chr>,\n#   `#pay` <chr>, `#fecal_coliform_presence` <chr>,\n#   `#fecal_coliform_value` <dbl>, `#subjective_quality` <chr>, …\n\n\n\n\n2.2.2 Transforming Projection\nSimilarly, we will have to change the projection of the Aspatial data to 26392.\n\nwp_sf <- wp_sf %>%\n  st_transform(crs = 26392)\n\n\n\n2.2.3 Plotting Frequency Data to Spot NA Values\nFrom this bar graph, we can see that there are NA values.\n\nstatus_cleam_graph <- funModeling::freq(data = wp_sf,\n     input = '#status_clean')\n\n\n\n\n\n\n2.2.4 Replacing NA Values\nWe will then replace the NA values to ‘unknown’.\n\nwp_sf_nga <- wp_sf %>% \n  rename(status_clean = '#status_clean') %>%\n dplyr::select(status_clean) %>%\n  mutate(status_clean = replace_na(\n    status_clean, \"unknown\"))\n\n\n\n2.2.5 Grouping data into Functional and Non-Functional Water Point\nFrom the graph above, we are able to group the different data into functional and non functional.\nWe will begin with functional Water Point.\n\nwp_functional <- wp_sf_nga %>% \n  filter(status_clean %in%\n           c(\"Functional\",\n             \"Functional but not in use\",\n             \"Functional but needs repair\"))\n\nNext, for Non-Functional Water Point.\n\nwp_nonfunctional <- wp_sf_nga %>% \n  filter(status_clean %in% \n           c(\"Abandoned/Decommissioned\",\n             \"Abandoned\", \"Non-Functional due to dry season\", \"Non-Functional\", \"Non functional due to dry season\"))"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex01.html#conversion-of-data",
    "href": "Take-home_Ex/Take-home_Ex01.html#conversion-of-data",
    "title": "Take-home Exercise 1",
    "section": "3.1 Conversion of Data",
    "text": "3.1 Conversion of Data\n\n3.1.1 sf to sc\nIn this section, we will be mainly converting our data into spatial data, so that we can use it later on. The sf files earlier on will be now converted into sc (spatial class).\n\nosun_sc<-as_Spatial(osun)\nosun_sc\n\nclass       : SpatialPolygonsDataFrame \nfeatures    : 30 \nextent      : 176503.2, 291043.8, 331434.7, 454520.1  (xmin, xmax, ymin, ymax)\ncrs         : +proj=tmerc +lat_0=4 +lon_0=8.5 +k=0.99975 +x_0=670553.98 +y_0=0 +a=6378249.145 +rf=293.465 +towgs84=-92,-93,122,0,0,0,0 +units=m +no_defs \nvariables   : 16\nnames       :    Shape_Leng,       Shape_Area,  ADM2_EN, ADM2_PCODE, ADM2_REF, ADM2ALT1EN, ADM2ALT2EN, ADM1_EN, ADM1_PCODE, ADM0_EN, ADM0_PCODE,  date, validOn, validTo,        SD_EN, ... \nmin values  : 0.26445678806, 0.00248649736648, Aiyedade,   NG030001, Aiyedade,         NA,         NA,    Osun,      NG030, Nigeria,         NG, 17134,   18003,      NA, Osun Central, ... \nmax values  :  1.8470166597,  0.0737271661922,   Osogbo,   NG030030,   Osogbo,         NA,         NA,    Osun,      NG030, Nigeria,         NG, 17134,   18003,      NA,    Osun West, ... \n\nfunc_wp_sc <- as_Spatial(wp_functional)\nfunc_wp_sc \n\nclass       : SpatialPointsDataFrame \nfeatures    : 2630 \nextent      : 177285.9, 290751, 343128.1, 450859.7  (xmin, xmax, ymin, ymax)\ncrs         : +proj=tmerc +lat_0=4 +lon_0=8.5 +k=0.99975 +x_0=670553.98 +y_0=0 +a=6378249.145 +rf=293.465 +towgs84=-92,-93,122,0,0,0,0 +units=m +no_defs \nvariables   : 1\nnames       :              status_clean \nmin values  :                Functional \nmax values  : Functional but not in use \n\nnonfunc_wp_sc <-as_Spatial(wp_nonfunctional)\nnonfunc_wp_sc\n\nclass       : SpatialPointsDataFrame \nfeatures    : 2179 \nextent      : 180539, 290616, 340054.1, 450780.1  (xmin, xmax, ymin, ymax)\ncrs         : +proj=tmerc +lat_0=4 +lon_0=8.5 +k=0.99975 +x_0=670553.98 +y_0=0 +a=6378249.145 +rf=293.465 +towgs84=-92,-93,122,0,0,0,0 +units=m +no_defs \nvariables   : 1\nnames       :                     status_clean \nmin values  :                        Abandoned \nmax values  : Non-Functional due to dry season \n\n\n\n\n3.1.2 sc to sp\nNext, we will be converting the sc (spatial class) into sp format.\n\nosun_sp <- as(osun_sc, \"SpatialPolygons\")\n\nfunc_wp_sp <-as(func_wp_sc, \"SpatialPoints\")\n\nnonfunc_wp_sp <-as(nonfunc_wp_sc, \"SpatialPoints\")\n\n\n\n3.1.3 sp to ppp\nFinally, we will be converting generic sp format into spatstat’s ppp format.\n\nfunc_wp_ppp <- as(func_wp_sp, \"ppp\")\n\nnonfunc_wp_ppp <- as(nonfunc_wp_sp,\"ppp\")\n\n\n\n3.1.4 Check for Duplicates\nLet us check for duplicate points to be safe. Since there are no duplicates, we can move on.\n\nany(duplicated(func_wp_ppp))\n\n[1] FALSE\n\nany(duplicated(nonfunc_wp_ppp))\n\n[1] FALSE"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex01.html#creating-an-owin-object",
    "href": "Take-home_Ex/Take-home_Ex01.html#creating-an-owin-object",
    "title": "Take-home Exercise 1",
    "section": "3.2 Creating an Owin object",
    "text": "3.2 Creating an Owin object\nFrom the sp conversion earlier, we are able to create the owin object.\n\nowin_osun <- as(osun_sp, \"owin\")\n\n\n3.2.1 Combine Points and Owin Object\nWe can combine the points with the owin object. This will show us the points layered with the owin object for functional and non-functional water point respectively.\n\nowin_func_wp_ppp <- func_wp_ppp[owin_osun]\nplot(owin_func_wp_ppp)\n\n\n\nowin_nonfunc_wp_ppp <- nonfunc_wp_ppp[owin_osun]\nplot(owin_nonfunc_wp_ppp)\n\n\n\n\n\n\n3.2.2 Scaling of KDE Value to Kilometer\nScaling the data to km will enable us to visualise the data better.\n\nkde_func_wp_bw.km <- rescale(owin_func_wp_ppp, 1000, \"km\")\nkde_nonfunc_wp_bw.km <- rescale(owin_nonfunc_wp_ppp, 1000, \"km\")"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex01.html#st-order-point-spatial-patterns",
    "href": "Take-home_Ex/Take-home_Ex01.html#st-order-point-spatial-patterns",
    "title": "Take-home Exercise 1",
    "section": "4.1 1st Order Point Spatial Patterns",
    "text": "4.1 1st Order Point Spatial Patterns\nWe will be computing the kernel density estimate with non-functional and functional water point side by side.\n\nkde_nonfunc_wp_bw <- density(kde_nonfunc_wp_bw.km,\n                  sigma = bw.diggle,\n                  edge = TRUE,\n                  kernel = \"gaussian\")\n\nkde_func_wp_bw <- density(kde_func_wp_bw.km,\n                  sigma = bw.diggle,\n                  edge = TRUE,\n                  kernel = \"gaussian\")\n\npar(mfrow = c(1,2))\nplot(kde_nonfunc_wp_bw, main = \"Non-Functional Water Points\")\nplot(kde_func_wp_bw, main = \"Functional Water Points\")\n\n\n\n\n\n4.1.2 Converting KDE output into grid object\nWe convert it so that it is suitable for mapping purposes.\n\ngridded_kde_func_wp_bw <- as.SpatialGridDataFrame.im(kde_func_wp_bw)\nspplot(gridded_kde_func_wp_bw)\n\n\n\ngridded_kde_nonfunc_wp_bw <- as.SpatialGridDataFrame.im(kde_nonfunc_wp_bw)\nspplot(gridded_kde_nonfunc_wp_bw)\n\n\n\n\n\n\n4.1.3 Converting Gridded output into Raster\nBy using raster(), we are able to converted the gridded object.\n\nkde_func_wp_bw_raster <- raster(gridded_kde_func_wp_bw)\n\nkde_nonfunc_wp_bw_raster <- raster(gridded_kde_nonfunc_wp_bw)\n\nkde_func_wp_bw_raster\n\nclass      : RasterLayer \ndimensions : 128, 128, 16384  (nrow, ncol, ncell)\nresolution : 0.8948485, 0.9616045  (x, y)\nextent     : 176.5032, 291.0438, 331.4347, 454.5201  (xmin, xmax, ymin, ymax)\ncrs        : NA \nsource     : memory\nnames      : v \nvalues     : -4.734822e-15, 25.49435  (min, max)\n\nkde_nonfunc_wp_bw_raster\n\nclass      : RasterLayer \ndimensions : 128, 128, 16384  (nrow, ncol, ncell)\nresolution : 0.8948485, 0.9616045  (x, y)\nextent     : 176.5032, 291.0438, 331.4347, 454.5201  (xmin, xmax, ymin, ymax)\ncrs        : NA \nsource     : memory\nnames      : v \nvalues     : -4.082312e-15, 20.49412  (min, max)\n\n\n\n\n4.1.4 Assigning projection systems for Raster\nImportant that the projection is set to 26392, so let us change that.\n\nprojection(kde_func_wp_bw_raster) <- CRS(\"+init=EPSG:26392 +units=km\")\nkde_func_wp_bw_raster\n\nclass      : RasterLayer \ndimensions : 128, 128, 16384  (nrow, ncol, ncell)\nresolution : 0.8948485, 0.9616045  (x, y)\nextent     : 176.5032, 291.0438, 331.4347, 454.5201  (xmin, xmax, ymin, ymax)\ncrs        : +proj=tmerc +lat_0=4 +lon_0=8.5 +k=0.99975 +x_0=670553.98 +y_0=0 +a=6378249.145 +rf=293.465 +units=km +no_defs \nsource     : memory\nnames      : v \nvalues     : -4.734822e-15, 25.49435  (min, max)\n\nprojection(kde_nonfunc_wp_bw_raster) <- CRS(\"+init=EPSG:26392 +units=km\")\nkde_nonfunc_wp_bw_raster\n\nclass      : RasterLayer \ndimensions : 128, 128, 16384  (nrow, ncol, ncell)\nresolution : 0.8948485, 0.9616045  (x, y)\nextent     : 176.5032, 291.0438, 331.4347, 454.5201  (xmin, xmax, ymin, ymax)\ncrs        : +proj=tmerc +lat_0=4 +lon_0=8.5 +k=0.99975 +x_0=670553.98 +y_0=0 +a=6378249.145 +rf=293.465 +units=km +no_defs \nsource     : memory\nnames      : v \nvalues     : -4.082312e-15, 20.49412  (min, max)"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex01.html#visualising-the-output-in-tmap",
    "href": "Take-home_Ex/Take-home_Ex01.html#visualising-the-output-in-tmap",
    "title": "Take-home Exercise 1",
    "section": "4.2 Visualising the Output in Tmap",
    "text": "4.2 Visualising the Output in Tmap\nBy using the OpenStreetMap together with the raster layer, we are able to visualise Osun. A zoom limit is also fixed so that we will not lose sight of the state.\n\ntmap_mode(\"view\") \ntm_basemap(server =\"OpenStreetMap\") + \ntm_shape(kde_func_wp_bw_raster) + \n  tm_raster(\"v\") +\n  tm_layout(legend.position = c(\"right\", \"bottom\"), frame = FALSE) +\n   tm_view(set.zoom.limits =c(9, 14))\n\n\n\n\n\n\ntmap_mode(\"view\") \ntm_basemap(server =\"OpenStreetMap\") + \ntm_shape(kde_nonfunc_wp_bw_raster) + \n  tm_raster(\"v\") +\n  tm_layout(legend.position = c(\"right\", \"bottom\"), frame = FALSE) +\n  tm_view(set.zoom.limits =c(9, 14)) +\n  tm_basemap(server =\"OpenStreetMap\")"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex01.html#l-function",
    "href": "Take-home_Ex/Take-home_Ex01.html#l-function",
    "title": "Take-home Exercise 1",
    "section": "5.1 L Function",
    "text": "5.1 L Function\nWe will be using the L-function to calculate an estimate for a spatial point pattern. The Lest function is usable for any ppp object. More information can be found here.\nWe will start with Functional Water Point\n\nL_fun = Lest(owin_func_wp_ppp, correction = \"Ripley\")\nplot(L_fun, . -r ~ r, ylab= \"L(d)-r\", xlab = \"d(m)\")\n\n\nNext, Non-Functional Water Point\n\nL_nonfun = Lest(owin_nonfunc_wp_ppp, correction = \"Ripley\")\nplot(L_nonfun, . -r ~ r, ylab= \"L(d)-r\", xlab = \"d(m)\")"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex01.html#performing-complete-spatial-randomness-test",
    "href": "Take-home_Ex/Take-home_Ex01.html#performing-complete-spatial-randomness-test",
    "title": "Take-home Exercise 1",
    "section": "5.1.2 Performing Complete Spatial Randomness Test",
    "text": "5.1.2 Performing Complete Spatial Randomness Test\nWe will be creating an envelop to run a stimulation at 39, which is equivalent to 95% confidence interval. If P value falls below 0.005, we reject H0.\nThe H0 and H1 are as follows:\nH0 : The distribution of functional/non-functional water points in Osun State are randomly distributed\nH1 : The distribution of functional/non-functional water points in Osun State are not randomly distributed\n\nL_FWP_test <- envelope(owin_func_wp_ppp, Lest, nsim = 39, rank = 1, glocal=TRUE)\n\nplot(L_fun.csr, . - r ~ r, xlab=\"d\", ylab=\"L(d)-r\", xlim=c(0,500))\n\n\n\nL_NFWP_test <- envelope(owin_nonfunc_wp_ppp, Lest, nsim = 39, rank = 1, glocal=TRUE)\n\nplot(L_nonfun.csr, . - r ~ r,  xlab=\"d\", ylab=\"L(d)-r\", xlim=c(0,500))\n\n\nFrom running the simulations, we can therefore conclude that as both black lines for functional and non-functional water point falls outside the 95% confidence interval, we reject H0, and accept that the water points in Osun states are not randomly distributed, which also implies that there is a reason for the placement of water points around the Osun state and in this case, based on the population density."
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex01.html#combining-ppp-value-together",
    "href": "Take-home_Ex/Take-home_Ex01.html#combining-ppp-value-together",
    "title": "Take-home Exercise 1",
    "section": "6.1 Combining ppp value together",
    "text": "6.1 Combining ppp value together\nAs there are many categories that are classified under functional and non-functional data, let us\n\nwp_functional$status_clean[1:length(wp_functional$status_clean)] <- \"Functional\"\n\nwp_nonfunctional$status_clean[1:length(wp_nonfunctional$status_clean)] <- \"Non-Functional\"\n\nLet us combine both functional and non-functional water points together\n\nwp_tgt <- bind_rows(wp_functional, wp_nonfunctional)\n\nwp_tgt\n\nSimple feature collection with 4809 features and 1 field\nGeometry type: POINT\nDimension:     XY\nBounding box:  xmin: 177285.9 ymin: 340054.1 xmax: 290751 ymax: 450859.7\nProjected CRS: Minna / Nigeria Mid Belt\n# A tibble: 4,809 × 2\n   status_clean            Geometry\n * <chr>                <POINT [m]>\n 1 Functional     (212810 386707.6)\n 2 Functional   (228798.9 403822.5)\n 3 Functional   (270497.9 377476.9)\n 4 Functional     (212202 349210.1)\n 5 Functional   (259331.9 399591.4)\n 6 Functional     (195484 404733.2)\n 7 Functional   (221302.3 389473.6)\n 8 Functional   (263254.1 382692.9)\n 9 Functional     (192484.1 405113)\n10 Functional       (252736 373593)\n# … with 4,799 more rows"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex01.html#transforming-of-object",
    "href": "Take-home_Ex/Take-home_Ex01.html#transforming-of-object",
    "title": "Take-home Exercise 1",
    "section": "6.2 Transforming of Object",
    "text": "6.2 Transforming of Object\nTo visualise the data, we will be converting sf to sp, sp to sfdf, df to ppp, and ppp to owin object.\n\nwp_tgt_sp <- as(wp_tgt, \"Spatial\")\nwp_tgt_spdf <- as(wp_tgt_sp, \"SpatialPointsDataFrame\")\nwp_tgt_ppp <- as(wp_tgt_spdf, \"ppp\")\nwp_tgt_owin_ppp <- wp_tgt_ppp[owin_osun]\n\nPlotting the Data\n\nplot(wp_tgt_owin_ppp, main = \"Water Points By Functionality\", which.marks = \"status_clean\")\n\n\n\n\nSimilarly, we can get a better view on it on tmap\n\ntmap_mode(\"view\")\ntm_shape(osun)+\n  tm_polygons()+\n  tm_shape(wp_tgt)+\n  tm_dots(col=\"status_clean\") +\n   tm_view(set.zoom.limits =c(9, 14))"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex01.html#cross-l-function-analysis",
    "href": "Take-home_Ex/Take-home_Ex01.html#cross-l-function-analysis",
    "title": "Take-home Exercise 1",
    "section": "6.3 Cross L-Function Analysis",
    "text": "6.3 Cross L-Function Analysis\nAs we have already derived that the water points are not random, we will now be testing the independence between functional and non-functional water point to see the dependence, if there is.\nH0 : The location of functional and non-functional water points in Osun State are independent from each other.\nH1 : The location of functional and non-functional water points in Osun State are not independent from each other.\nSimilarly, we will using the 95% confidence level.\n\nLcross_wp <- envelope(wp_tgt_owin_ppp,\n                      Lcross,\n                      i = \"Functional\",\n                      j = \"Non-Functional\",\n                      correction = \"border\",\n                      nsim = 39)\nplot(Lcross_wp, xlim = c(0,10000))\n\n\nFrom the plot, we can see that there is spatial dependence for 5500 < r < 6800 as it is within the confidence level of 95%."
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex01.html#local-colocation-quotients-lclq",
    "href": "Take-home_Ex/Take-home_Ex01.html#local-colocation-quotients-lclq",
    "title": "Take-home Exercise 1",
    "section": "6.4 Local Colocation Quotients (LCLQ)",
    "text": "6.4 Local Colocation Quotients (LCLQ)\n\n6.4.1 Preperation\nPreparing nearest neighbours list\n\nnb <- include_self(\n  st_knn(st_geometry(wp_sf_nga),6))\n\nComputing the Kernel weights\n\nwt <- st_kernel_weights(nb, wp_sf_nga, \"gaussian\", adaptive = TRUE)\n\n\n\n6.4.2 Calculating Local Colocation Quotient\n\nA <- wp_functional$status_clean\n\nB <- wp_nonfunctional$status_clean\n\nLCLQ <- local_colocation(A,B, nb, wt, 39)\n\n\n\n6.4.3 Joining output Table\n\nLCLQ_WP <- cbind(wp_sf_nga, LCLQ) %>%\n  na.exclude()\n\n\n\n6.4.4 Plotting LCLQ using tmap\n\ntmap_mode(\"view\")\ntm_shape(osun) +\n  tm_polygons() +\ntm_shape(LCLQ_WP) +\n  tm_dots(col = \"Non.Functional\",\n          size = 0.01,\n          border.col = \"black\",\n          border.lwd = 0.5) +\ntm_shape(LCLQ_WP) +\n  tm_dots(col = \"p_sim_Non.Functional\",\n          size = 0.01,\n          border.col = \"black\",\n          border.lwd = 0.5) +\n   tm_view(set.zoom.limits =c(9, 14))\n\n\n\n\n\n\nFrom the p value 0.025 < 0.05, we can see that the result is significant. Since this is the case, we can reject H0 and accept H1, which tells us that functional and non-functional water points are dependant on each other.\n\ntmap_mode(\"plot\")"
  },
  {
    "objectID": "In-class_Ex/In-class_Ex03/In-class_Ex03.html",
    "href": "In-class_Ex/In-class_Ex03/In-class_Ex03.html",
    "title": "In Class Exercise 3: Analytical Mapping",
    "section": "",
    "text": "#Installing and loading packages"
  },
  {
    "objectID": "In-class_Ex/In-class_Ex03/In-class_Ex03.html#visualising-distribution-of-non-functional-water-point",
    "href": "In-class_Ex/In-class_Ex03/In-class_Ex03.html#visualising-distribution-of-non-functional-water-point",
    "title": "In Class Exercise 3: Analytical Mapping",
    "section": "1.1 Visualising distribution of non-functional water point",
    "text": "1.1 Visualising distribution of non-functional water point\n\n\nShow code\np1 <- tm_shape(NGA_wp) +\n  tm_fill(\"wp_functional\", \n          n= 10,\n          style = \"equal\",\n          palette =\"Blues\") +\n  tm_borders(lwd = 0.1, \n             alpha = 1) +\n  tm_layout(main.title = \"Distribution of functional water\",\n            legend.outside = FALSE)\n\n# n = 10 indicates 10 range of colors\n# style = equal indicates the distribution of data, in this case, equal refers to equal difference per range as per seen in the plot\n\n\n\n\nShow code\np2 <- tm_shape(NGA_wp) +\n  tm_fill(\"total_wp\", \n          n= 10,\n          style = \"equal\",\n          palette =\"Blues\") +\n  tm_borders(lwd = 0.1, \n             alpha = 1) +\n  tm_layout(main.title = \"Distribution of total water point\",\n            legend.outside = FALSE)\n\n\nArrange both maps into 1 visualisation\n\n\nShow code\ntmap_arrange(p2, p1, nrow = 1)"
  },
  {
    "objectID": "In-class_Ex/In-class_Ex03/In-class_Ex03.html#deriving-proportion-of-functional-water-points-and-non-functional-waterpoints",
    "href": "In-class_Ex/In-class_Ex03/In-class_Ex03.html#deriving-proportion-of-functional-water-points-and-non-functional-waterpoints",
    "title": "In Class Exercise 3: Analytical Mapping",
    "section": "2.1 Deriving Proportion of Functional Water Points and Non-Functional WaterPoints",
    "text": "2.1 Deriving Proportion of Functional Water Points and Non-Functional WaterPoints\n\n\nShow code\nNGA_wp <- NGA_wp %>%\n  mutate(pct_functional = wp_functional/total_wp) %>%\n  mutate(pct_non_functional = wp_nonfunctional/total_wp)\n\n\n\n\nShow code\np3 <- tm_shape(NGA_wp) +\n  tm_fill(\"pct_functional\",\n          n = 10,\n          style = \"equal\",\n          palette = \"Blues\") +\n  tm_borders(lwd= 0.1, \n             alpha = 1) +\n  tm_layout(main.title = \"Distribution of Proportion of\\nFunctional WaterPoints\",\n            legend.outside = FALSE)\n\np4 <- tm_shape(NGA_wp) +\n  tm_fill(\"pct_non_functional\",\n          n = 10,\n          style = \"equal\",\n          palette = \"Blues\") +\n  tm_borders(lwd= 0.1, \n             alpha = 1) +\n  tm_layout(main.title = \"Distribution of Proportion of\\nNon_Functional WaterPoints\",\n            legend.outside = FALSE)\n\ntmap_arrange(p4, p3, nrow = 1)"
  },
  {
    "objectID": "In-class_Ex/In-class_Ex03/In-class_Ex03.html#percentile-map",
    "href": "In-class_Ex/In-class_Ex03/In-class_Ex03.html#percentile-map",
    "title": "In Class Exercise 3: Analytical Mapping",
    "section": "3.1 Percentile Map",
    "text": "3.1 Percentile Map\nStep 1: Exclude records with NA\n\n\nShow code\nNGA_wp <- NGA_wp %>%\n  drop_na()\n\n\nStep 2: Creating customised classification\n\n\nShow code\npercent <- c(0,.01,.1,.5,.9,.99,1)\nvar <- NGA_wp[\"pct_functional\"] %>%\n  st_set_geometry(NULL)\nquantile(var[,1], percent)\n\n\n        0%         1%        10%        50%        90%        99%       100% \n0.00000000 0.01818182 0.18181818 0.41666667 0.76086957 1.00000000 1.00000000 \n\n\nShow code\n# NULL forces NGA_wp[\"pct_functional\"] into var (dataframe)\n\n\n\n\nShow code\nget.var <- function(vname, df) {\n  v <- df[vname] %>%\n    st_set_geometry(NULL)\n  v <- unname(v[,1])\n  return(v)\n}\n\n\n\n\nShow code\npercentmap <- function(vnam, df, legtitle=NA, mtitle = \"Percentile Map\"){\n  percent <- c(0,.01,.1,.5,.9,.99,1)\n  var <- get.var(vnam, df)\n  bperc <- quantile(var, percent)\n  tm_shape(df) + \n    tm_polygons() + \n    tm_shape(df) +\n    tm_fill(vnam,\n            title = legtitle,\n            breaks=bperc,\n            palette=\"Blues\",\n            labels = c(\"< 1%\",\"1% - 10%\", \"10% - 50%\", \"50% - 90%\", \"90% - 99%\", \">99%\")) +\n    tm_borders() +\n    tm_layout(main.title = mtitle, \n              title.position = c(\"right\", \"bottom\"))\n}\n\npercentmap(\"pct_functional\", NGA_wp,)"
  },
  {
    "objectID": "In-class_Ex/In-class_Ex03/In-class_Ex03.html#box-map",
    "href": "In-class_Ex/In-class_Ex03/In-class_Ex03.html#box-map",
    "title": "In Class Exercise 3: Analytical Mapping",
    "section": "3.2 Box map",
    "text": "3.2 Box map"
  },
  {
    "objectID": "In-class_Ex/In-class_Ex04/In-class_Ex04.html",
    "href": "In-class_Ex/In-class_Ex04/In-class_Ex04.html",
    "title": "In class exercise 4",
    "section": "",
    "text": "Getting started\n\npacman::p_load(maptools, sf, raster, spatstat, tmap)\n\n\nImporting the spatial data\n\nchildcare_sf <- st_read(\"data/child-care-services-geojson.geojson\") %>% st_transform(crs = 3414)\n\nReading layer `child-care-services-geojson' from data source \n  `/Users/keredpoh/Desktop/keredpoh/IS415-GAA/In-class_Ex/In-class_Ex04/data/child-care-services-geojson.geojson' \n  using driver `GeoJSON'\nSimple feature collection with 1545 features and 2 fields\nGeometry type: POINT\nDimension:     XYZ\nBounding box:  xmin: 103.6824 ymin: 1.248403 xmax: 103.9897 ymax: 1.462134\nz_range:       zmin: 0 zmax: 0\nGeodetic CRS:  WGS 84\n\n\n\nsg_sf <- st_read(dsn = \"data\", layer=\"CostalOutline\")\n\nReading layer `CostalOutline' from data source \n  `/Users/keredpoh/Desktop/keredpoh/IS415-GAA/In-class_Ex/In-class_Ex04/data' \n  using driver `ESRI Shapefile'\nSimple feature collection with 60 features and 4 fields\nGeometry type: POLYGON\nDimension:     XY\nBounding box:  xmin: 2663.926 ymin: 16357.98 xmax: 56047.79 ymax: 50244.03\nProjected CRS: SVY21\n\n\n\nmpsz_sf <- st_read(dsn = \"data\", \n                layer = \"MP14_SUBZONE_WEB_PL\")\n\nReading layer `MP14_SUBZONE_WEB_PL' from data source \n  `/Users/keredpoh/Desktop/keredpoh/IS415-GAA/In-class_Ex/In-class_Ex04/data' \n  using driver `ESRI Shapefile'\nSimple feature collection with 323 features and 15 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 2667.538 ymin: 15748.72 xmax: 56396.44 ymax: 50256.33\nProjected CRS: SVY21\n\n\n\n\nConverting sf data frames to sp’s Spatial class\n\nchildcare <- as_Spatial(childcare_sf)\nmpsz <- as_Spatial(mpsz_sf)\nsg <- as_Spatial(sg_sf)\n\n\n\nConverting the Spatial class into generic sp format\n\nchildcare_sp <- as(childcare, \"SpatialPoints\")\nsg_sp <- as(sg, \"SpatialPolygons\")\n\n\n\nConverting the generic sp format into spatstat’s ppp format\n\nchildcare_ppp <- as(childcare_sp, \"ppp\")\nchildcare_ppp\n\nPlanar point pattern: 1545 points\nwindow: rectangle = [11203.01, 45404.24] x [25667.6, 49300.88] units\n\n\n\n\nHandling duplicate object\n\nchildcare_ppp_jit <- rjitter(childcare_ppp, \n                             retry=TRUE, \n                             nsim=1, \n                             drop=TRUE)\n\nany(duplicated(childcare_ppp_jit))\n\n[1] FALSE\n\n\n\nplot(childcare_ppp)\n\n\n\n\n\ntmap_mode('view') +\n  tm_shape(childcare) +\n  tm_dots(alpha = 0.5,\n          size = 0.01) +\n  tm_view(set.zoom.limits = c(11,14))\n\n\n\n\n\n\n\n\nCreating owin object\n\nsg_owin <- as(sg_sp, \"owin\")\n\n\nplot(sg_owin)\n\n\n\n\n\nchildcareSG_ppp = childcare_ppp[sg_owin]\n\n\n\nComputing kernel density estimation using automatic bandwidth selection method\n\nkde_childcareSG_bw <- density(childcareSG_ppp,\n                              sigma=bw.diggle,\n                              edge=TRUE,\n                            kernel=\"gaussian\") \n\n\nplot(kde_childcareSG_bw)\n\n\n\n\n\nbw <- bw.diggle(childcareSG_ppp)\nbw\n\n   sigma \n298.4095 \n\n\n\n\nRescalling KDE values\n\nchildcareSG_ppp.km <- rescale(childcareSG_ppp, 1000, \"km\")\n\n\nkde_childcareSG.bw <- density(childcareSG_ppp.km, sigma=bw.diggle, edge=TRUE, kernel=\"gaussian\")\nplot(kde_childcareSG.bw)"
  },
  {
    "objectID": "In-class_Ex/In-class_Ex05/In-class_Ex05.html",
    "href": "In-class_Ex/In-class_Ex05/In-class_Ex05.html",
    "title": "In class exercise 5",
    "section": "",
    "text": "#Gettin started\n\npacman::p_load(tidyverse, tmap, sf, sfdep)\n\n#Importing data\n\nstudyArea <- st_read(dsn = 'data',\n                    layer = 'study_area') %>%\n  st_transform(crs = 3829)\n\nReading layer `study_area' from data source \n  `/Users/keredpoh/Desktop/keredpoh/IS415-GAA/In-class_Ex/In-class_Ex05/data' \n  using driver `ESRI Shapefile'\nSimple feature collection with 7 features and 7 fields\nGeometry type: POLYGON\nDimension:     XY\nBounding box:  xmin: 121.4836 ymin: 25.00776 xmax: 121.592 ymax: 25.09288\nGeodetic CRS:  TWD97\n\n\n\nstores <- st_read(dsn = 'data',\n                    layer = 'stores') %>%\n  st_transform(crs = 3829)\n\nReading layer `stores' from data source \n  `/Users/keredpoh/Desktop/keredpoh/IS415-GAA/In-class_Ex/In-class_Ex05/data' \n  using driver `ESRI Shapefile'\nSimple feature collection with 1409 features and 4 fields\nGeometry type: POINT\nDimension:     XY\nBounding box:  xmin: 121.4902 ymin: 25.01257 xmax: 121.5874 ymax: 25.08557\nGeodetic CRS:  TWD97\n\n\n#Plotting of maps\n\ntmap_mode('view')\ntm_shape(studyArea) +\n  tm_polygons() +\n  tm_shape(stores) +\n    tm_dots(col = 'Name',\n           size = 0.01,\n           border.col = 'black',\n           border.lwd = 0.5) +\n  tm_view(set.zoom.limits = c(12,16))\n\n\n\n\n\n\n#Local Colocation Quotients (LCLQ)\n\nnb <- include_self(\n  st_knn(st_geometry(stores), 6))\n\nwt <- st_kernel_weights(nb, stores, 'gaussian',\n                         adaptive = TRUE)\n\nFamilyMart <- stores %>%\n  filter(Name == 'Family Mart')\n  \nA <- FamilyMart$Name\n\nSevenEleven <- stores %>%\n  filter(Name == '7-Eleven')\n\nB <- SevenEleven$Name\n\nLCLQ <- local_colocation(A, B, nb, wt, 49)\n\nLCLQ_stores <- cbind(stores, LCLQ)\n\n\ntmap_mode(\"view\") \n\ntm_shape(studyArea) +   \n  tm_polygons() +\n  tm_shape(LCLQ_stores) + \n  tm_dots(col = \"X7.Eleven\", size = 0.01,border.col = \"black\", border.lwd = 0.5) + \n  tm_view(set.zoom.limits = c(12,16))"
  },
  {
    "objectID": "In-class_Ex/In-class_Ex05/data/study_area.html",
    "href": "In-class_Ex/In-class_Ex05/data/study_area.html",
    "title": "IS415-GAA",
    "section": "",
    "text": "<!DOCTYPE qgis PUBLIC ‘http://mrcc.com/qgis.dtd’ ‘SYSTEM’>     dataset\n\n\n        0 0     false"
  },
  {
    "objectID": "In-class_Ex/In-class_Ex05/data/stores.html",
    "href": "In-class_Ex/In-class_Ex05/data/stores.html",
    "title": "IS415-GAA",
    "section": "",
    "text": "<!DOCTYPE qgis PUBLIC ‘http://mrcc.com/qgis.dtd’ ‘SYSTEM’>     \n\n\n        0 0     false"
  },
  {
    "objectID": "In-class_Ex/In-class_Ex02/In-class_Ex02.html",
    "href": "In-class_Ex/In-class_Ex02/In-class_Ex02.html",
    "title": "In Class Exercise 2: Geospatial Data Wrangling",
    "section": "",
    "text": "Water is an important resource to mankind. Clean and accessible water is critical to human health. It provides a healthy environment, a sustainable economy, reduces poverty and ensures peace and security. Yet over 40% of the global population does not have access to sufficient clean water. By 2025, 1.8 billion people will be living in countries or regions with absolute water scarcity, according to UN-Water. The lack of water poses a major threat to several sectors, including food security. Agriculture uses about 70% of the world’s accessible freshwater.\nDeveloping countries are most affected by water shortages and poor water quality. Up to 80% of illnesses in the developing world are linked to inadequate water and sanitation. Despite technological advancement, providing clean water to the rural community is still a major development issues in many countries globally, especially countries in the Africa continent.\nTo address the issue of providing clean and sustainable water supply to the rural community, a global Water Point Data Exchange (WPdx) project has been initiated. The main aim of this initiative is to collect water point related data from rural areas at the water point or small water scheme level and share the data via WPdx Data Repository, a cloud-based data library. What is so special of this project is that data are collected based on WPDx Data Standard.\n\n\nThe specific tasks of this take-home exercise are as follows:\n\nUsing appropriate sf method, import the shapefile into R and save it in a simple feature data frame format. Note that there are three Projected Coordinate Systems of Nigeria, they are: EPSG: 26391, 26392, and 26303. You can use any one of them.\nUsing appropriate tidyr and dplyr methods, derive the proportion of functional and non-functional water point at LGA level.\nCombining the geospatial and aspatial data frame into simple feature data frame.\nVisualising the distribution of water point by using appropriate analytical visualisation methods."
  },
  {
    "objectID": "In-class_Ex/In-class_Ex02/In-class_Ex02.html#importing-aspatial-data",
    "href": "In-class_Ex/In-class_Ex02/In-class_Ex02.html#importing-aspatial-data",
    "title": "In Class Exercise 2: Geospatial Data Wrangling",
    "section": "3.1 Importing Aspatial data",
    "text": "3.1 Importing Aspatial data\nUse filter to extract only “Nigeria”\n\n\nShow code\nwp_nga <- read_csv(file = \"data/aspatial/WPdx.csv\") |>\n  filter(`#clean_country_name` == \"Nigeria\")"
  },
  {
    "objectID": "In-class_Ex/In-class_Ex02/In-class_Ex02.html#checking-duplicate-name-and-amending-them",
    "href": "In-class_Ex/In-class_Ex02/In-class_Ex02.html#checking-duplicate-name-and-amending-them",
    "title": "In Class Exercise 2: Geospatial Data Wrangling",
    "section": "5.1 Checking duplicate name and amending them",
    "text": "5.1 Checking duplicate name and amending them\n\nNGA$ADM2_EN[duplicated(NGA$ADM2_EN) == TRUE]\n\n[1] \"Bassa\"    \"Ifelodun\" \"Irepodun\" \"Nasarawa\" \"Obi\"      \"Surulere\"\n\n\nCorrect the areas as they are located in different states\n\nNGA$ADM2_EN[94] <- \"Bassa, Kogi\"\nNGA$ADM2_EN[95] <- \"Bassa, Plateau\"\nNGA$ADM2_EN[304] <- \"Ifelodun, Kwara\"\nNGA$ADM2_EN[305] <- \"Ifelodun, Osun\"\nNGA$ADM2_EN[355] <- \"Irepodun, Kwara\"\nNGA$ADM2_EN[356] <- \"Irepodun, Osun\"\nNGA$ADM2_EN[519] <- \"Nasarawa, Kano\"\nNGA$ADM2_EN[520] <- \"Nasarawa, Nasarawa\"\nNGA$ADM2_EN[546] <- \"Obi, Benue\"\nNGA$ADM2_EN[547] <- \"Obi, Nasarawa\"\nNGA$ADM2_EN[693] <- \"Surulere, Lagos\"\nNGA$ADM2_EN[694] <- \"Surulere, Oyo\"\n\nRerun code to check\n\n\nShow code\nNGA$ADM2_EN[duplicated(NGA$ADM2_EN) == TRUE]\n\n\ncharacter(0)"
  },
  {
    "objectID": "In-class_Ex/In-class_Ex02/In-class_Ex02.html#extracting-water-point-data",
    "href": "In-class_Ex/In-class_Ex02/In-class_Ex02.html#extracting-water-point-data",
    "title": "In Class Exercise 2: Geospatial Data Wrangling",
    "section": "6.1 Extracting Water Point Data",
    "text": "6.1 Extracting Water Point Data\nFilter based on functional, non_functional and unknown respectively.\n\nwp_functional <- wp_sf_nga %>%\n  filter(status_clean %in%\n           c(\"Functional\",\n             \"Functional but not in use\",\n             \"Functional but needs repair\"))\n\n\nwp_nonfunctional <- wp_sf_nga %>% \n  filter(status_clean %in% \n           c(\"Abandoned/Decommissioned\",\n             \"Abandoned\",\n             \"Non-Functional due to dry season\",\n             \"Non-Functional\",\n             \"Non functional due to dry season\"))\n\n\nwp_unknown <- wp_sf_nga %>%\n  filter(status_clean %in% \"unknown\")\n\n\nfreq(data = wp_functional,\n     input = 'status_clean')\n\n\n\n\n                 status_clean frequency percentage cumulative_perc\n1                  Functional     47228      99.81           99.81\n2   Functional but not in use        86       0.18           99.99\n3 Functional but needs repair         4       0.01          100.00\n\n\n\nfreq(data = wp_nonfunctional,\n     input = 'status_clean')\n\n\n\n\n                      status_clean frequency percentage cumulative_perc\n1                   Non-Functional     30638      98.94           98.94\n2         Abandoned/Decommissioned       321       1.04           99.98\n3 Non-Functional due to dry season         7       0.02          100.00\n\n\n\nfreq(data = wp_unknown,\n     input = 'status_clean')\n\n\n\n\n  status_clean frequency percentage cumulative_perc\n1      unknown     10154        100             100"
  },
  {
    "objectID": "In-class_Ex/In-class_Ex02/In-class_Ex02.html#performing-point-in-polygon-count",
    "href": "In-class_Ex/In-class_Ex02/In-class_Ex02.html#performing-point-in-polygon-count",
    "title": "In Class Exercise 2: Geospatial Data Wrangling",
    "section": "6.2 Performing Point-in-Polygon Count",
    "text": "6.2 Performing Point-in-Polygon Count\n\nNGA_wp <- NGA %>%\n  mutate(`total_wp` = lengths(\n    st_intersects(NGA, wp_sf_nga))) %>%\n  mutate(`wp_functional` = lengths(\n    st_intersects(NGA, wp_functional))) %>%\n  mutate(`wp_nonfunctional` = lengths(\n    st_intersects(NGA, wp_nonfunctional))) %>%\n  mutate(`wp_unknown` = lengths(\n    st_intersects(NGA, wp_unknown)))"
  },
  {
    "objectID": "In-class_Ex/In-class_Ex02/In-class_Ex02.html#visualing-attributes-by-using-statistical-graph",
    "href": "In-class_Ex/In-class_Ex02/In-class_Ex02.html#visualing-attributes-by-using-statistical-graph",
    "title": "In Class Exercise 2: Geospatial Data Wrangling",
    "section": "6.3 Visualing attributes by using statistical graph",
    "text": "6.3 Visualing attributes by using statistical graph\n\n\nShow code\nggplot(data = NGA_wp,\n       aes(x = total_wp)) +\n  geom_histogram(bins = 20, \n                 color = \"black\",\n                 fill =\"light blue\") +\n  geom_vline(aes(xintercept=mean(total_wp, na.rm=T)),\n             color = \"red\", linetype=\"dashed\", size = 0.8) +\n  xlab(\"No of water points\") +\n  ylab(\"No. of\\nLGAs\") +\n  theme(axis.title.y = element_text(angle = 0))\n\n\n\n\n\n\n\nShow code\nwrite_rds(NGA_wp, \"data/rds/NGA_wp.rds\")"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex_01/Take-home_Ex01.html",
    "href": "Take-home_Ex/Take-home_Ex_01/Take-home_Ex01.html",
    "title": "Take-home Exercise 1",
    "section": "",
    "text": "Locally, we are all blessed with clean and accessible water. However, this is not the case for less developed countries, especially in the rural regions of Africa. In this Take Home Assignment, we will be putting spatial data into good use, by looking at the number of functional and non functional water points to better understand the needs and the situation of Osun, which is a rural state in Nigeria.\n\n\nThese will be the packages that will be used in this assignment.\n\npacman::p_load(sf, funModeling,maptools,raster, spatstat, tmap , tidyverse, sfdep) \n\n\n\n\nWe will be using data from the state boundary GIS data, that can be found on geoBoundaries\n\ngeoNGA <- st_read(\"data/geospatial/\",\n               layer = \"nga_admbnda_adm2_osgof_20190417\")\n\nReading layer `nga_admbnda_adm2_osgof_20190417' from data source \n  `/Users/keredpoh/Desktop/keredpoh/IS415-GAA/Take-home_Ex/Take-home_Ex_01/data/geospatial' \n  using driver `ESRI Shapefile'\nSimple feature collection with 774 features and 16 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 2.668534 ymin: 4.273007 xmax: 14.67882 ymax: 13.89442\nGeodetic CRS:  WGS 84\n\n\n\n\n\nWe will be using data from the WPdx Global Data Repositories, while we narrow down to the state of Osun using the filter function.\n\nwp_nga <- read_csv(\"data/aspatial/WPdx.csv\") %>%\n  filter(`#clean_adm1`==\"Osun\")"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex_01/Take-home_Ex01.html#geospatial-data",
    "href": "Take-home_Ex/Take-home_Ex_01/Take-home_Ex01.html#geospatial-data",
    "title": "Take-home Exercise 1",
    "section": "2.1 Geospatial Data",
    "text": "2.1 Geospatial Data\n\n2.1.1 Checking for Duplicates\nBefore continuing, we will check for duplicates and replace them if necessary. From running this code, we found out that there are a few duplicates.\n\ngeoNGA$ADM2_EN[duplicated(geoNGA$ADM2_EN) == TRUE]\n\n[1] \"Bassa\"    \"Ifelodun\" \"Irepodun\" \"Nasarawa\" \"Obi\"      \"Surulere\"\n\n\nWe will now be replacing the duplicates.\n\ngeoNGA$ADM2_EN[94] <- \"Bassa, Kogi\"\ngeoNGA$ADM2_EN[95] <- \"Bassa, Plateau\"\ngeoNGA$ADM2_EN[304] <- \"Ifelodun, Kwara\"\ngeoNGA$ADM2_EN[305] <- \"Ifelodun, Osun\"\ngeoNGA$ADM2_EN[355] <- \"Irepodun, Kwara\"\ngeoNGA$ADM2_EN[356] <- \"Irepodun, Osun\"\ngeoNGA$ADM2_EN[519] <- \"Nasarawa, Kano\"\ngeoNGA$ADM2_EN[520] <- \"Nasarawa, Nasarawa\"\ngeoNGA$ADM2_EN[546] <- \"Obi, Benue\"\ngeoNGA$ADM2_EN[547] <- \"Obi, Nasarawa\"\ngeoNGA$ADM2_EN[693] <- \"Surulere, Lagos\"\ngeoNGA$ADM2_EN[694] <- \"Surulere, Oyo\"\n\nWe will now run the same code again to check for duplicates. Since character(0), we are good to go.\n\ngeoNGA$ADM2_EN[duplicated(geoNGA$ADM2_EN) == TRUE]\n\ncharacter(0)\n\n\n\n\n2.1.2 Grouping Different Osun States Together\nAs there are different governed states in Osun, we will then group them into osun_state. This will be useful for our visualisation.\n\nosun_state <- c(\"Aiyedade\",\"Aiyedire\",\"Atakumosa East\",   \"Atakumosa West\", \"Ede North\",  \"Ede South\", \"Egbedore\", \"Ejigbo\", \"Ife Central\", \"Ife East\", \"Ife North\", \"Ife South\", \"Ifedayo\",  \"Ila\", \"Ifelodun, Osun\",\"Irepodun, Osun\",\"Ilesha East\",  \"Ilesha West\", \"Irewole\", \"Isokan\",   \"Iwo\", \"Obokun\", \"Odo-Otin\", \"Ola-oluwa\", \"Olorunda\", \"Oriade\", \"Orolu\",    \"Osogbo\", \"Boripe\", \"Boluwaduro\")\n\nosun <- geoNGA %>%\n  filter(ADM2_EN %in% osun_state)\n\n\n\n2.1.3 Transforming Projection for Osun\nAs EPSG:4326 is the global projection, we would want to transform it into the state of Nigeria. We are able to find that 26392 is projected at Nigeria through epsg.io.\n\nst_crs(osun)\n\nCoordinate Reference System:\n  User input: WGS 84 \n  wkt:\nGEOGCRS[\"WGS 84\",\n    DATUM[\"World Geodetic System 1984\",\n        ELLIPSOID[\"WGS 84\",6378137,298.257223563,\n            LENGTHUNIT[\"metre\",1]]],\n    PRIMEM[\"Greenwich\",0,\n        ANGLEUNIT[\"degree\",0.0174532925199433]],\n    CS[ellipsoidal,2],\n        AXIS[\"latitude\",north,\n            ORDER[1],\n            ANGLEUNIT[\"degree\",0.0174532925199433]],\n        AXIS[\"longitude\",east,\n            ORDER[2],\n            ANGLEUNIT[\"degree\",0.0174532925199433]],\n    ID[\"EPSG\",4326]]\n\nosun <- osun %>% st_transform(crs = 26392)\n\n\n\n2.1.4 Plotting Osun\nThis will help us visualise the shape of Osun.\n\nplot(osun)"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex_01/Take-home_Ex01.html#aspatial-data",
    "href": "Take-home_Ex/Take-home_Ex_01/Take-home_Ex01.html#aspatial-data",
    "title": "Take-home Exercise 1",
    "section": "2.2 Aspatial Data",
    "text": "2.2 Aspatial Data\n\n2.2.1 Converting Data of Water Points into SF Point Features\nAs mentioned in class, we will need to match the CRS to the EPSG. Before that, we will converting the WKT (well known text) data.\n\nwp_nga$Geometry = st_as_sfc(wp_nga$`New Georeferenced Column`)\nwp_nga\n\n# A tibble: 5,557 × 71\n   row_id `#source`      #lat_…¹ #lon_…² #repo…³ #stat…⁴ #wate…⁵ #wate…⁶ #wate…⁷\n    <dbl> <chr>            <dbl>   <dbl> <chr>   <chr>   <chr>   <chr>   <chr>  \n 1 429123 GRID3             8.02    5.06 08/29/… Unknown <NA>    <NA>    Tapsta…\n 2  70566 Federal Minis…    7.32    4.79 05/11/… No      Protec… Well    Mechan…\n 3  70578 Federal Minis…    7.76    4.56 05/11/… No      Boreho… Well    Mechan…\n 4  66401 Federal Minis…    8.03    4.64 04/30/… No      Boreho… Well    Mechan…\n 5 422190 GRID3             7.87    4.88 08/29/… Unknown <NA>    <NA>    Tapsta…\n 6 422064 GRID3             7.7     4.89 08/29/… Unknown <NA>    <NA>    Tapsta…\n 7  65607 Federal Minis…    7.89    4.71 05/12/… No      Boreho… Well    Mechan…\n 8  68989 Federal Minis…    7.51    4.27 05/07/… No      Boreho… Well    <NA>   \n 9  67708 Federal Minis…    7.48    4.35 04/29/… Yes     Boreho… Well    Mechan…\n10  66419 Federal Minis…    7.63    4.50 05/08/… Yes     Boreho… Well    Hand P…\n# … with 5,547 more rows, 62 more variables: `#water_tech_category` <chr>,\n#   `#facility_type` <chr>, `#clean_country_name` <chr>, `#clean_adm1` <chr>,\n#   `#clean_adm2` <chr>, `#clean_adm3` <chr>, `#clean_adm4` <chr>,\n#   `#install_year` <dbl>, `#installer` <chr>, `#rehab_year` <lgl>,\n#   `#rehabilitator` <lgl>, `#management_clean` <chr>, `#status_clean` <chr>,\n#   `#pay` <chr>, `#fecal_coliform_presence` <chr>,\n#   `#fecal_coliform_value` <dbl>, `#subjective_quality` <chr>, …\n\nwp_sf <- st_sf(wp_nga, crs = 4326)\nwp_sf\n\nSimple feature collection with 5557 features and 70 fields\nGeometry type: POINT\nDimension:     XY\nBounding box:  xmin: 4.032004 ymin: 7.060309 xmax: 5.06 ymax: 8.061898\nGeodetic CRS:  WGS 84\n# A tibble: 5,557 × 71\n   row_id `#source`      #lat_…¹ #lon_…² #repo…³ #stat…⁴ #wate…⁵ #wate…⁶ #wate…⁷\n *  <dbl> <chr>            <dbl>   <dbl> <chr>   <chr>   <chr>   <chr>   <chr>  \n 1 429123 GRID3             8.02    5.06 08/29/… Unknown <NA>    <NA>    Tapsta…\n 2  70566 Federal Minis…    7.32    4.79 05/11/… No      Protec… Well    Mechan…\n 3  70578 Federal Minis…    7.76    4.56 05/11/… No      Boreho… Well    Mechan…\n 4  66401 Federal Minis…    8.03    4.64 04/30/… No      Boreho… Well    Mechan…\n 5 422190 GRID3             7.87    4.88 08/29/… Unknown <NA>    <NA>    Tapsta…\n 6 422064 GRID3             7.7     4.89 08/29/… Unknown <NA>    <NA>    Tapsta…\n 7  65607 Federal Minis…    7.89    4.71 05/12/… No      Boreho… Well    Mechan…\n 8  68989 Federal Minis…    7.51    4.27 05/07/… No      Boreho… Well    <NA>   \n 9  67708 Federal Minis…    7.48    4.35 04/29/… Yes     Boreho… Well    Mechan…\n10  66419 Federal Minis…    7.63    4.50 05/08/… Yes     Boreho… Well    Hand P…\n# … with 5,547 more rows, 62 more variables: `#water_tech_category` <chr>,\n#   `#facility_type` <chr>, `#clean_country_name` <chr>, `#clean_adm1` <chr>,\n#   `#clean_adm2` <chr>, `#clean_adm3` <chr>, `#clean_adm4` <chr>,\n#   `#install_year` <dbl>, `#installer` <chr>, `#rehab_year` <lgl>,\n#   `#rehabilitator` <lgl>, `#management_clean` <chr>, `#status_clean` <chr>,\n#   `#pay` <chr>, `#fecal_coliform_presence` <chr>,\n#   `#fecal_coliform_value` <dbl>, `#subjective_quality` <chr>, …\n\n\n\n\n2.2.2 Transforming Projection\nSimilarly, we will have to change the projection of the Aspatial data to 26392.\n\nwp_sf <- wp_sf %>%\n  st_transform(crs = 26392)\n\n\n\n2.2.3 Plotting Frequency Data to Spot NA Values\nFrom this bar graph, we can see that there are NA values.\n\nstatus_cleam_graph <- funModeling::freq(data = wp_sf,\n     input = '#status_clean')\n\n\n\n\n\n\n2.2.4 Replacing NA Values\nWe will then replace the NA values to ‘unknown’.\n\nwp_sf_nga <- wp_sf %>% \n  rename(status_clean = '#status_clean') %>%\n dplyr::select(status_clean) %>%\n  mutate(status_clean = replace_na(\n    status_clean, \"unknown\"))\n\n\n\n2.2.5 Grouping data into Functional and Non-Functional Water Point\nFrom the graph above, we are able to group the different data into functional and non functional.\nWe will begin with functional Water Point.\n\nwp_functional <- wp_sf_nga %>% \n  filter(status_clean %in%\n           c(\"Functional\",\n             \"Functional but not in use\",\n             \"Functional but needs repair\"))\n\nNext, for Non-Functional Water Point.\n\nwp_nonfunctional <- wp_sf_nga %>% \n  filter(status_clean %in% \n           c(\"Abandoned/Decommissioned\",\n             \"Abandoned\", \"Non-Functional due to dry season\", \"Non-Functional\", \"Non functional due to dry season\"))"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex_01/Take-home_Ex01.html#conversion-of-data",
    "href": "Take-home_Ex/Take-home_Ex_01/Take-home_Ex01.html#conversion-of-data",
    "title": "Take-home Exercise 1",
    "section": "3.1 Conversion of Data",
    "text": "3.1 Conversion of Data\n\n3.1.1 sf to sc\nIn this section, we will be mainly converting our data into spatial data, so that we can use it later on. The sf files earlier on will be now converted into sc (spatial class).\n\nosun_sc<-as_Spatial(osun)\nosun_sc\n\nclass       : SpatialPolygonsDataFrame \nfeatures    : 30 \nextent      : 176503.2, 291043.8, 331434.7, 454520.1  (xmin, xmax, ymin, ymax)\ncrs         : +proj=tmerc +lat_0=4 +lon_0=8.5 +k=0.99975 +x_0=670553.98 +y_0=0 +a=6378249.145 +rf=293.465 +towgs84=-92,-93,122,0,0,0,0 +units=m +no_defs \nvariables   : 16\nnames       :    Shape_Leng,       Shape_Area,  ADM2_EN, ADM2_PCODE, ADM2_REF, ADM2ALT1EN, ADM2ALT2EN, ADM1_EN, ADM1_PCODE, ADM0_EN, ADM0_PCODE,  date, validOn, validTo,        SD_EN, ... \nmin values  : 0.26445678806, 0.00248649736648, Aiyedade,   NG030001, Aiyedade,         NA,         NA,    Osun,      NG030, Nigeria,         NG, 17134,   18003,      NA, Osun Central, ... \nmax values  :  1.8470166597,  0.0737271661922,   Osogbo,   NG030030,   Osogbo,         NA,         NA,    Osun,      NG030, Nigeria,         NG, 17134,   18003,      NA,    Osun West, ... \n\nfunc_wp_sc <- as_Spatial(wp_functional)\nfunc_wp_sc \n\nclass       : SpatialPointsDataFrame \nfeatures    : 2630 \nextent      : 177285.9, 290751, 343128.1, 450859.7  (xmin, xmax, ymin, ymax)\ncrs         : +proj=tmerc +lat_0=4 +lon_0=8.5 +k=0.99975 +x_0=670553.98 +y_0=0 +a=6378249.145 +rf=293.465 +towgs84=-92,-93,122,0,0,0,0 +units=m +no_defs \nvariables   : 1\nnames       :              status_clean \nmin values  :                Functional \nmax values  : Functional but not in use \n\nnonfunc_wp_sc <-as_Spatial(wp_nonfunctional)\nnonfunc_wp_sc\n\nclass       : SpatialPointsDataFrame \nfeatures    : 2179 \nextent      : 180539, 290616, 340054.1, 450780.1  (xmin, xmax, ymin, ymax)\ncrs         : +proj=tmerc +lat_0=4 +lon_0=8.5 +k=0.99975 +x_0=670553.98 +y_0=0 +a=6378249.145 +rf=293.465 +towgs84=-92,-93,122,0,0,0,0 +units=m +no_defs \nvariables   : 1\nnames       :                     status_clean \nmin values  :                        Abandoned \nmax values  : Non-Functional due to dry season \n\n\n\n\n3.1.2 sc to sp\nNext, we will be converting the sc (spatial class) into sp format.\n\nosun_sp <- as(osun_sc, \"SpatialPolygons\")\n\nfunc_wp_sp <-as(func_wp_sc, \"SpatialPoints\")\n\nnonfunc_wp_sp <-as(nonfunc_wp_sc, \"SpatialPoints\")\n\n\n\n3.1.3 sp to ppp\nFinally, we will be converting generic sp format into spatstat’s ppp format.\n\nfunc_wp_ppp <- as(func_wp_sp, \"ppp\")\n\nnonfunc_wp_ppp <- as(nonfunc_wp_sp,\"ppp\")\n\n\n\n3.1.4 Check for Duplicates\nLet us check for duplicate points to be safe. Since there are no duplicates, we can move on.\n\nany(duplicated(func_wp_ppp))\n\n[1] FALSE\n\nany(duplicated(nonfunc_wp_ppp))\n\n[1] FALSE"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex_01/Take-home_Ex01.html#creating-an-owin-object",
    "href": "Take-home_Ex/Take-home_Ex_01/Take-home_Ex01.html#creating-an-owin-object",
    "title": "Take-home Exercise 1",
    "section": "3.2 Creating an Owin object",
    "text": "3.2 Creating an Owin object\nFrom the sp conversion earlier, we are able to create the owin object.\n\nowin_osun <- as(osun_sp, \"owin\")\n\n\n3.2.1 Combine Points and Owin Object\nWe can combine the points with the owin object. This will show us the points layered with the owin object for functional and non-functional water point respectively.\n\nowin_func_wp_ppp <- func_wp_ppp[owin_osun]\nplot(owin_func_wp_ppp)\n\n\n\nowin_nonfunc_wp_ppp <- nonfunc_wp_ppp[owin_osun]\nplot(owin_nonfunc_wp_ppp)\n\n\n\n\n\n\n3.2.2 Scaling of KDE Value to Kilometer\nScaling the data to km will enable us to visualise the data better.\n\nkde_func_wp_bw.km <- rescale(owin_func_wp_ppp, 1000, \"km\")\nkde_nonfunc_wp_bw.km <- rescale(owin_nonfunc_wp_ppp, 1000, \"km\")"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex_01/Take-home_Ex01.html#st-order-point-spatial-patterns",
    "href": "Take-home_Ex/Take-home_Ex_01/Take-home_Ex01.html#st-order-point-spatial-patterns",
    "title": "Take-home Exercise 1",
    "section": "4.1 1st Order Point Spatial Patterns",
    "text": "4.1 1st Order Point Spatial Patterns\nWe will be computing the kernel density estimate with non-functional and functional water point side by side.\n\nkde_nonfunc_wp_bw <- density(kde_nonfunc_wp_bw.km,\n                  sigma = bw.diggle,\n                  edge = TRUE,\n                  kernel = \"gaussian\")\n\nkde_func_wp_bw <- density(kde_func_wp_bw.km,\n                  sigma = bw.diggle,\n                  edge = TRUE,\n                  kernel = \"gaussian\")\n\npar(mfrow = c(1,2))\nplot(kde_nonfunc_wp_bw, main = \"Non-Functional Water Points\")\nplot(kde_func_wp_bw, main = \"Functional Water Points\")\n\n\n\n\n\n4.1.2 Converting KDE output into grid object\nWe convert it so that it is suitable for mapping purposes.\n\ngridded_kde_func_wp_bw <- as.SpatialGridDataFrame.im(kde_func_wp_bw)\nspplot(gridded_kde_func_wp_bw)\n\n\n\ngridded_kde_nonfunc_wp_bw <- as.SpatialGridDataFrame.im(kde_nonfunc_wp_bw)\nspplot(gridded_kde_nonfunc_wp_bw)\n\n\n\n\n\n\n4.1.3 Converting Gridded output into Raster\nBy using raster(), we are able to converted the gridded object.\n\nkde_func_wp_bw_raster <- raster(gridded_kde_func_wp_bw)\n\nkde_nonfunc_wp_bw_raster <- raster(gridded_kde_nonfunc_wp_bw)\n\nkde_func_wp_bw_raster\n\nclass      : RasterLayer \ndimensions : 128, 128, 16384  (nrow, ncol, ncell)\nresolution : 0.8948485, 0.9616045  (x, y)\nextent     : 176.5032, 291.0438, 331.4347, 454.5201  (xmin, xmax, ymin, ymax)\ncrs        : NA \nsource     : memory\nnames      : v \nvalues     : -4.734822e-15, 25.49435  (min, max)\n\nkde_nonfunc_wp_bw_raster\n\nclass      : RasterLayer \ndimensions : 128, 128, 16384  (nrow, ncol, ncell)\nresolution : 0.8948485, 0.9616045  (x, y)\nextent     : 176.5032, 291.0438, 331.4347, 454.5201  (xmin, xmax, ymin, ymax)\ncrs        : NA \nsource     : memory\nnames      : v \nvalues     : -4.082312e-15, 20.49412  (min, max)\n\n\n\n\n4.1.4 Assigning projection systems for Raster\nImportant that the projection is set to 26392, so let us change that.\n\nprojection(kde_func_wp_bw_raster) <- CRS(\"+init=EPSG:26392 +units=km\")\nkde_func_wp_bw_raster\n\nclass      : RasterLayer \ndimensions : 128, 128, 16384  (nrow, ncol, ncell)\nresolution : 0.8948485, 0.9616045  (x, y)\nextent     : 176.5032, 291.0438, 331.4347, 454.5201  (xmin, xmax, ymin, ymax)\ncrs        : +proj=tmerc +lat_0=4 +lon_0=8.5 +k=0.99975 +x_0=670553.98 +y_0=0 +a=6378249.145 +rf=293.465 +units=km +no_defs \nsource     : memory\nnames      : v \nvalues     : -4.734822e-15, 25.49435  (min, max)\n\nprojection(kde_nonfunc_wp_bw_raster) <- CRS(\"+init=EPSG:26392 +units=km\")\nkde_nonfunc_wp_bw_raster\n\nclass      : RasterLayer \ndimensions : 128, 128, 16384  (nrow, ncol, ncell)\nresolution : 0.8948485, 0.9616045  (x, y)\nextent     : 176.5032, 291.0438, 331.4347, 454.5201  (xmin, xmax, ymin, ymax)\ncrs        : +proj=tmerc +lat_0=4 +lon_0=8.5 +k=0.99975 +x_0=670553.98 +y_0=0 +a=6378249.145 +rf=293.465 +units=km +no_defs \nsource     : memory\nnames      : v \nvalues     : -4.082312e-15, 20.49412  (min, max)"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex_01/Take-home_Ex01.html#visualising-the-output-in-tmap",
    "href": "Take-home_Ex/Take-home_Ex_01/Take-home_Ex01.html#visualising-the-output-in-tmap",
    "title": "Take-home Exercise 1",
    "section": "4.2 Visualising the Output in Tmap",
    "text": "4.2 Visualising the Output in Tmap\nBy using the OpenStreetMap together with the raster layer, we are able to visualise Osun. A zoom limit is also fixed so that we will not lose sight of the state.\n\ntmap_mode(\"view\") \ntm_basemap(server =\"OpenStreetMap\") + \ntm_shape(kde_func_wp_bw_raster) + \n  tm_raster(\"v\") +\n  tm_layout(legend.position = c(\"right\", \"bottom\"), frame = FALSE) +\n   tm_view(set.zoom.limits =c(9, 14))\n\n\n\n\n\n\ntmap_mode(\"view\") \ntm_basemap(server =\"OpenStreetMap\") + \ntm_shape(kde_nonfunc_wp_bw_raster) + \n  tm_raster(\"v\") +\n  tm_layout(legend.position = c(\"right\", \"bottom\"), frame = FALSE) +\n  tm_view(set.zoom.limits =c(9, 14)) +\n  tm_basemap(server =\"OpenStreetMap\")"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex_01/Take-home_Ex01.html#l-function",
    "href": "Take-home_Ex/Take-home_Ex_01/Take-home_Ex01.html#l-function",
    "title": "Take-home Exercise 1",
    "section": "5.1 L Function",
    "text": "5.1 L Function\nWe will be using the L-function to calculate an estimate for a spatial point pattern. The Lest function is usable for any ppp object. More information can be found here.\nWe will start with Functional Water Point\n\nL_fun = Lest(owin_func_wp_ppp, correction = \"Ripley\")\nplot(L_fun, . -r ~ r, ylab= \"L(d)-r\", xlab = \"d(m)\")\n\n\nNext, Non-Functional Water Point\n\nL_nonfun = Lest(owin_nonfunc_wp_ppp, correction = \"Ripley\")\nplot(L_nonfun, . -r ~ r, ylab= \"L(d)-r\", xlab = \"d(m)\")"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex_01/Take-home_Ex01.html#performing-complete-spatial-randomness-test",
    "href": "Take-home_Ex/Take-home_Ex_01/Take-home_Ex01.html#performing-complete-spatial-randomness-test",
    "title": "Take-home Exercise 1",
    "section": "5.1.2 Performing Complete Spatial Randomness Test",
    "text": "5.1.2 Performing Complete Spatial Randomness Test\nWe will be creating an envelop to run a stimulation at 39, which is equivalent to 95% confidence interval. If P value falls below 0.005, we reject H0.\nThe H0 and H1 are as follows:\nH0 : The distribution of functional/non-functional water points in Osun State are randomly distributed\nH1 : The distribution of functional/non-functional water points in Osun State are not randomly distributed\n\nL_FWP_test <- envelope(owin_func_wp_ppp, Lest, nsim = 39, rank = 1, glocal=TRUE)\n\nplot(L_fun.csr, . - r ~ r, xlab=\"d\", ylab=\"L(d)-r\", xlim=c(0,500))\n\n\n\nL_NFWP_test <- envelope(owin_nonfunc_wp_ppp, Lest, nsim = 39, rank = 1, glocal=TRUE)\n\nplot(L_nonfun.csr, . - r ~ r,  xlab=\"d\", ylab=\"L(d)-r\", xlim=c(0,500))\n\n\nFrom running the simulations, we can therefore conclude that as both black lines for functional and non-functional water point falls outside the 95% confidence interval, we reject H0, and accept that the water points in Osun states are not randomly distributed, which also implies that there is a reason for the placement of water points around the Osun state and in this case, based on the population density."
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex_01/Take-home_Ex01.html#combining-ppp-value-together",
    "href": "Take-home_Ex/Take-home_Ex_01/Take-home_Ex01.html#combining-ppp-value-together",
    "title": "Take-home Exercise 1",
    "section": "6.1 Combining ppp value together",
    "text": "6.1 Combining ppp value together\nAs there are many categories that are classified under functional and non-functional data, let us\n\nwp_functional$status_clean[1:length(wp_functional$status_clean)] <- \"Functional\"\n\nwp_nonfunctional$status_clean[1:length(wp_nonfunctional$status_clean)] <- \"Non-Functional\"\n\nLet us combine both functional and non-functional water points together\n\nwp_tgt <- bind_rows(wp_functional, wp_nonfunctional)\n\nwp_tgt\n\nSimple feature collection with 4809 features and 1 field\nGeometry type: POINT\nDimension:     XY\nBounding box:  xmin: 177285.9 ymin: 340054.1 xmax: 290751 ymax: 450859.7\nProjected CRS: Minna / Nigeria Mid Belt\n# A tibble: 4,809 × 2\n   status_clean            Geometry\n * <chr>                <POINT [m]>\n 1 Functional     (212810 386707.6)\n 2 Functional   (228798.9 403822.5)\n 3 Functional   (270497.9 377476.9)\n 4 Functional     (212202 349210.1)\n 5 Functional   (259331.9 399591.4)\n 6 Functional     (195484 404733.2)\n 7 Functional   (221302.3 389473.6)\n 8 Functional   (263254.1 382692.9)\n 9 Functional     (192484.1 405113)\n10 Functional       (252736 373593)\n# … with 4,799 more rows"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex_01/Take-home_Ex01.html#transforming-of-object",
    "href": "Take-home_Ex/Take-home_Ex_01/Take-home_Ex01.html#transforming-of-object",
    "title": "Take-home Exercise 1",
    "section": "6.2 Transforming of Object",
    "text": "6.2 Transforming of Object\nTo visualise the data, we will be converting sf to sp, sp to sfdf, df to ppp, and ppp to owin object.\n\nwp_tgt_sp <- as(wp_tgt, \"Spatial\")\nwp_tgt_spdf <- as(wp_tgt_sp, \"SpatialPointsDataFrame\")\nwp_tgt_ppp <- as(wp_tgt_spdf, \"ppp\")\nwp_tgt_owin_ppp <- wp_tgt_ppp[owin_osun]\n\nPlotting the Data\n\nplot(wp_tgt_owin_ppp, main = \"Water Points By Functionality\", which.marks = \"status_clean\")\n\n\n\n\nSimilarly, we can get a better view on it on tmap\n\ntmap_mode(\"view\")\ntm_shape(osun)+\n  tm_polygons()+\n  tm_shape(wp_tgt)+\n  tm_dots(col=\"status_clean\") +\n   tm_view(set.zoom.limits =c(9, 14))"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex_01/Take-home_Ex01.html#cross-l-function-analysis",
    "href": "Take-home_Ex/Take-home_Ex_01/Take-home_Ex01.html#cross-l-function-analysis",
    "title": "Take-home Exercise 1",
    "section": "6.3 Cross L-Function Analysis",
    "text": "6.3 Cross L-Function Analysis\nAs we have already derived that the water points are not random, we will now be testing the independence between functional and non-functional water point to see the dependence, if there is.\nH0 : The location of functional and non-functional water points in Osun State are independent from each other.\nH1 : The location of functional and non-functional water points in Osun State are not independent from each other.\nSimilarly, we will using the 95% confidence level.\n\nLcross_wp <- envelope(wp_tgt_owin_ppp,\n                      Lcross,\n                      i = \"Functional\",\n                      j = \"Non-Functional\",\n                      correction = \"border\",\n                      nsim = 39)\nplot(Lcross_wp, xlim = c(0,10000))\n\n\nFrom the plot, we can see that there is spatial dependence for 5500 < r < 6800 as it is within the confidence level of 95%."
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex_01/Take-home_Ex01.html#local-colocation-quotients-lclq",
    "href": "Take-home_Ex/Take-home_Ex_01/Take-home_Ex01.html#local-colocation-quotients-lclq",
    "title": "Take-home Exercise 1",
    "section": "6.4 Local Colocation Quotients (LCLQ)",
    "text": "6.4 Local Colocation Quotients (LCLQ)\n\n6.4.1 Preperation\nPreparing nearest neighbours list\n\nnb <- include_self(\n  st_knn(st_geometry(wp_sf_nga),6))\n\nComputing the Kernel weights\n\nwt <- st_kernel_weights(nb, wp_sf_nga, \"gaussian\", adaptive = TRUE)\n\n\n\n6.4.2 Calculating Local Colocation Quotient\n\nA <- wp_functional$status_clean\n\nB <- wp_nonfunctional$status_clean\n\nLCLQ <- local_colocation(A,B, nb, wt, 39)\n\n\n\n6.4.3 Joining output Table\n\nLCLQ_WP <- cbind(wp_sf_nga, LCLQ) %>%\n  na.exclude()\n\n\n\n6.4.4 Plotting LCLQ using tmap\n\ntmap_mode(\"view\")\ntm_shape(osun) +\n  tm_polygons() +\ntm_shape(LCLQ_WP) +\n  tm_dots(col = \"Non.Functional\",\n          size = 0.01,\n          border.col = \"black\",\n          border.lwd = 0.5) +\ntm_shape(LCLQ_WP) +\n  tm_dots(col = \"p_sim_Non.Functional\",\n          size = 0.01,\n          border.col = \"black\",\n          border.lwd = 0.5) +\n   tm_view(set.zoom.limits =c(9, 14))\n\n\n\n\n\n\nFrom the p value 0.025 < 0.05, we can see that the result is significant. Since this is the case, we can reject H0 and accept H1, which tells us that functional and non-functional water points are dependant on each other.\n\ntmap_mode(\"plot\")"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex01/Take-home_Ex01.html",
    "href": "Take-home_Ex/Take-home_Ex01/Take-home_Ex01.html",
    "title": "Take-home Exercise 1",
    "section": "",
    "text": "Locally, we are all blessed with clean and accessible water. However, this is not the case for less developed countries, especially in the rural regions of Africa. In this Take Home Assignment, we will be putting spatial data into good use, by looking at the number of functional and non functional water points to better understand the needs and the situation of Osun, which is a rural state in Nigeria.\n\n\nThese will be the packages that will be used in this assignment.\n\npacman::p_load(sf, funModeling,maptools,raster, spatstat, tmap , tidyverse, sfdep) \n\n\n\n\nWe will be using data from the state boundary GIS data, that can be found on geoBoundaries\n\ngeoNGA <- st_read(\"data/geospatial/\",\n               layer = \"nga_admbnda_adm2_osgof_20190417\")\n\nReading layer `nga_admbnda_adm2_osgof_20190417' from data source \n  `/Users/keredpoh/Desktop/keredpoh/IS415-GAA/Take-home_Ex/Take-home_Ex01/data/geospatial' \n  using driver `ESRI Shapefile'\nSimple feature collection with 774 features and 16 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 2.668534 ymin: 4.273007 xmax: 14.67882 ymax: 13.89442\nGeodetic CRS:  WGS 84\n\n\n\n\n\nWe will be using data from the WPdx Global Data Repositories, while we narrow down to the state of Osun using the filter function.\n\nwp_nga <- read_csv(\"data/aspatial/WPdx.csv\") %>%\n  filter(`#clean_adm1`==\"Osun\")"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex01/Take-home_Ex01.html#geospatial-data",
    "href": "Take-home_Ex/Take-home_Ex01/Take-home_Ex01.html#geospatial-data",
    "title": "Take-home Exercise 1",
    "section": "2.1 Geospatial Data",
    "text": "2.1 Geospatial Data\n\n2.1.1 Checking for Duplicates\nBefore continuing, we will check for duplicates and replace them if necessary. From running this code, we found out that there are a few duplicates.\n\ngeoNGA$ADM2_EN[duplicated(geoNGA$ADM2_EN) == TRUE]\n\n[1] \"Bassa\"    \"Ifelodun\" \"Irepodun\" \"Nasarawa\" \"Obi\"      \"Surulere\"\n\n\nWe will now be replacing the duplicates.\n\ngeoNGA$ADM2_EN[94] <- \"Bassa, Kogi\"\ngeoNGA$ADM2_EN[95] <- \"Bassa, Plateau\"\ngeoNGA$ADM2_EN[304] <- \"Ifelodun, Kwara\"\ngeoNGA$ADM2_EN[305] <- \"Ifelodun, Osun\"\ngeoNGA$ADM2_EN[355] <- \"Irepodun, Kwara\"\ngeoNGA$ADM2_EN[356] <- \"Irepodun, Osun\"\ngeoNGA$ADM2_EN[519] <- \"Nasarawa, Kano\"\ngeoNGA$ADM2_EN[520] <- \"Nasarawa, Nasarawa\"\ngeoNGA$ADM2_EN[546] <- \"Obi, Benue\"\ngeoNGA$ADM2_EN[547] <- \"Obi, Nasarawa\"\ngeoNGA$ADM2_EN[693] <- \"Surulere, Lagos\"\ngeoNGA$ADM2_EN[694] <- \"Surulere, Oyo\"\n\nWe will now run the same code again to check for duplicates. Since character(0), we are good to go.\n\ngeoNGA$ADM2_EN[duplicated(geoNGA$ADM2_EN) == TRUE]\n\ncharacter(0)\n\n\n\n\n2.1.2 Grouping Different Osun States Together\nAs there are different governed states in Osun, we will then group them into osun_state. This will be useful for our visualisation.\n\nosun_state <- c(\"Aiyedade\",\"Aiyedire\",\"Atakumosa East\",   \"Atakumosa West\", \"Ede North\",  \"Ede South\", \"Egbedore\", \"Ejigbo\", \"Ife Central\", \"Ife East\", \"Ife North\", \"Ife South\", \"Ifedayo\",  \"Ila\", \"Ifelodun, Osun\",\"Irepodun, Osun\",\"Ilesha East\",  \"Ilesha West\", \"Irewole\", \"Isokan\",   \"Iwo\", \"Obokun\", \"Odo-Otin\", \"Ola-oluwa\", \"Olorunda\", \"Oriade\", \"Orolu\",    \"Osogbo\", \"Boripe\", \"Boluwaduro\")\n\nosun <- geoNGA %>%\n  filter(ADM2_EN %in% osun_state)\n\n\n\n2.1.3 Transforming Projection for Osun\nAs EPSG:4326 is the global projection, we would want to transform it into the state of Nigeria. We are able to find that 26392 is projected at Nigeria through epsg.io.\n\nst_crs(osun)\n\nCoordinate Reference System:\n  User input: WGS 84 \n  wkt:\nGEOGCRS[\"WGS 84\",\n    DATUM[\"World Geodetic System 1984\",\n        ELLIPSOID[\"WGS 84\",6378137,298.257223563,\n            LENGTHUNIT[\"metre\",1]]],\n    PRIMEM[\"Greenwich\",0,\n        ANGLEUNIT[\"degree\",0.0174532925199433]],\n    CS[ellipsoidal,2],\n        AXIS[\"latitude\",north,\n            ORDER[1],\n            ANGLEUNIT[\"degree\",0.0174532925199433]],\n        AXIS[\"longitude\",east,\n            ORDER[2],\n            ANGLEUNIT[\"degree\",0.0174532925199433]],\n    ID[\"EPSG\",4326]]\n\nosun <- osun %>% st_transform(crs = 26392)\n\n\n\n2.1.4 Plotting Osun\nThis will help us visualise the shape of Osun.\n\nplot(osun)"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex01/Take-home_Ex01.html#aspatial-data",
    "href": "Take-home_Ex/Take-home_Ex01/Take-home_Ex01.html#aspatial-data",
    "title": "Take-home Exercise 1",
    "section": "2.2 Aspatial Data",
    "text": "2.2 Aspatial Data\n\n2.2.1 Converting Data of Water Points into SF Point Features\nAs mentioned in class, we will need to match the CRS to the EPSG. Before that, we will converting the WKT (well known text) data.\n\nwp_nga$Geometry = st_as_sfc(wp_nga$`New Georeferenced Column`)\nwp_nga\n\n# A tibble: 5,557 × 71\n   row_id `#source`      #lat_…¹ #lon_…² #repo…³ #stat…⁴ #wate…⁵ #wate…⁶ #wate…⁷\n    <dbl> <chr>            <dbl>   <dbl> <chr>   <chr>   <chr>   <chr>   <chr>  \n 1 429123 GRID3             8.02    5.06 08/29/… Unknown <NA>    <NA>    Tapsta…\n 2  70566 Federal Minis…    7.32    4.79 05/11/… No      Protec… Well    Mechan…\n 3  70578 Federal Minis…    7.76    4.56 05/11/… No      Boreho… Well    Mechan…\n 4  66401 Federal Minis…    8.03    4.64 04/30/… No      Boreho… Well    Mechan…\n 5 422190 GRID3             7.87    4.88 08/29/… Unknown <NA>    <NA>    Tapsta…\n 6 422064 GRID3             7.7     4.89 08/29/… Unknown <NA>    <NA>    Tapsta…\n 7  65607 Federal Minis…    7.89    4.71 05/12/… No      Boreho… Well    Mechan…\n 8  68989 Federal Minis…    7.51    4.27 05/07/… No      Boreho… Well    <NA>   \n 9  67708 Federal Minis…    7.48    4.35 04/29/… Yes     Boreho… Well    Mechan…\n10  66419 Federal Minis…    7.63    4.50 05/08/… Yes     Boreho… Well    Hand P…\n# … with 5,547 more rows, 62 more variables: `#water_tech_category` <chr>,\n#   `#facility_type` <chr>, `#clean_country_name` <chr>, `#clean_adm1` <chr>,\n#   `#clean_adm2` <chr>, `#clean_adm3` <chr>, `#clean_adm4` <chr>,\n#   `#install_year` <dbl>, `#installer` <chr>, `#rehab_year` <lgl>,\n#   `#rehabilitator` <lgl>, `#management_clean` <chr>, `#status_clean` <chr>,\n#   `#pay` <chr>, `#fecal_coliform_presence` <chr>,\n#   `#fecal_coliform_value` <dbl>, `#subjective_quality` <chr>, …\n\nwp_sf <- st_sf(wp_nga, crs = 4326)\nwp_sf\n\nSimple feature collection with 5557 features and 70 fields\nGeometry type: POINT\nDimension:     XY\nBounding box:  xmin: 4.032004 ymin: 7.060309 xmax: 5.06 ymax: 8.061898\nGeodetic CRS:  WGS 84\n# A tibble: 5,557 × 71\n   row_id `#source`      #lat_…¹ #lon_…² #repo…³ #stat…⁴ #wate…⁵ #wate…⁶ #wate…⁷\n *  <dbl> <chr>            <dbl>   <dbl> <chr>   <chr>   <chr>   <chr>   <chr>  \n 1 429123 GRID3             8.02    5.06 08/29/… Unknown <NA>    <NA>    Tapsta…\n 2  70566 Federal Minis…    7.32    4.79 05/11/… No      Protec… Well    Mechan…\n 3  70578 Federal Minis…    7.76    4.56 05/11/… No      Boreho… Well    Mechan…\n 4  66401 Federal Minis…    8.03    4.64 04/30/… No      Boreho… Well    Mechan…\n 5 422190 GRID3             7.87    4.88 08/29/… Unknown <NA>    <NA>    Tapsta…\n 6 422064 GRID3             7.7     4.89 08/29/… Unknown <NA>    <NA>    Tapsta…\n 7  65607 Federal Minis…    7.89    4.71 05/12/… No      Boreho… Well    Mechan…\n 8  68989 Federal Minis…    7.51    4.27 05/07/… No      Boreho… Well    <NA>   \n 9  67708 Federal Minis…    7.48    4.35 04/29/… Yes     Boreho… Well    Mechan…\n10  66419 Federal Minis…    7.63    4.50 05/08/… Yes     Boreho… Well    Hand P…\n# … with 5,547 more rows, 62 more variables: `#water_tech_category` <chr>,\n#   `#facility_type` <chr>, `#clean_country_name` <chr>, `#clean_adm1` <chr>,\n#   `#clean_adm2` <chr>, `#clean_adm3` <chr>, `#clean_adm4` <chr>,\n#   `#install_year` <dbl>, `#installer` <chr>, `#rehab_year` <lgl>,\n#   `#rehabilitator` <lgl>, `#management_clean` <chr>, `#status_clean` <chr>,\n#   `#pay` <chr>, `#fecal_coliform_presence` <chr>,\n#   `#fecal_coliform_value` <dbl>, `#subjective_quality` <chr>, …\n\n\n\n\n2.2.2 Transforming Projection\nSimilarly, we will have to change the projection of the Aspatial data to 26392.\n\nwp_sf <- wp_sf %>%\n  st_transform(crs = 26392)\n\n\n\n2.2.3 Plotting Frequency Data to Spot NA Values\nFrom this bar graph, we can see that there are NA values.\n\nstatus_cleam_graph <- funModeling::freq(data = wp_sf,\n     input = '#status_clean')\n\n\n\n\n\n\n2.2.4 Replacing NA Values\nWe will then replace the NA values to ‘unknown’.\n\nwp_sf_nga <- wp_sf %>% \n  rename(status_clean = '#status_clean') %>%\n dplyr::select(status_clean) %>%\n  mutate(status_clean = replace_na(\n    status_clean, \"unknown\"))\n\n\n\n2.2.5 Grouping data into Functional and Non-Functional Water Point\nFrom the graph above, we are able to group the different data into functional and non functional.\nWe will begin with functional Water Point.\n\nwp_functional <- wp_sf_nga %>% \n  filter(status_clean %in%\n           c(\"Functional\",\n             \"Functional but not in use\",\n             \"Functional but needs repair\"))\n\nNext, for Non-Functional Water Point.\n\nwp_nonfunctional <- wp_sf_nga %>% \n  filter(status_clean %in% \n           c(\"Abandoned/Decommissioned\",\n             \"Abandoned\", \"Non-Functional due to dry season\", \"Non-Functional\", \"Non functional due to dry season\"))"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex01/Take-home_Ex01.html#conversion-of-data",
    "href": "Take-home_Ex/Take-home_Ex01/Take-home_Ex01.html#conversion-of-data",
    "title": "Take-home Exercise 1",
    "section": "3.1 Conversion of Data",
    "text": "3.1 Conversion of Data\n\n3.1.1 sf to sc\nIn this section, we will be mainly converting our data into spatial data, so that we can use it later on. The sf files earlier on will be now converted into sc (spatial class).\n\nosun_sc<-as_Spatial(osun)\nosun_sc\n\nclass       : SpatialPolygonsDataFrame \nfeatures    : 30 \nextent      : 176503.2, 291043.8, 331434.7, 454520.1  (xmin, xmax, ymin, ymax)\ncrs         : +proj=tmerc +lat_0=4 +lon_0=8.5 +k=0.99975 +x_0=670553.98 +y_0=0 +a=6378249.145 +rf=293.465 +towgs84=-92,-93,122,0,0,0,0 +units=m +no_defs \nvariables   : 16\nnames       :    Shape_Leng,       Shape_Area,  ADM2_EN, ADM2_PCODE, ADM2_REF, ADM2ALT1EN, ADM2ALT2EN, ADM1_EN, ADM1_PCODE, ADM0_EN, ADM0_PCODE,  date, validOn, validTo,        SD_EN, ... \nmin values  : 0.26445678806, 0.00248649736648, Aiyedade,   NG030001, Aiyedade,         NA,         NA,    Osun,      NG030, Nigeria,         NG, 17134,   18003,      NA, Osun Central, ... \nmax values  :  1.8470166597,  0.0737271661922,   Osogbo,   NG030030,   Osogbo,         NA,         NA,    Osun,      NG030, Nigeria,         NG, 17134,   18003,      NA,    Osun West, ... \n\nfunc_wp_sc <- as_Spatial(wp_functional)\nfunc_wp_sc \n\nclass       : SpatialPointsDataFrame \nfeatures    : 2630 \nextent      : 177285.9, 290751, 343128.1, 450859.7  (xmin, xmax, ymin, ymax)\ncrs         : +proj=tmerc +lat_0=4 +lon_0=8.5 +k=0.99975 +x_0=670553.98 +y_0=0 +a=6378249.145 +rf=293.465 +towgs84=-92,-93,122,0,0,0,0 +units=m +no_defs \nvariables   : 1\nnames       :              status_clean \nmin values  :                Functional \nmax values  : Functional but not in use \n\nnonfunc_wp_sc <-as_Spatial(wp_nonfunctional)\nnonfunc_wp_sc\n\nclass       : SpatialPointsDataFrame \nfeatures    : 2179 \nextent      : 180539, 290616, 340054.1, 450780.1  (xmin, xmax, ymin, ymax)\ncrs         : +proj=tmerc +lat_0=4 +lon_0=8.5 +k=0.99975 +x_0=670553.98 +y_0=0 +a=6378249.145 +rf=293.465 +towgs84=-92,-93,122,0,0,0,0 +units=m +no_defs \nvariables   : 1\nnames       :                     status_clean \nmin values  :                        Abandoned \nmax values  : Non-Functional due to dry season \n\n\n\n\n3.1.2 sc to sp\nNext, we will be converting the sc (spatial class) into sp format.\n\nosun_sp <- as(osun_sc, \"SpatialPolygons\")\n\nfunc_wp_sp <-as(func_wp_sc, \"SpatialPoints\")\n\nnonfunc_wp_sp <-as(nonfunc_wp_sc, \"SpatialPoints\")\n\n\n\n3.1.3 sp to ppp\nFinally, we will be converting generic sp format into spatstat’s ppp format.\n\nfunc_wp_ppp <- as(func_wp_sp, \"ppp\")\n\nnonfunc_wp_ppp <- as(nonfunc_wp_sp,\"ppp\")\n\n\n\n3.1.4 Check for Duplicates\nLet us check for duplicate points to be safe. Since there are no duplicates, we can move on.\n\nany(duplicated(func_wp_ppp))\n\n[1] FALSE\n\nany(duplicated(nonfunc_wp_ppp))\n\n[1] FALSE"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex01/Take-home_Ex01.html#creating-an-owin-object",
    "href": "Take-home_Ex/Take-home_Ex01/Take-home_Ex01.html#creating-an-owin-object",
    "title": "Take-home Exercise 1",
    "section": "3.2 Creating an Owin object",
    "text": "3.2 Creating an Owin object\nFrom the sp conversion earlier, we are able to create the owin object.\n\nowin_osun <- as(osun_sp, \"owin\")\n\n\n3.2.1 Combine Points and Owin Object\nWe can combine the points with the owin object. This will show us the points layered with the owin object for functional and non-functional water point respectively.\n\nowin_func_wp_ppp <- func_wp_ppp[owin_osun]\nplot(owin_func_wp_ppp)\n\n\n\nowin_nonfunc_wp_ppp <- nonfunc_wp_ppp[owin_osun]\nplot(owin_nonfunc_wp_ppp)\n\n\n\n\n\n\n3.2.2 Scaling of KDE Value to Kilometer\nScaling the data to km will enable us to visualise the data better.\n\nkde_func_wp_bw.km <- rescale(owin_func_wp_ppp, 1000, \"km\")\nkde_nonfunc_wp_bw.km <- rescale(owin_nonfunc_wp_ppp, 1000, \"km\")"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex01/Take-home_Ex01.html#st-order-point-spatial-patterns",
    "href": "Take-home_Ex/Take-home_Ex01/Take-home_Ex01.html#st-order-point-spatial-patterns",
    "title": "Take-home Exercise 1",
    "section": "4.1 1st Order Point Spatial Patterns",
    "text": "4.1 1st Order Point Spatial Patterns\nWe will be computing the kernel density estimate with non-functional and functional water point side by side.\n\nkde_nonfunc_wp_bw <- density(kde_nonfunc_wp_bw.km,\n                  sigma = bw.diggle,\n                  edge = TRUE,\n                  kernel = \"gaussian\")\n\nkde_func_wp_bw <- density(kde_func_wp_bw.km,\n                  sigma = bw.diggle,\n                  edge = TRUE,\n                  kernel = \"gaussian\")\n\npar(mfrow = c(1,2))\nplot(kde_nonfunc_wp_bw, main = \"Non-Functional Water Points\")\nplot(kde_func_wp_bw, main = \"Functional Water Points\")\n\n\n\n\n\n4.1.2 Converting KDE output into grid object\nWe convert it so that it is suitable for mapping purposes.\n\ngridded_kde_func_wp_bw <- as.SpatialGridDataFrame.im(kde_func_wp_bw)\nspplot(gridded_kde_func_wp_bw)\n\n\n\ngridded_kde_nonfunc_wp_bw <- as.SpatialGridDataFrame.im(kde_nonfunc_wp_bw)\nspplot(gridded_kde_nonfunc_wp_bw)\n\n\n\n\n\n\n4.1.3 Converting Gridded output into Raster\nBy using raster(), we are able to converted the gridded object.\n\nkde_func_wp_bw_raster <- raster(gridded_kde_func_wp_bw)\n\nkde_nonfunc_wp_bw_raster <- raster(gridded_kde_nonfunc_wp_bw)\n\nkde_func_wp_bw_raster\n\nclass      : RasterLayer \ndimensions : 128, 128, 16384  (nrow, ncol, ncell)\nresolution : 0.8948485, 0.9616045  (x, y)\nextent     : 176.5032, 291.0438, 331.4347, 454.5201  (xmin, xmax, ymin, ymax)\ncrs        : NA \nsource     : memory\nnames      : v \nvalues     : -4.734822e-15, 25.49435  (min, max)\n\nkde_nonfunc_wp_bw_raster\n\nclass      : RasterLayer \ndimensions : 128, 128, 16384  (nrow, ncol, ncell)\nresolution : 0.8948485, 0.9616045  (x, y)\nextent     : 176.5032, 291.0438, 331.4347, 454.5201  (xmin, xmax, ymin, ymax)\ncrs        : NA \nsource     : memory\nnames      : v \nvalues     : -4.082312e-15, 20.49412  (min, max)\n\n\n\n\n4.1.4 Assigning projection systems for Raster\nImportant that the projection is set to 26392, so let us change that.\n\nprojection(kde_func_wp_bw_raster) <- CRS(\"+init=EPSG:26392 +units=km\")\nkde_func_wp_bw_raster\n\nclass      : RasterLayer \ndimensions : 128, 128, 16384  (nrow, ncol, ncell)\nresolution : 0.8948485, 0.9616045  (x, y)\nextent     : 176.5032, 291.0438, 331.4347, 454.5201  (xmin, xmax, ymin, ymax)\ncrs        : +proj=tmerc +lat_0=4 +lon_0=8.5 +k=0.99975 +x_0=670553.98 +y_0=0 +a=6378249.145 +rf=293.465 +units=km +no_defs \nsource     : memory\nnames      : v \nvalues     : -4.734822e-15, 25.49435  (min, max)\n\nprojection(kde_nonfunc_wp_bw_raster) <- CRS(\"+init=EPSG:26392 +units=km\")\nkde_nonfunc_wp_bw_raster\n\nclass      : RasterLayer \ndimensions : 128, 128, 16384  (nrow, ncol, ncell)\nresolution : 0.8948485, 0.9616045  (x, y)\nextent     : 176.5032, 291.0438, 331.4347, 454.5201  (xmin, xmax, ymin, ymax)\ncrs        : +proj=tmerc +lat_0=4 +lon_0=8.5 +k=0.99975 +x_0=670553.98 +y_0=0 +a=6378249.145 +rf=293.465 +units=km +no_defs \nsource     : memory\nnames      : v \nvalues     : -4.082312e-15, 20.49412  (min, max)"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex01/Take-home_Ex01.html#visualising-the-output-in-tmap",
    "href": "Take-home_Ex/Take-home_Ex01/Take-home_Ex01.html#visualising-the-output-in-tmap",
    "title": "Take-home Exercise 1",
    "section": "4.2 Visualising the Output in Tmap",
    "text": "4.2 Visualising the Output in Tmap\nBy using the OpenStreetMap together with the raster layer, we are able to visualise Osun. A zoom limit is also fixed so that we will not lose sight of the state.\n\ntmap_mode(\"view\") \ntm_basemap(server =\"OpenStreetMap\") + \ntm_shape(kde_func_wp_bw_raster) + \n  tm_raster(\"v\") +\n  tm_layout(legend.position = c(\"right\", \"bottom\"), frame = FALSE) +\n   tm_view(set.zoom.limits =c(9, 14))\n\n\n\n\n\n\ntmap_mode(\"view\") \ntm_basemap(server =\"OpenStreetMap\") + \ntm_shape(kde_nonfunc_wp_bw_raster) + \n  tm_raster(\"v\") +\n  tm_layout(legend.position = c(\"right\", \"bottom\"), frame = FALSE) +\n  tm_view(set.zoom.limits =c(9, 14)) +\n  tm_basemap(server =\"OpenStreetMap\")"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex01/Take-home_Ex01.html#l-function",
    "href": "Take-home_Ex/Take-home_Ex01/Take-home_Ex01.html#l-function",
    "title": "Take-home Exercise 1",
    "section": "5.1 L Function",
    "text": "5.1 L Function\nWe will be using the L-function to calculate an estimate for a spatial point pattern. The Lest function is usable for any ppp object. More information can be found here.\nWe will start with Functional Water Point\n\nL_fun = Lest(owin_func_wp_ppp, correction = \"Ripley\")\nplot(L_fun, . -r ~ r, ylab= \"L(d)-r\", xlab = \"d(m)\")\n\n\nNext, Non-Functional Water Point\n\nL_nonfun = Lest(owin_nonfunc_wp_ppp, correction = \"Ripley\")\nplot(L_nonfun, . -r ~ r, ylab= \"L(d)-r\", xlab = \"d(m)\")"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex01/Take-home_Ex01.html#performing-complete-spatial-randomness-test",
    "href": "Take-home_Ex/Take-home_Ex01/Take-home_Ex01.html#performing-complete-spatial-randomness-test",
    "title": "Take-home Exercise 1",
    "section": "5.1.2 Performing Complete Spatial Randomness Test",
    "text": "5.1.2 Performing Complete Spatial Randomness Test\nWe will be creating an envelop to run a stimulation at 39, which is equivalent to 95% confidence interval. If P value falls below 0.005, we reject H0.\nThe H0 and H1 are as follows:\nH0 : The distribution of functional/non-functional water points in Osun State are randomly distributed\nH1 : The distribution of functional/non-functional water points in Osun State are not randomly distributed\n\nL_FWP_test <- envelope(owin_func_wp_ppp, Lest, nsim = 39, rank = 1, glocal=TRUE)\n\nplot(L_fun.csr, . - r ~ r, xlab=\"d\", ylab=\"L(d)-r\", xlim=c(0,500))\n\n\n\nL_NFWP_test <- envelope(owin_nonfunc_wp_ppp, Lest, nsim = 39, rank = 1, glocal=TRUE)\n\nplot(L_nonfun.csr, . - r ~ r,  xlab=\"d\", ylab=\"L(d)-r\", xlim=c(0,500))\n\n\nFrom running the simulations, we can therefore conclude that as both black lines for functional and non-functional water point falls outside the 95% confidence interval, we reject H0, and accept that the water points in Osun states are not randomly distributed, which also implies that there is a reason for the placement of water points around the Osun state and in this case, based on the population density."
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex01/Take-home_Ex01.html#combining-ppp-value-together",
    "href": "Take-home_Ex/Take-home_Ex01/Take-home_Ex01.html#combining-ppp-value-together",
    "title": "Take-home Exercise 1",
    "section": "6.1 Combining ppp value together",
    "text": "6.1 Combining ppp value together\nAs there are many categories that are classified under functional and non-functional data, let us\n\nwp_functional$status_clean[1:length(wp_functional$status_clean)] <- \"Functional\"\n\nwp_nonfunctional$status_clean[1:length(wp_nonfunctional$status_clean)] <- \"Non-Functional\"\n\nLet us combine both functional and non-functional water points together\n\nwp_tgt <- bind_rows(wp_functional, wp_nonfunctional)\n\nwp_tgt\n\nSimple feature collection with 4809 features and 1 field\nGeometry type: POINT\nDimension:     XY\nBounding box:  xmin: 177285.9 ymin: 340054.1 xmax: 290751 ymax: 450859.7\nProjected CRS: Minna / Nigeria Mid Belt\n# A tibble: 4,809 × 2\n   status_clean            Geometry\n * <chr>                <POINT [m]>\n 1 Functional     (212810 386707.6)\n 2 Functional   (228798.9 403822.5)\n 3 Functional   (270497.9 377476.9)\n 4 Functional     (212202 349210.1)\n 5 Functional   (259331.9 399591.4)\n 6 Functional     (195484 404733.2)\n 7 Functional   (221302.3 389473.6)\n 8 Functional   (263254.1 382692.9)\n 9 Functional     (192484.1 405113)\n10 Functional       (252736 373593)\n# … with 4,799 more rows"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex01/Take-home_Ex01.html#transforming-of-object",
    "href": "Take-home_Ex/Take-home_Ex01/Take-home_Ex01.html#transforming-of-object",
    "title": "Take-home Exercise 1",
    "section": "6.2 Transforming of Object",
    "text": "6.2 Transforming of Object\nTo visualise the data, we will be converting sf to sp, sp to sfdf, df to ppp, and ppp to owin object.\n\nwp_tgt_sp <- as(wp_tgt, \"Spatial\")\nwp_tgt_spdf <- as(wp_tgt_sp, \"SpatialPointsDataFrame\")\nwp_tgt_ppp <- as(wp_tgt_spdf, \"ppp\")\nwp_tgt_owin_ppp <- wp_tgt_ppp[owin_osun]\n\nPlotting the Data\n\nplot(wp_tgt_owin_ppp, main = \"Water Points By Functionality\", which.marks = \"status_clean\")\n\n\n\n\nSimilarly, we can get a better view on it on tmap\n\ntmap_mode(\"view\")\ntm_shape(osun)+\n  tm_polygons()+\n  tm_shape(wp_tgt)+\n  tm_dots(col=\"status_clean\") +\n   tm_view(set.zoom.limits =c(9, 14))"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex01/Take-home_Ex01.html#cross-l-function-analysis",
    "href": "Take-home_Ex/Take-home_Ex01/Take-home_Ex01.html#cross-l-function-analysis",
    "title": "Take-home Exercise 1",
    "section": "6.3 Cross L-Function Analysis",
    "text": "6.3 Cross L-Function Analysis\nAs we have already derived that the water points are not random, we will now be testing the independence between functional and non-functional water point to see the dependence, if there is.\nH0 : The location of functional and non-functional water points in Osun State are independent from each other.\nH1 : The location of functional and non-functional water points in Osun State are not independent from each other.\nSimilarly, we will using the 95% confidence level.\n\nLcross_wp <- envelope(wp_tgt_owin_ppp,\n                      Lcross,\n                      i = \"Functional\",\n                      j = \"Non-Functional\",\n                      correction = \"border\",\n                      nsim = 39)\nplot(Lcross_wp, xlim = c(0,10000))\n\n\nFrom the plot, we can see that there is spatial dependence for 5500 < r < 6800 as it is within the confidence level of 95%."
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex01/Take-home_Ex01.html#local-colocation-quotients-lclq",
    "href": "Take-home_Ex/Take-home_Ex01/Take-home_Ex01.html#local-colocation-quotients-lclq",
    "title": "Take-home Exercise 1",
    "section": "6.4 Local Colocation Quotients (LCLQ)",
    "text": "6.4 Local Colocation Quotients (LCLQ)\n\n6.4.1 Preperation\nPreparing nearest neighbours list\n\nnb <- include_self(\n  st_knn(st_geometry(wp_sf_nga),6))\n\nComputing the Kernel weights\n\nwt <- st_kernel_weights(nb, wp_sf_nga, \"gaussian\", adaptive = TRUE)\n\n\n\n6.4.2 Calculating Local Colocation Quotient\n\nA <- wp_functional$status_clean\n\nB <- wp_nonfunctional$status_clean\n\nLCLQ <- local_colocation(A,B, nb, wt, 39)\n\n\n\n6.4.3 Joining output Table\n\nLCLQ_WP <- cbind(wp_sf_nga, LCLQ) %>%\n  na.exclude()\n\n\n\n6.4.4 Plotting LCLQ using tmap\n\ntmap_mode(\"view\")\ntm_shape(osun) +\n  tm_polygons() +\ntm_shape(LCLQ_WP) +\n  tm_dots(col = \"Non.Functional\",\n          size = 0.01,\n          border.col = \"black\",\n          border.lwd = 0.5) +\ntm_shape(LCLQ_WP) +\n  tm_dots(col = \"p_sim_Non.Functional\",\n          size = 0.01,\n          border.col = \"black\",\n          border.lwd = 0.5) +\n   tm_view(set.zoom.limits =c(9, 14))\n\n\n\n\n\n\nFrom the p value 0.025 < 0.05, we can see that the result is significant. Since this is the case, we can reject H0 and accept H1, which tells us that functional and non-functional water points are dependant on each other.\n\ntmap_mode(\"plot\")"
  },
  {
    "objectID": "In-class_Ex/In-class_Ex06/In-class_Ex06.html",
    "href": "In-class_Ex/In-class_Ex06/In-class_Ex06.html",
    "title": "In class exercise 6",
    "section": "",
    "text": "#1 Load Data\n\npacman::p_load(sf, sfdep, tmap, tidyverse)\n\nLet’s start by importing Geospatial data\n\nhunan <- st_read(dsn = \"data/geospatial\", \n                 layer = \"Hunan\")\n\nReading layer `Hunan' from data source \n  `/Users/keredpoh/Desktop/keredpoh/IS415-GAA/In-class_Ex/In-class_Ex06/data/geospatial' \n  using driver `ESRI Shapefile'\nSimple feature collection with 88 features and 7 fields\nGeometry type: POLYGON\nDimension:     XY\nBounding box:  xmin: 108.7831 ymin: 24.6342 xmax: 114.2544 ymax: 30.12812\nGeodetic CRS:  WGS 84\n\n\nNext, Aspatial data\n\nhunan2012 <- read_csv(\"data/aspatial/Hunan_2012.csv\")\n\n\nhunan_GDPPC <- left_join(hunan, hunan2012) %>%\n  select(1:4, 7,  15)\n\n#2 Visualising plot\n\ntmap_mode(\"plot\")\n\ntm_shape(hunan_GDPPC) +\n  tm_fill(\"GDPPC\",\n          style = \"quantile\",\n          palette = \"Blues\",\n          title = \"GDPPC\") +\n  tm_layout(main.title =  \"Distribution of GDP per capita by distribution\",\n  main.title.position = \"center\",\n  main.title.size = 0.9,\n  legend.height = 0.45,\n  legend.width = 0.35,\n  frame = TRUE) +\n  tm_borders(alpha = 0.5) +\n  tm_compass(type = \"8star\", size = 2) +\n  tm_scale_bar() +\n  tm_grid(alpha = 0.2)\n\n\n\n\n#3 Computing using different Contiguity neighbour methods\nqueen method\n\ncn_queen <- hunan_GDPPC %>%\n  mutate(nb = st_contiguity(geometry),\n         .before = 1)\n\nrook method\n\ncn_rook <- hunan_GDPPC %>%\n  mutate(nb = st_contiguity(geometry),\n         queen = FALSE,\n         .before = 1)\n\n#4 Contiguity weights queen method\n\nwm_q <- hunan_GDPPC %>%\n  mutate(nb = st_contiguity(geometry),\n         wt = st_weights(nb),\n         .before = 1)"
  },
  {
    "objectID": "In-class_Ex/In-class_Ex07/In-class_Ex07.html",
    "href": "In-class_Ex/In-class_Ex07/In-class_Ex07.html",
    "title": "In class exercise 7",
    "section": "",
    "text": "pacman::p_load(sf, sfdep, tmap, tidyverse)"
  },
  {
    "objectID": "In-class_Ex/In-class_Ex07/In-class_Ex07.html#the-data",
    "href": "In-class_Ex/In-class_Ex07/In-class_Ex07.html#the-data",
    "title": "In class exercise 7",
    "section": "The data",
    "text": "The data\nFor the purpose of this in class exercise, the Hunan data sets will be used. There are two data sets in this use case, they are:\n\nHunan, a geospatial data set in the ESRI shapefile format, and\nHunan_2012, an attribute dataset in csv format\n\n\nImporting geospatial data: shapefile into R environment\nThe code chunk below uses st_read() of sf package to import Hunan shapefile into R. The imported shapefile will be simple features Object of sf.\n\nhunan <- st_read(dsn = \"data/geospatial\", \n                 layer = \"Hunan\")\n\nReading layer `Hunan' from data source \n  `/Users/keredpoh/Desktop/keredpoh/IS415-GAA/In-class_Ex/In-class_Ex07/data/geospatial' \n  using driver `ESRI Shapefile'\nSimple feature collection with 88 features and 7 fields\nGeometry type: POLYGON\nDimension:     XY\nBounding box:  xmin: 108.7831 ymin: 24.6342 xmax: 114.2544 ymax: 30.12812\nGeodetic CRS:  WGS 84\n\n\n\n\nImport csv file into r environment\nNext, we will import Hunan_2012.csv into R by using read_csv() of readr package. The output is R dataframe class. Readr will be loaded as part of tidyverse.\n\nhunan2012 <- read_csv(\"data/aspatial/Hunan_2012.csv\")\n\n\n\nCombining both data frames using left join\nWe want the output in an sf dataframe hence, the left dataframe should be hunan, which has a sf format. We need to find a unique identifier, in this case it is by=“County”, where both data frames have a common field.\n\nhunan_GDPPC<-hunan |> \n  left_join(hunan2012, by=\"County\") |> \n  select(1:4, 7, 15) #selecting only the GDPPC column\n\n\n\nPlotting in a chloropleth map\n\ntmap_mode(\"plot\")\ntm_shape(hunan_GDPPC) +\n  tm_fill(\"GDPPC\",\n          style=\"quantile\",\n          palette=\"Blues\",\n          totle=\"GDPPC\")+\n  tm_borders(alpha = 0.5) +\n  tm_layout(main.title= \"Distribution of GDP per capita by district\", \n            main.title.position=\"center\",\n            main.title.size=1.2,\n            legend.height=0.45,\n            legend.width = 0.35,\n            frame=TRUE)+\n    tm_compass(type=\"8star\", size=2)+\n    tm_scale_bar()+\n    tm_grid(alpha=0.2)"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html",
    "href": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html",
    "title": "Take-home Exercise 2: Spatio-Temporal Analysis",
    "section": "",
    "text": "We will be exploring vaccination rates in DKI Jarkarta, while identifying sub-districts with how the vaccination rate changes over time.\nWe will be mainly using Choropleth Mapping and Analysis, Local Gi analysis, and Emerging Hot Spot Analysis (EHSA) with the aim of discovering Spatio-Temporal trends.\nThis is useful as we are able to then use the trends to help predict the geographic expansion of vaccination rates, and the data can be utilised by the government to bring about positive change in society."
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#data-sets",
    "href": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#data-sets",
    "title": "Take-home Exercise 2: Spatio-Temporal Analysis",
    "section": "1.1 Data Sets",
    "text": "1.1 Data Sets\nWe will be using 2 primary sets of data.\n\n\n\nData set\nSource\nDescription\n\n\n\n\nGeospatial\nINDONESIA GEOSPASIAL\nSub-district of Indonesia\n\n\nAspatial\nRiwayat File Vaksinasi DKI Jakarta\nMonthly numbers of vaccinated people from July 2021 to June 2022 (sub-district level)"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#geospatial-data",
    "href": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#geospatial-data",
    "title": "Take-home Exercise 2: Spatio-Temporal Analysis",
    "section": "1.2 Geospatial Data",
    "text": "1.2 Geospatial Data\nWe will be loading the Geospatial data while converting it to the proper crs format.\n\ngeoJKT <- st_read(dsn = \"data/geospatial/\", layer = \"BATAS_DESA_DESEMBER_2019_DUKCAPIL_DKI_JAKARTA\") %>%   st_transform(crs=23878)\n\nReading layer `BATAS_DESA_DESEMBER_2019_DUKCAPIL_DKI_JAKARTA' from data source \n  `/Users/keredpoh/Desktop/keredpoh/IS415-GAA/Take-home_Ex/Take-home_Ex02/data/geospatial' \n  using driver `ESRI Shapefile'\nSimple feature collection with 269 features and 161 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 106.3831 ymin: -6.370815 xmax: 106.9728 ymax: -5.184322\nGeodetic CRS:  WGS 84\n\n\n\n1.2.1 Checking Missing Values\nWe should never assume that the data set provided has no missing values. We check the values in this code chunk and realise that there are actually 14 na values. We will change it in the later portions.\n\n  which((is.na(geoJKT)) == TRUE) %>%\n  length()\n\n[1] 14\n\n\n\n\n1.2.2 Filling up NA values\nFrom looking at View(geoJKT), we see that the 14 NA values are associated with rows 243 and 244. Let us insert the necessary values.\n\ngeoJKT$KAB_KOTA[243]<-\"JAKARTA UTARA\"\ngeoJKT$KAB_KOTA[244]<-\"JAKARTA UTARA\"\n\ngeoJKT$KODE_DESA[243]<-\"3188888801\"\ngeoJKT$KODE_DESA[244]<-\"3188888802\"\n\n\n\n1.2.3 Trimming Outer Island\nLet us visualise the original polygon. Notice that there are several island that we do not want, as we are only focusing on the main sub-districts of Jakarta, or mainland for short.\n\nqtm(geoJKT)\n\n\n\n\nFrom using the View() function, we can see the different columns of geoJKT. With the help of Google translate, we can see that KAB KOTA means city district.\n\nFrom there, we can further derive that KEPULAUAN SERIBU means outer island, which is something that we do not want for the scope of this assignment. We will use filter() to remove it.\n\ngeoJKT <- filter(geoJKT, KAB_KOTA != \"KEPULAUAN SERIBU\") \ngeoJKT\n\nSimple feature collection with 263 features and 161 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 686587.9 ymin: 9295420 xmax: 718314.5 ymax: 9326648\nProjected CRS: DGN95 / UTM zone 48S\nFirst 10 features:\n   OBJECT_ID  KODE_DESA               DESA   KODE    PROVINSI      KAB_KOTA\n1      25477 3173031006          KEAGUNGAN 317303 DKI JAKARTA JAKARTA BARAT\n2      25478 3173031007             GLODOK 317303 DKI JAKARTA JAKARTA BARAT\n3      25397 3171031003      HARAPAN MULIA 317103 DKI JAKARTA JAKARTA PUSAT\n4      25400 3171031006       CEMPAKA BARU 317103 DKI JAKARTA JAKARTA PUSAT\n5      25390 3171021001         PASAR BARU 317102 DKI JAKARTA JAKARTA PUSAT\n6      25391 3171021002       KARANG ANYAR 317102 DKI JAKARTA JAKARTA PUSAT\n7      25394 3171021005 MANGGA DUA SELATAN 317102 DKI JAKARTA JAKARTA PUSAT\n8      25386 3171011003       PETOJO UTARA 317101 DKI JAKARTA JAKARTA PUSAT\n9      25403 3171041001              SENEN 317104 DKI JAKARTA JAKARTA PUSAT\n10     25408 3171041006             BUNGUR 317104 DKI JAKARTA JAKARTA PUSAT\n     KECAMATAN         DESA_KELUR JUMLAH_PEN JUMLAH_KK LUAS_WILAY KEPADATAN\n1   TAMAN SARI          KEAGUNGAN      21609      7255       0.36     60504\n2   TAMAN SARI             GLODOK       9069      3273       0.37     24527\n3    KEMAYORAN      HARAPAN MULIA      29085      9217       0.53     54465\n4    KEMAYORAN       CEMPAKA BARU      41913     13766       0.97     42993\n5  SAWAH BESAR         PASAR BARU      15793      5599       1.76      8971\n6  SAWAH BESAR       KARANG ANYAR      33383     11276       0.47     71628\n7  SAWAH BESAR MANGGA DUA SELATAN      35906     12817       1.31     27463\n8       GAMBIR       PETOJO UTARA      21828      7328       1.14     19144\n9        SENEN              SENEN       8643      3049       0.82     10594\n10       SENEN             BUNGUR      23001      7944       0.67     34418\n   PERPINDAHA JUMLAH_MEN PERUBAHAN WAJIB_KTP SILAM KRISTEN KHATOLIK HINDU BUDHA\n1         102         68     20464     16027 15735    2042      927    15  2888\n2          25         52      8724      7375  1842    2041     1460     9  3716\n3         131        104     27497     20926 26328    1710      531    42   469\n4         170        151     38323     30264 36813    3392     1082   127   495\n5          58         36     15006     12559  7401    3696     1602   622  2462\n6         113         60     31014     24784 23057    4058     2100    25  4134\n7         178         92     33021     26730 23424    5130     2575    27  4740\n8          87         83     19275     16478 15355    3061     1838     9  1559\n9          56         21      8306      6298  5450    1991      705   115   381\n10        128         70     21652     16987 17431    3099     1258    47  1143\n   KONGHUCU KEPERCAYAA  PRIA WANITA BELUM_KAWI KAWIN CERAI_HIDU CERAI_MATI   U0\n1         2          0 11049  10560      10193 10652        255        509 1572\n2         1          0  4404   4665       4240  4364        136        329  438\n3         5          0 14696  14389      14022 13450        430       1183 2232\n4         1          3 21063  20850      20336 19487        523       1567 3092\n5        10          0  7833   7960       7578  7321        217        677  802\n6         9          0 16887  16496      15860 15945        381       1197 2220\n7        10          0 18338  17568      17239 17198        476        993 2399\n8         4          2 10955  10873      10551 10070        305        902 1406\n9         1          0  4446   4197       4360  3915        101        267  585\n10        1         22 11679  11322      11010 11231        206        554 1679\n     U5  U10  U15  U20  U25  U30  U35  U40  U45  U50  U55  U60 U65 U70 U75\n1  1751 1703 1493 1542 1665 1819 1932 1828 1600 1408 1146  836 587 312 415\n2   545  524  521  543  628  691  782  675  607  619  602  614 555 311 414\n3  2515 2461 2318 2113 2170 2363 2595 2371 2250 1779 1379 1054 654 411 420\n4  3657 3501 3486 3098 3024 3188 3662 3507 3391 2696 1909 1397 970 631 704\n5   995 1016 1106 1081 1002 1236 1422 1200 1163 1099  979  880 747 488 577\n6  2687 2653 2549 2313 2446 2735 3034 2689 2470 2129 1843 1386 958 554 717\n7  2953 2754 2666 2515 2725 3122 3385 3037 2597 2282 1930 1394 932 573 642\n8  1625 1625 1718 1612 1612 1707 1806 1746 1672 1427 1258  968 706 412 528\n9   758  714  672  583  670  797  796  740  577  495  437  331 234 129 125\n10 1794 1797 1789 1667 1773 1957 1952 1785 1667 1489 1219  941 647 386 459\n   TIDAK_BELU BELUM_TAMA TAMAT_SD SLTP  SLTA DIPLOMA_I DIPLOMA_II DIPLOMA_IV\n1        3426       1964     2265 3660  8463        81        428       1244\n2        1200        481      655 1414  3734        23        273       1241\n3        4935       2610     2346 3167 12172        84       1121       2477\n4        7328       3763     2950 5138 16320       179       1718       4181\n5        2121       1278     1169 2236  5993        43        573       2199\n6        5075       3241     4424 5858 12448        85        604       1582\n7        6089       3184     3620 6159 14080        83        740       1850\n8        3290       1951     1660 3008  8743        63        734       2189\n9        1401        768      877 1417  2936        27        280        804\n10       3506       2065     1609 2918 10155        79        708       1832\n   STRATA_II STRATA_III BELUM_TIDA APARATUR_P TENAGA_PEN WIRASWASTA PERTANIAN\n1         74          4       3927         81         70       8974         1\n2         46          2       1388         10         43       3832         0\n3        166          7       5335        513        288      10662         1\n4        315         21       8105        931        402      14925         3\n5        168         13       2676        156         81       6145         1\n6         63          3       5985        132        123      12968         2\n7         92          9       6820         79         73      14714         5\n8        174         16       3809        145        109       8549         1\n9        125          8       1574        369         30       3175         0\n10       122          7       3948        609        137       8284         0\n   NELAYAN AGAMA_DAN PELAJAR_MA TENAGA_KES PENSIUNAN LAINNYA    GENERATED\n1        0         6       4018         28        57    4447 30 Juni 2019\n2        0         6       1701         29        50    2010 30 Juni 2019\n3        2         5       6214         80       276    5709 30 Juni 2019\n4        0        40       9068        142       498    7799 30 Juni 2019\n5        1        49       3135         60        59    3430 30 Juni 2019\n6        1        10       6823         48        56    7235 30 Juni 2019\n7        2        11       6866         55        75    7206 30 Juni 2019\n8        0        54       4731         68        97    4265 30 Juni 2019\n9        0        15       1779         89        53    1559 30 Juni 2019\n10       0        16       5063         93       146    4705 30 Juni 2019\n   KODE_DES_1 BELUM_ MENGUR_ PELAJAR_ PENSIUNA_1 PEGAWAI_ TENTARA KEPOLISIAN\n1  3173031006   3099    4447     3254         80       48       4         10\n2  3173031007   1032    2026     1506         65        5       0          1\n3  3171031003   4830    5692     6429        322      366      41         16\n4  3171031006   7355    7692     8957        603      612      57         42\n5  3171021001   2390    3500     3185         70       65      74          2\n6  3171021002   5330    7306     6993         75       73      20         17\n7  3171021005   5605    7042     6858         97       48      12          7\n8  3171011003   3365    4357     4719        132       89      11          9\n9  3171041001   1553    1627     1701         67       91      90        165\n10 3171041006   3924    4731     4885        165      174     340         15\n   PERDAG_ PETANI PETERN_ NELAYAN_1 INDUSTR_ KONSTR_ TRANSP_ KARYAW_ KARYAW1\n1       31      0       0         1        7       3       2    6735       9\n2        5      0       0         0        3       0       0    3034       2\n3        1      1       0         1        4       2       7    7347      74\n4        3      2       0         0        3       6       4   10185     231\n5        2      1       0         0        0       1       0    4319      16\n6        3      1       0         0        1       1       0    9405      13\n7        1      1       0         1        7       5       3   10844      10\n8        0      2       0         0        0       0       0    6909      24\n9        1      0       0         0        2       2       0    1959      17\n10       2      0       0         0        2       5       0    5661      29\n   KARYAW1_1 KARYAW1_12 BURUH BURUH_ BURUH1 BURUH1_1 PEMBANT_ TUKANG TUKANG_1\n1          0         23   515      1      0        0        1      0        1\n2          0          4   155      0      0        0        1      0        0\n3          5         25   971      0      1        0        4      0        0\n4         15         35   636      0      0        0        1      0        0\n5          0         16   265      1      0        0        7      0        0\n6          0          6  1085      0      0        0        5      0        0\n7          1          9   652      1      1        0        1      1        0\n8          0         11   357      0      0        0        6      0        0\n9          2         11   226      0      0        0        1      0        0\n10         4         15   542      0      0        0       10      0        0\n   TUKANG_12 TUKANG__13 TUKANG__14 TUKANG__15 TUKANG__16 TUKANG__17 PENATA\n1          0          1          0          1          7          1      0\n2          0          1          0          0          4          0      0\n3          0          0          0          0         10          0      0\n4          0          1          0          1         14          0      0\n5          0          0          0          0          2          0      1\n6          0          0          0          0          7          0      0\n7          0          1          0          1          8          1      0\n8          0          0          0          0          8          0      0\n9          0          0          0          0          1          0      1\n10         0          1          0          0          0          0      0\n   PENATA_ PENATA1_1 MEKANIK SENIMAN_ TABIB PARAJI_ PERANCA_ PENTER_ IMAM_M\n1        0         0      11        4     1       0        0       1      0\n2        0         0       1        0     0       0        0       0      0\n3        0         0      10       12     0       0        0       0      0\n4        0         1       8       28     0       0        0       0      0\n5        0         0       4        2     1       0        0       1      0\n6        0         0       7        3     0       0        0       0      0\n7        0         1       8        4     1       0        0       0      0\n8        0         2       9        9     0       0        1       0      0\n9        0         0       0        6     0       0        0       0      0\n10       0         1      15        7     0       0        2       0      0\n   PENDETA PASTOR WARTAWAN USTADZ JURU_M PROMOT ANGGOTA_ ANGGOTA1 ANGGOTA1_1\n1        2      0        7      6      0      0        0        0          0\n2        4      1        1      1      0      0        1        0          0\n3        5      0       16      1      0      0        0        0          0\n4       33      1       27      5      0      0        0        0          0\n5       20      8        4      0      0      0        0        0          0\n6       10      0        8      0      0      0        1        0          0\n7        8      0        6      1      0      0        0        0          0\n8       30     23        9      0      0      0        1        0          0\n9       14      0        5      0      0      0        0        0          0\n10      14      0        9      1      0      0        0        0          0\n   PRESIDEN WAKIL_PRES ANGGOTA1_2 ANGGOTA1_3 DUTA_B GUBERNUR WAKIL_GUBE BUPATI\n1         0          0          0          0      0        0          0      0\n2         0          0          0          0      0        0          0      0\n3         0          0          0          0      0        0          0      0\n4         0          0          0          0      0        0          0      0\n5         0          0          0          0      0        0          0      0\n6         0          0          0          0      0        0          0      0\n7         0          0          0          0      0        0          0      0\n8         0          0          0          0      0        0          0      0\n9         0          0          0          0      0        0          0      0\n10        0          0          0          0      0        0          0      0\n   WAKIL_BUPA WALIKOTA WAKIL_WALI ANGGOTA1_4 ANGGOTA1_5 DOSEN GURU PILOT\n1           0        0          0          0          0     3   72     1\n2           0        0          0          0          0     2   40     0\n3           0        0          0          0          0    23  272     2\n4           0        0          0          0          0    36  378     3\n5           0        0          0          0          0    11   69     0\n6           0        0          0          0          0     3  126     0\n7           0        0          0          0          0     5   71     0\n8           0        0          0          0          0    14   97     0\n9           0        0          0          0          0     6   23     0\n10          0        0          0          0          0    28  106     0\n   PENGACARA_ NOTARIS ARSITEK AKUNTA_ KONSUL_ DOKTER BIDAN PERAWAT APOTEK_\n1           4       0       1       1       1     16     3       7       0\n2           1       0       0       0       0     32     1       0       0\n3           8       3       2       0       2     35     9      25       2\n4          22       5       3       0      11     68    18      44       3\n5           5       4       2       0       4     63     1       3       0\n6           5       0       0       0       0     27     3      12       1\n7           4       0       0       0       0     32     3      20       2\n8           4       5       4       2       6     63     3       7       1\n9           3       0       1       0       2     48    10      26       2\n10         12       5       2       1       3     60    10      16       3\n   PSIKIATER PENYIA_ PENYIA1 PELAUT PENELITI SOPIR PIALAN PARANORMAL PEDAGA_\n1          0       0       0      0        0    65      0          0     379\n2          0       0       0      0        1     3      0          0     126\n3          1       0       0      6        0    94      0          0     321\n4          0       0       0     16        0   123      0          0     562\n5          0       0       0      0        1    61      0          0     412\n6          0       0       0      2        0    76      0          0     202\n7          0       0       0      4        0    79      0          1     225\n8          0       0       0      2        0    63      0          0     271\n9          1       0       0      4        0    44      0          0     212\n10         0       0       0      2        0   101      0          0     331\n   PERANG_ KEPALA_ BIARAW_ WIRASWAST_ LAINNYA_12 LUAS_DESA KODE_DES_3\n1        0       0       0       1370         94     25476 3173031006\n2        0       0       1        611         57     25477 3173031007\n3        0       0       0       1723         82     25396 3171031003\n4        0       0       0       3099        122     25399 3171031006\n5        0       0      22       1128         41     25389 3171021001\n6        0       0       3       2321         89     25390 3171021002\n7        0       0       0       2677        158     25393 3171021005\n8        0       0       2       1018         37     25385 3171011003\n9        0       0       1        871         15     25402 3171041001\n10       0       0       0       1749         94     25407 3171041006\n           DESA_KEL_1 KODE_12                       geometry\n1           KEAGUNGAN  317303 MULTIPOLYGON (((700997 9320...\n2              GLODOK  317303 MULTIPOLYGON (((700826.4 93...\n3       HARAPAN MULIA  317103 MULTIPOLYGON (((705543.4 93...\n4        CEMPAKA BARU  317103 MULTIPOLYGON (((706164.3 93...\n5          PASAR BARU  317102 MULTIPOLYGON (((703261.2 93...\n6        KARANG ANYAR  317102 MULTIPOLYGON (((702680.1 93...\n7  MANGGA DUA SELATAN  317102 MULTIPOLYGON (((702843.6 93...\n8        PETOJO UTARA  317101 MULTIPOLYGON (((701480.2 93...\n9               SENEN  317104 MULTIPOLYGON (((703947.8 93...\n10             BUNGUR  317104 MULTIPOLYGON (((704573.6 93...\n\n\n\n\n1.2.4 Visualising of Map\nAs shown in the plot, there are no NA values, or outer island. that means that we have successfully removed the outer island and NA values.\n\ntmap_mode(\"plot\")\ntm_shape(geoJKT) + \n  tm_polygons(\"KAB_KOTA\")\n\n\n\n\n\n\n1.2.5 Choosing relavent fields\nFor the scope of this assignment, let us retain the first 9 columns from geoJKT using select().\n\ngeoJKT <- geoJKT %>%\n  select(1:9)\n\n\n\n1.2.6 Translating columns\nAs the columns are not in English, let us translate and change the name using rename().\n\ngeoJKT <- geoJKT %>% \n  dplyr::rename(\n    'village_code' = 'KODE_DESA',\n    'subdistrict' = 'KECAMATAN')"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#aspatial-data",
    "href": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#aspatial-data",
    "title": "Take-home Exercise 2: Spatio-Temporal Analysis",
    "section": "1.3 Aspatial Data",
    "text": "1.3 Aspatial Data\nAs mentioned earlier, we will be using data from Riwayat File Vaksinasi DKI Jakarta. We will be looking at data from the start of July 2021 till the end of June 2022.\n\n1.3.1 Loading Aspatial data\n\nsetwd(\"data/aspatial/\") \n\naspatial <- list.files(pattern = \".xlsx\")\n\nfor (file in aspatial) {\n  assign(gsub(\".xlsx\", \"\", file), read_excel(file))\n}\n\n\n\n1.3.2 Columns in each data set\nWe can use names() to view the true nature of each name as it is sometimes hidden when we view the table alone.\n\nnames(`Data Vaksinasi Berbasis Kelurahan (01 Desember 2021)`)\n\n [1] \"KODE KELURAHAN\"                            \n [2] \"WILAYAH KOTA\"                              \n [3] \"KECAMATAN\"                                 \n [4] \"KELURAHAN\"                                 \n [5] \"SASARAN\"                                   \n [6] \"BELUM VAKSIN\"                              \n [7] \"JUMLAH\\r\\nDOSIS 1\"                         \n [8] \"JUMLAH\\r\\nDOSIS 2\"                         \n [9] \"TOTAL VAKSIN\\r\\nDIBERIKAN\"                 \n[10] \"LANSIA\\r\\nDOSIS 1\"                         \n[11] \"LANSIA\\r\\nDOSIS 2\"                         \n[12] \"LANSIA TOTAL \\r\\nVAKSIN DIBERIKAN\"         \n[13] \"PELAYAN PUBLIK\\r\\nDOSIS 1\"                 \n[14] \"PELAYAN PUBLIK\\r\\nDOSIS 2\"                 \n[15] \"PELAYAN PUBLIK TOTAL\\r\\nVAKSIN DIBERIKAN\"  \n[16] \"GOTONG ROYONG\\r\\nDOSIS 1\"                  \n[17] \"GOTONG ROYONG\\r\\nDOSIS 2\"                  \n[18] \"GOTONG ROYONG TOTAL\\r\\nVAKSIN DIBERIKAN\"   \n[19] \"TENAGA KESEHATAN\\r\\nDOSIS 1\"               \n[20] \"TENAGA KESEHATAN\\r\\nDOSIS 2\"               \n[21] \"TENAGA KESEHATAN TOTAL\\r\\nVAKSIN DIBERIKAN\"\n[22] \"TAHAPAN 3\\r\\nDOSIS 1\"                      \n[23] \"TAHAPAN 3\\r\\nDOSIS 2\"                      \n[24] \"TAHAPAN 3 TOTAL\\r\\nVAKSIN DIBERIKAN\"       \n[25] \"REMAJA\\r\\nDOSIS 1\"                         \n[26] \"REMAJA\\r\\nDOSIS 2\"                         \n[27] \"REMAJA TOTAL\\r\\nVAKSIN DIBERIKAN\"          \n\n\n\n\n1.3.3 Crafting a function for wrangling\nAs there are 12 different data sets, data wrangling is not as simple.\n\nwe will have to combine them together using a list\nselect relevant columns\ntranslating to English\nmutate a new column for total population & vaccination rate\ncreate a date column for each data set.\n\nLet us manually input the month according to chronological order, and run the data frames through the function we just created. We will also be using as.Date() to ensure the date format.\n\nmonth_list <- list(`Data Vaksinasi Berbasis Kelurahan (01 Juli 2021)`, `Data Vaksinasi Berbasis Kelurahan (1 Agustus 2021)`, `Data Vaksinasi Berbasis Kelurahan (01 September 2021)`, `Data Vaksinasi Berbasis Kelurahan (01 Oktober 2021)`, `Data Vaksinasi Berbasis Kelurahan (01 November 2021)`, `Data Vaksinasi Berbasis Kelurahan (01 Desember 2021)`, `Data Vaksinasi Berbasis Kelurahan (01 Januari 2022)`, `Data Vaksinasi Berbasis Kelurahan (01 Februari 2022)`, `Data Vaksinasi Berbasis Kelurahan (02 Maret 2022)`, `Data Vaksinasi Berbasis Kelurahan (01 April 2022)`, `Data Vaksinasi Berbasis Kelurahan (01 Mei 2022)`, `Data Vaksinasi Berbasis Kelurahan (01 Juni 2022)`)\n\ndate <- c(\"2021-7-1\", \"2021-8-1\", \"2021-9-1\", \"2021-10-1\", \"2021-11-1\", \"2021-12-1\", \"2022-1-1\", \"2022-2-1\", \"2022-3-1\", \"2022-4-1\", \"2022-5-1\", \"2022-6-1\")\n\nlists <- list()\nfor (i in c(1:12)){\n  lists[[i]] <- month_list[[i]] %>% \n    rename(village_code =`KODE KELURAHAN`,\n           city_region =`WILAYAH KOTA`,\n           targeted = `SASARAN`, \n           not_vaccinated =`BELUM VAKSIN`) %>%\n    select(village_code, city_region, not_vaccinated, targeted) %>%\n    mutate(date = as.Date(date[i]),\n           .before = 1)\n}\n\n\n\n1.3.4 Combination of Aspatial Data\nWe will combine them into a single data frame using Reduce()\n\naspatial <- Reduce(rbind, lists)\nglimpse(aspatial)\n\nRows: 3,216\nColumns: 5\n$ date           <date> 2021-07-01, 2021-07-01, 2021-07-01, 2021-07-01, 2021-0…\n$ village_code   <chr> NA, \"3172051003\", \"3173041007\", \"3175041005\", \"31750310…\n$ city_region    <chr> NA, \"JAKARTA UTARA\", \"JAKARTA BARAT\", \"JAKARTA TIMUR\", …\n$ not_vaccinated <dbl> 5041111, 13272, 16477, 18849, 5743, 15407, 12503, 11268…\n$ targeted       <dbl> 7739060, 20393, 25785, 25158, 8683, 22768, 18930, 20267…"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#merging-geospatial-and-aspatial-data",
    "href": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#merging-geospatial-and-aspatial-data",
    "title": "Take-home Exercise 2: Spatio-Temporal Analysis",
    "section": "1.4 Merging Geospatial and Aspatial Data",
    "text": "1.4 Merging Geospatial and Aspatial Data\nWe will be merging both data sets by village codes, as it is present in both. Similarly to Geospatial data, we will have to filter out the outer island in Aspatial data, categorised by KAB.ADM.KEP.SERIBU as it is not present in the Geospatial data.\n\nunique(aspatial$city_region)\n\n[1] NA                   \"JAKARTA UTARA\"      \"JAKARTA BARAT\"     \n[4] \"JAKARTA TIMUR\"      \"JAKARTA SELATAN\"    \"JAKARTA PUSAT\"     \n[7] \"KAB.ADM.KEP.SERIBU\"\n\n\nWe will remove it through filter(), and make a new column which shows the vaccination rate, and select the rows needed\n\naspatial <- aspatial %>% \n   filter(city_region != \"KAB.ADM.KEP.SERIBU\") %>%\n  mutate(vaccination_rate = as.numeric((targeted-not_vaccinated)/targeted)) %>%\n  select(date, village_code, vaccination_rate)\n\nWe use setdiff() to see what is present in geoJKT which is not in aspatial.\n\nsetdiff(geoJKT$village_code, aspatial$village_code)\n\n[1] \"3188888801\" \"3188888802\"\n\n\nWe will manually add the two sub districts so that both data frames will match after joining.\n\naspatial <- rbind(aspatial, c(\"2021-07-01\", 3188888801,NA),\n                       c(\"2021-08-01\", 3188888801,NA),\n                       c(\"2021-09-01\", 3188888801,NA),\n                       c(\"2021-10-01\", 3188888801,NA),\n                       c(\"2021-11-01\", 3188888801,NA),\n                       c(\"2021-12-01\", 3188888801,NA),\n                       c(\"2022-01-01\", 3188888801,NA),\n                       c(\"2022-02-01\", 3188888801,NA),\n                       c(\"2022-03-01\", 3188888801,NA),\n                       c(\"2022-04-01\", 3188888801,NA),\n                       c(\"2022-05-01\", 3188888801,NA),\n                       c(\"2022-06-01\", 3188888801,NA),\n                       c(\"2021-07-01\", 3188888802,NA),\n                       c(\"2021-08-01\", 3188888802,NA),\n                       c(\"2021-09-01\", 3188888802,NA),\n                       c(\"2021-10-01\", 3188888802,NA),\n                       c(\"2021-11-01\", 3188888802,NA),\n                       c(\"2021-12-01\", 3188888802,NA),\n                       c(\"2022-01-01\", 3188888802,NA),\n                       c(\"2022-02-01\", 3188888802,NA),\n                       c(\"2022-03-01\", 3188888802,NA),\n                       c(\"2022-04-01\", 3188888802,NA),\n                       c(\"2022-05-01\", 3188888802,NA),\n                       c(\"2022-06-01\", 3188888802,NA))\n\nLet us finally join both data sets using left_join() by village code\n\nvaccinationJKT <- left_join(aspatial, geoJKT, \n                         by = c(\"village_code\")) %>%\n  mutate(vaccination_rate = as.numeric(vaccination_rate)) %>%\n   na.exclude() %>%\n   st_as_sf() \n\nWe will then select the important columns\n\nvaccinationJKT %>%\n  select(date, village_code, vaccination_rate)\n\nSimple feature collection with 3132 features and 3 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 686587.9 ymin: 9295420 xmax: 718314.5 ymax: 9326648\nProjected CRS: DGN95 / UTM zone 48S\n# A tibble: 3,132 × 4\n   date       village_code vaccination_rate                             geometry\n   <date>     <chr>                   <dbl>                   <MULTIPOLYGON [m]>\n 1 2021-07-01 3172051003              0.349 (((706161.9 9323032, 706107.6 93230…\n 2 2021-07-01 3173041007              0.361 (((699268 9320073, 699277.9 9320051…\n 3 2021-07-01 3175041005              0.251 (((705677.8 9306675, 705674.5 93066…\n 4 2021-07-01 3175031003              0.339 (((706070 9313044, 706078.8 9313035…\n 5 2021-07-01 3175101006              0.323 (((711830 9302993, 711816.7 9302969…\n 6 2021-07-01 3174031002              0.340 (((700371 9308387, 700383 9308383, …\n 7 2021-07-01 3175051002              0.444 (((704532.3 9301182, 704545.6 93011…\n 8 2021-07-01 3175041004              0.267 (((706784.6 9305766, 706753.6 93057…\n 9 2021-07-01 3171071002              0.395 (((700406 9314413, 700408.6 9314356…\n10 2021-07-01 3175031002              0.276 (((706499.5 9311596, 706506.5 93115…\n# … with 3,122 more rows"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#creating-a-tmap-function",
    "href": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#creating-a-tmap-function",
    "title": "Take-home Exercise 2: Spatio-Temporal Analysis",
    "section": "2.1 Creating a tmap function",
    "text": "2.1 Creating a tmap function\nCreating a function will help us greatly, as there are 12 months of tmap plot to visualise.\n\nplotting <- function(i){\n  vac <- vaccinationJKT %>%\n    filter(date == i)\n  tm_shape(vac) +\n  tm_fill(\"vaccination_rate\",\n          n = 10,\n          style = \"quantile\",\n          palette = \"Blues\",\n          title = \"Vaccination Rate\") +\n  tm_layout(main.title = paste(i),\n            main.title.position = \"left\",\n            legend.height = 0.7, \n            legend.width = 0.9,\n            frame = TRUE) +\n  tm_borders(alpha = 0.5) +\n  tm_grid(alpha = 0.3)\n}\n\nWe will be splitting them into groups of 4, into 3 different section in chronological order so that we can visualise it easier\n\ntmap_mode(\"plot\")\ntmap_arrange(plotting(\"2021-07-01\"),\n             plotting(\"2021-08-01\"),\n             plotting(\"2021-09-01\"),\n             plotting(\"2021-10-01\"),\n             ncol = 2)\n\n\n\n\n\ntmap_arrange(plotting(\"2021-11-01\"),\n             plotting(\"2021-12-01\"),\n             plotting(\"2022-01-01\"),\n             plotting(\"2022-02-01\"),\n             ncol = 2)\n\n\n\n\n\ntmap_arrange(plotting(\"2022-03-01\"),\n             plotting(\"2022-04-01\"),\n             plotting(\"2022-05-01\"),\n             plotting(\"2022-06-01\"),\n             ncol = 2)"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#spatial-patterns-from-chloropleth-map-max-200-words",
    "href": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#spatial-patterns-from-chloropleth-map-max-200-words",
    "title": "Take-home Exercise 2: Spatio-Temporal Analysis",
    "section": "2.2 Spatial Patterns from chloropleth map (max 200 words)",
    "text": "2.2 Spatial Patterns from chloropleth map (max 200 words)\nWe can tell that the vaccination rate in the southern area is now comparable to the rest of the area, as it was initially much lower as compared to the other sub districts.\nOverall, The choropleth map shows that vaccination rates in Jakarta have been increasing over time. This is seen from the way the bins have developed, where the lower limit has increased with time. This shows that the vaccination rate is increasing.\nFrom the span of 12 months (July 2021 to June 2022), we can see that the lower bound is 0.227 to 0.781, further proving the accuracy of the pattern."
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#spatial-patterns-from-chloropleth-map-not-more-than-200-words",
    "href": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#spatial-patterns-from-chloropleth-map-not-more-than-200-words",
    "title": "Take-home Exercise 2: Spatio-Temporal Analysis",
    "section": "2.2 Spatial Patterns from chloropleth map (not more than 200 words)",
    "text": "2.2 Spatial Patterns from chloropleth map (not more than 200 words)\nWe can tell that the vaccination rate in the southern area is now comparable to the rest of the area, as it was initially much lower as compared to the other sub districts.\nOverall, The choropleth map shows that vaccination rates in Jakarta have been increasing over time. This is seen from the way the bins have developed, where the lower limit has increased with time. This shows that the vaccination rate is increasing.\nFrom the span of 12 months (July 2021 to June 2022), we can see that the lower bound is 0.227 to 0.781, further proving the accuracy of the pattern."
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#function-to-generate-gstar-values",
    "href": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#function-to-generate-gstar-values",
    "title": "Take-home Exercise 2: Spatio-Temporal Analysis",
    "section": "3.1 Function to generate gstar values",
    "text": "3.1 Function to generate gstar values\nWe will need a function to generate from all 12 months.\n\n3.1.1 Computing Contiguity Spatial Weights\n\nmonth <- vaccinationJKT %>%\n  filter(date == \"2021-07-01\")\nwm_q <- month %>%\n  na.exclude() %>%\n  mutate(nb = st_contiguity(geometry),\n         wt = st_inverse_distance(nb, geometry,\n                                   scale = 1,\n                                   alpha = 1),\n                                  .before = 1)\nwm_q\n\nSimple feature collection with 261 features and 13 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 686587.9 ymin: 9295420 xmax: 718314.5 ymax: 9326648\nProjected CRS: DGN95 / UTM zone 48S\n# A tibble: 261 × 14\n   nb    wt     date       villag…¹ vacci…² OBJEC…³ DESA    KODE PROVI…⁴ KAB_K…⁵\n * <nb>  <list> <date>     <chr>      <dbl>   <dbl> <chr>  <dbl> <chr>   <chr>  \n 1 <int> <dbl>  2021-07-01 3172051…   0.349   25455 ANCOL 317205 DKI JA… JAKART…\n 2 <int> <dbl>  2021-07-01 3173041…   0.361   25486 ANGKE 317304 DKI JA… JAKART…\n 3 <int> <dbl>  2021-07-01 3175041…   0.251   25605 BALE… 317504 DKI JA… JAKART…\n 4 <int> <dbl>  2021-07-01 3175031…   0.339   25595 BALI… 317503 DKI JA… JAKART…\n 5 <int> <dbl>  2021-07-01 3175101…   0.323   25642 BAMB… 317510 DKI JA… JAKART…\n 6 <int> <dbl>  2021-07-01 3174031…   0.340   25531 BANG… 317403 DKI JA… JAKART…\n 7 <int> <dbl>  2021-07-01 3175051…   0.444   25609 BARU  317505 DKI JA… JAKART…\n 8 <int> <dbl>  2021-07-01 3175041…   0.267   25604 BATU… 317504 DKI JA… JAKART…\n 9 <int> <dbl>  2021-07-01 3171071…   0.395   25418 BEND… 317107 DKI JA… JAKART…\n10 <int> <dbl>  2021-07-01 3175031…   0.276   25594 BIDA… 317503 DKI JA… JAKART…\n# … with 251 more rows, 4 more variables: subdistrict <chr>, DESA_KELUR <chr>,\n#   JUMLAH_PEN <dbl>, geometry <MULTIPOLYGON [m]>, and abbreviated variable\n#   names ¹​village_code, ²​vaccination_rate, ³​OBJECT_ID, ⁴​PROVINSI, ⁵​KAB_KOTA\n\n\n\n\n3.1.2 Computing local GI\nWe will be using set.seed() to ensure that the output will be the same\n\nset.seed(1234)\njuly_LGI <- wm_q %>%\n  mutate(local_Gi = local_gstar_perm(vaccination_rate, nb, wt, nsim = 99), .before = 1) %>%\n  unnest(local_Gi)\n\n\n\n3.1.3 Visualizing p-value of local Gi\n\ntmap_mode(\"plot\")\ntm_shape(july_LGI) +\n    tm_polygons() +\n    tm_shape(july_LGI %>% filter(p_sim < 0.05)) +\n    tm_fill(\"gi_star\") +\n    tm_borders(alpha = 0.5) +\n    tm_layout(main.title = paste(\"local Gi Significance\", \"(\", july_LGI$date[1],\")\"),\n              main.title.size = 0.8)\n\n\n\n\n\n\n3.1.4 local GI computation function\nAgain, we add set.seed() to ensure that the output will always be the same\n\nlocal_gi <- function(x){\n  set.seed(1234)\n  month <- vaccinationJKT %>%\n    filter(date == x)\n  wm_q <- month %>%\n    na.exclude() %>%\n    mutate(nb = st_contiguity(geometry),\n           wt = st_inverse_distance(nb, geometry,\n                                   scale = 1,\n                                   alpha = 1))\n  result <- wm_q %>%\n    mutate(local_gi = local_gstar_perm(vaccination_rate,\n                                   nb,\n                                   wt,\n                                   nsim = 99),\n           .before = 1) %>% \n    unnest(local_gi)\n  return(result)\n}\n\n\ndate <- c(\"2021-07-01\", \"2021-08-01\", \"2021-09-01\", \"2021-10-01\", \"2021-11-01\", \"2021-12-01\",\n          \"2022-01-01\", \"2022-02-01\", \"2022-03-01\",\"2022-04-01\", \"2022-05-01\", \"2022-06-01\")\nmonth_GI <- list()\nfor (i in 1:12){\n  month_GI[[i]] <- local_gi(date[i])\n}\n\n\n\n3.1.5 Tmap Function\n\ngi_graph <- function(x){\n  HCSA_sig <- x %>%\n    filter(p_sim < 0.05)\n  HCSA_plots <- tm_shape(x) +\n    tm_polygons() +\n    tm_borders(alpha = 0.5) +\n    tm_shape(HCSA_sig) +\n      tm_fill(\"gi_star\",\n              palette = \"Reds\",\n              midpoint = 0) +\n      tm_borders(alpha = 0.4) +\n    tm_layout(main.title = paste(\"significant local Gi\", \"(\",x$date[1],\")\"),\n              main.title.size = 0.8)\n  return(HCSA_plots)\n}\n\nWe will now plot it according to chronological order.\n\ntmap_mode(\"plot\")\ntmap_arrange(gi_graph(month_GI[[1]]),\n             gi_graph(month_GI[[2]]),\n             gi_graph(month_GI[[3]]),\n             gi_graph(month_GI[[4]]),\n             ncol = 2)\n\n\n\n\n\ntmap_arrange(gi_graph(month_GI[[5]]),\n             gi_graph(month_GI[[6]]),\n             gi_graph(month_GI[[7]]),\n             gi_graph(month_GI[[8]]),\n             ncol = 2)\n\n\n\n\n\ntmap_arrange(gi_graph(month_GI[[9]]),\n             gi_graph(month_GI[[10]]),\n             gi_graph(month_GI[[11]]),\n             gi_graph(month_GI[[12]]),\n             ncol = 2)"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#computing-contiguity-spatial-weights",
    "href": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#computing-contiguity-spatial-weights",
    "title": "Take-home Exercise 2: Spatio-Temporal Analysis",
    "section": "3.1.1 Computing Contiguity Spatial Weights",
    "text": "3.1.1 Computing Contiguity Spatial Weights\n\nmonth <- vaccinationJKT %>%\n  filter(date == \"2021-07-01\")\nwm_q <- month %>%\n  na.exclude() %>%\n  mutate(nb = st_contiguity(geometry),\n         wt = st_inverse_distance(nb, geometry,\n                                   scale = 1,\n                                   alpha = 1),\n                                  .before = 1)\nwm_q\n\nSimple feature collection with 261 features and 13 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 686587.9 ymin: 9295420 xmax: 718314.5 ymax: 9326648\nProjected CRS: DGN95 / UTM zone 48S\n# A tibble: 261 × 14\n   nb    wt     date       villag…¹ vacci…² OBJEC…³ DESA    KODE PROVI…⁴ KAB_K…⁵\n * <nb>  <list> <date>     <chr>      <dbl>   <dbl> <chr>  <dbl> <chr>   <chr>  \n 1 <int> <dbl>  2021-07-01 3172051…   0.349   25455 ANCOL 317205 DKI JA… JAKART…\n 2 <int> <dbl>  2021-07-01 3173041…   0.361   25486 ANGKE 317304 DKI JA… JAKART…\n 3 <int> <dbl>  2021-07-01 3175041…   0.251   25605 BALE… 317504 DKI JA… JAKART…\n 4 <int> <dbl>  2021-07-01 3175031…   0.339   25595 BALI… 317503 DKI JA… JAKART…\n 5 <int> <dbl>  2021-07-01 3175101…   0.323   25642 BAMB… 317510 DKI JA… JAKART…\n 6 <int> <dbl>  2021-07-01 3174031…   0.340   25531 BANG… 317403 DKI JA… JAKART…\n 7 <int> <dbl>  2021-07-01 3175051…   0.444   25609 BARU  317505 DKI JA… JAKART…\n 8 <int> <dbl>  2021-07-01 3175041…   0.267   25604 BATU… 317504 DKI JA… JAKART…\n 9 <int> <dbl>  2021-07-01 3171071…   0.395   25418 BEND… 317107 DKI JA… JAKART…\n10 <int> <dbl>  2021-07-01 3175031…   0.276   25594 BIDA… 317503 DKI JA… JAKART…\n# … with 251 more rows, 4 more variables: subdistrict <chr>, DESA_KELUR <chr>,\n#   JUMLAH_PEN <dbl>, geometry <MULTIPOLYGON [m]>, and abbreviated variable\n#   names ¹​village_code, ²​vaccination_rate, ³​OBJECT_ID, ⁴​PROVINSI, ⁵​KAB_KOTA"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#computing-local-gi",
    "href": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#computing-local-gi",
    "title": "Take-home Exercise 2: Spatio-Temporal Analysis",
    "section": "3.1.2 Computing local GI",
    "text": "3.1.2 Computing local GI\nWe will be using set.seed() to ensure that the output will be the same\n\nset.seed(1234)\njuly_LGI <- wm_q %>%\n  mutate(local_Gi = local_gstar_perm(vaccination_rate, nb, wt, nsim = 99), .before = 1) %>%\n  unnest(local_Gi)"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#visualizing-p-value-of-local-gi",
    "href": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#visualizing-p-value-of-local-gi",
    "title": "Take-home Exercise 2: Spatio-Temporal Analysis",
    "section": "3.1.3 Visualizing p-value of local Gi",
    "text": "3.1.3 Visualizing p-value of local Gi\n\ntmap_mode(\"plot\")\ntm_shape(july_LGI) +\n    tm_polygons() +\n    tm_shape(july_LGI %>% filter(p_sim < 0.05)) +\n    tm_fill(\"gi_star\") +\n    tm_borders(alpha = 0.5) +\n    tm_layout(main.title = paste(\"local Gi Significance\", \"(\", july_LGI$date[1],\")\"),\n              main.title.size = 0.8)"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#local-gi-computation-function",
    "href": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#local-gi-computation-function",
    "title": "Take-home Exercise 2: Spatio-Temporal Analysis",
    "section": "3.1.4 local GI computation function",
    "text": "3.1.4 local GI computation function\nAgain, we add set.seed() to ensure that the output will always be the same\n\nlocal_gi <- function(x){\n  set.seed(1234)\n  month <- vaccinationJKT %>%\n    filter(date == x)\n  wm_q <- month %>%\n    na.exclude() %>%\n    mutate(nb = st_contiguity(geometry),\n           wt = st_inverse_distance(nb, geometry,\n                                   scale = 1,\n                                   alpha = 1))\n  result <- wm_q %>%\n    mutate(local_gi = local_gstar_perm(vaccination_rate,\n                                   nb,\n                                   wt,\n                                   nsim = 99),\n           .before = 1) %>% \n    unnest(local_gi)\n  return(result)\n}\n\n\ndate <- c(\"2021-07-01\", \"2021-08-01\", \"2021-09-01\", \"2021-10-01\", \"2021-11-01\", \"2021-12-01\",\n          \"2022-01-01\", \"2022-02-01\", \"2022-03-01\",\"2022-04-01\", \"2022-05-01\", \"2022-06-01\")\nmonth_GI <- list()\nfor (i in 1:12){\n  month_GI[[i]] <- local_gi(date[i])\n}"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#tmap-function",
    "href": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#tmap-function",
    "title": "Take-home Exercise 2: Spatio-Temporal Analysis",
    "section": "3.1.5 Tmap Function",
    "text": "3.1.5 Tmap Function\n\ngi_graph <- function(x){\n  HCSA_sig <- x %>%\n    filter(p_sim < 0.05)\n  HCSA_plots <- tm_shape(x) +\n    tm_polygons() +\n    tm_borders(alpha = 0.5) +\n    tm_shape(HCSA_sig) +\n      tm_fill(\"gi_star\",\n              palette = \"Reds\",\n              midpoint = 0) +\n      tm_borders(alpha = 0.4) +\n    tm_layout(main.title = paste(\"significant local Gi\", \"(\",x$date[1],\")\"),\n              main.title.size = 0.8)\n  return(HCSA_plots)\n}\n\nWe will now plot it according to chronological order.\n\ntmap_mode(\"plot\")\ntmap_arrange(gi_graph(month_GI[[1]]),\n             gi_graph(month_GI[[2]]),\n             gi_graph(month_GI[[3]]),\n             gi_graph(month_GI[[4]]),\n             ncol = 2)\n\n\n\n\n\ntmap_arrange(gi_graph(month_GI[[5]]),\n             gi_graph(month_GI[[6]]),\n             gi_graph(month_GI[[7]]),\n             gi_graph(month_GI[[8]]),\n             ncol = 2)\n\n\n\n\n\ntmap_arrange(gi_graph(month_GI[[9]]),\n             gi_graph(month_GI[[10]]),\n             gi_graph(month_GI[[11]]),\n             gi_graph(month_GI[[12]]),\n             ncol = 2)"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#statistical-conclusions-not-more-than-250-words",
    "href": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#statistical-conclusions-not-more-than-250-words",
    "title": "Take-home Exercise 2: Spatio-Temporal Analysis",
    "section": "3.2 Statistical conclusions (not more than 250 words)",
    "text": "3.2 Statistical conclusions (not more than 250 words)\nWe understand that a Gi value that has a significant and positive z-score is a hot spot, representing clustering of high values, and the opposite for cold spots as it has a significant negative z-score which represent clustering of low values.\nThe cold areas at the center have persisted for quite a while, which may suggest that the sub district wide lack of vaccination knowledge or a shortage of medical resources. Should the Indonesian government choose to focus on where to increase vaccination rate, they can opt to invest more time into the targeted area of concern, with the help of this Gi map. However, overall vaccination rates have risen."
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#time-series-cube",
    "href": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#time-series-cube",
    "title": "Take-home Exercise 2: Spatio-Temporal Analysis",
    "section": "4.1 Time series cube",
    "text": "4.1 Time series cube\nWe can use spacetime() to create the time series cube, with reference to in-class Exercise 7\n\nvacc_rate_st <- as_spacetime(vaccinationJKT,\n                                .loc_col = \"village_code\",\n                                .time_col = \"date\")"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#spatial-weights",
    "href": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#spatial-weights",
    "title": "Take-home Exercise 2: Spatio-Temporal Analysis",
    "section": "4.2 Spatial weights",
    "text": "4.2 Spatial weights\n\nvacc_rate_nb <- vacc_rate_st %>%\n  activate(\"geometry\") %>%\n  mutate(\n    nb = include_self(st_contiguity(geometry)),\n    wt = st_inverse_distance(nb, geometry,\n                                  scale = 1,\n                                  alpha = 1),\n                                 .before = 1) %>%\n                                set_nbs(\"nb\") %>%\n                                set_wts(\"wt\")"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#computing-the-gi",
    "href": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#computing-the-gi",
    "title": "Take-home Exercise 2: Spatio-Temporal Analysis",
    "section": "4.3 Computing the GI",
    "text": "4.3 Computing the GI\nwe will now use local_gstar_perm() to compute the Gi\n\ngi_s <- vacc_rate_nb %>%\n  group_by(date) %>%\n  mutate(vaccination_rate = as.numeric(vaccination_rate),\n         gi_star = local_gstar_perm(vaccination_rate, \n                                    nb, \n                                    wt, \n                                    nsim = 99)) %>%\n                                    tidyr::unnest(gi_star)"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#mann-kendall-test",
    "href": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#mann-kendall-test",
    "title": "Take-home Exercise 2: Spatio-Temporal Analysis",
    "section": "4.4 Mann-Kendall Test",
    "text": "4.4 Mann-Kendall Test\nWe will now select 3 sub districts and describe the trends using the Mann-Kendall test\n1) 3175061001\n2) 3173011006\n3) 3174071005\n\n4.4.1 First district (3175061001)\n\ndis_1 <- gi_s %>%\n  ungroup() %>%\n  filter(village_code == \"3175061001\") %>%\n  select(date, village_code, gi_star)\n\n\nggplot(data = dis_1, \n       aes(x = date, \n           y = gi_star)) +\n  geom_line() +\n  theme_light()\n\n\n\n\nWe will be mainly focusing on two outputs which are:\ntau : A measure of the strength and direction of the trend in the data. It ranges from -1 to 1, where a tau value of -1 indicates a strong negative trend, a tau value of 0 indicates no trend, and a tau value of 1 indicates a strong positive trend.\nsl : This is the p value and for it to be significant, it has to be less than significance level, 0.05.\n\nstat1 <- dis_1 %>%\n  summarise(mk = list(\n    unclass(\n      Kendall::MannKendall(gi_star)))) %>% \n  tidyr::unnest_wider(mk)\nglimpse(stat1)\n\nRows: 1\nColumns: 5\n$ tau  <dbl> 0.9090908\n$ sl   <dbl> 5.209446e-05\n$ S    <dbl> 60\n$ D    <dbl> 66.00001\n$ varS <dbl> 212.6667\n\n\nConclusion for sub district 3175061001\nWe see a positive tau value and an signifiant sl value as it is < 0.05. This means that there is a slight positive association in gi* values and date and it is statistically significant. It also implies that the vaccination rate has been increasing, and also greater clustering (hot spot).\n\n\n4.4.2 Second district (3173011006)\nWe will be repeating the steps above for the second district as well.\n\ndis_2 <- gi_s %>%\n  ungroup() %>%\n  filter(village_code == \"3173011006\") %>%\n  select(date, village_code, gi_star)\n\n\nggplot(data = dis_2, \n       aes(x = date, \n           y = gi_star)) +\n  geom_line() +\n  theme_light()\n\n\n\n\n\nstat2 <- dis_2 %>%\n  summarise(mk = list(\n    unclass(\n      Kendall::MannKendall(gi_star)))) %>% \n  tidyr::unnest_wider(mk)\nglimpse(stat2)\n\nRows: 1\nColumns: 5\n$ tau  <dbl> -0.4848484\n$ sl   <dbl> 0.03352417\n$ S    <dbl> -32\n$ D    <dbl> 66.00001\n$ varS <dbl> 212.6667\n\n\nConclusion for sub district 3173011006 We see a slight negative tau value and an significant sl value as it is < 0.05. This means that there is a slight negative association in gi* values and date and it is statistically significant. This means that the vaccination rate in this sub district is decreasing (cold spot), and it is statistically significant.\n\n\n4.4.3 Third district (3174071005)\n\ndis_3 <- gi_s %>%\n  ungroup() %>%\n  filter(village_code == \"3174071005\") %>%\n  select(date, village_code, gi_star)\n\n\nggplot(data = dis_3, \n       aes(x = date, \n           y = gi_star)) +\n  geom_line() +\n  theme_light()\n\n\n\n\n\nstat3 <- dis_3 %>%\n  summarise(mk = list(\n    unclass(\n      Kendall::MannKendall(gi_star)))) %>% \n  tidyr::unnest_wider(mk)\nglimpse(stat3)\n\nRows: 1\nColumns: 5\n$ tau  <dbl> -0.8484848\n$ sl   <dbl> 0.0001622756\n$ S    <dbl> -56\n$ D    <dbl> 66.00001\n$ varS <dbl> 212.6667\n\n\nConclusion for sub district 3174071005 We see a negative tau value and an significant sl value as it is < 0.05. This means that there is a negative association in gi* values and date and it is statistically significant. This also means that the vaccination rate in this sub district is decreasing (cold spot)."
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#emerging-hotspot-analysis",
    "href": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#emerging-hotspot-analysis",
    "title": "Take-home Exercise 2: Spatio-Temporal Analysis",
    "section": "4.5 Emerging Hotspot Analysis",
    "text": "4.5 Emerging Hotspot Analysis\nWe will now run the analysis using MannKendall() again, while filtering by significant sl values\n\nehsa <- gi_s %>%\n  group_by(date) %>%\n  summarise(mk = list(\n    unclass(\n      Kendall::MannKendall(gi_star)))) %>%\n  tidyr::unnest_wider(mk) %>%\n  filter(sl < 0.05)\n\nWe will further arrange it here\n\nemerging <- ehsa %>% \n  arrange(sl, abs(tau)) %>% \n  slice(1:5)\n\nWe will be using emerging_hotspot_analysis(), where x takes in a space-time object, .var takes in the variable of vaccination_rate, and k refers to the number of time lags. We will be using set.seed() again to ensure the same output.\n\nset.seed(1234)\nehsa <- emerging_hotspot_analysis(\n  x = vacc_rate_st,\n  .var = \"vaccination_rate\",\n  k = 1,\n  nsim = 99\n)"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#visualising-the-distribution-of-ehsa",
    "href": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#visualising-the-distribution-of-ehsa",
    "title": "Take-home Exercise 2: Spatio-Temporal Analysis",
    "section": "4.6 Visualising the distribution of EHSA",
    "text": "4.6 Visualising the distribution of EHSA\n\nggplot(data = ehsa,\n       aes(x = classification)) +\n  geom_bar()"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#visualising-ehsa-using-tmap",
    "href": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#visualising-ehsa-using-tmap",
    "title": "Take-home Exercise 2: Spatio-Temporal Analysis",
    "section": "4.7 Visualising EHSA using tmap",
    "text": "4.7 Visualising EHSA using tmap\nWe will be using left_join() by village_code and location to join ESHA with classification\n\nvacc_ehsa <- left_join(geoJKT, ehsa, by = c(\"village_code\" = \"location\"))\n\n\nehsa_sig <- vacc_ehsa  %>%\n  filter(p_value < 0.05)\ntmap_mode(\"view\")\ntm_shape(vacc_ehsa) +\n  tm_polygons() +\n  tm_borders(alpha = 0.5) +\ntm_shape(ehsa_sig) +\n  tm_fill(\"classification\") + \n  tm_borders(alpha = 0.4) +\n  tm_view(set.zoom.limits =c(10, 16))"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#statistical-conclusion",
    "href": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html#statistical-conclusion",
    "title": "Take-home Exercise 2: Spatio-Temporal Analysis",
    "section": "4.8 Statistical conclusion",
    "text": "4.8 Statistical conclusion\nFrom this link, we are able to derive some useful insights from the table.\n\n\n\n\n\n\n\nPattern name\nDefinition\n\n\n\n\nSporadic cold spot\nA statistically significant cold spot for the final time-step interval with a history of also being an on-again and off-again cold spot. Less than 90 percent of the time-step intervals have been statistically significant cold spots and none of the time-step intervals have been statistically significant hot spots.\n\n\nOscillating coldspot\nA statistically significant cold spot for the final time-step interval that has a history of also being a statistically significant hot spot during a prior time step. Less than 90 percent of the time-step intervals have been statistically significant cold spots.\n\n\nOscillating hotspot\nA statistically significant hot spot for the final time-step interval that has a history of also being a statistically significant cold spot during a prior time step. Less than 90 percent of the time-step intervals have been statistically significant hot spots.\n\n\n\nBy understanding this table, This could imply that the presence of some areas in which vaccination rate often switch between insignificant levels of clustering and significant levels of clustering of low vaccination rates is present.\nAdditionally, with the vaccination programme by the government, we can also imply that more states are moving from the clustering of low to high vaccination rates, as the presence of oscillating hot spot implies that the initial cold spots became hot spots."
  }
]